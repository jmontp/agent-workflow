<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Human-In-The-Loop orchestration framework for AI-assisted software development"><meta name=author content="AI Agent Workflow Team"><link href=https://jmontp.github.io/agent-workflow/planning/websocket-api-specification/ rel=canonical><link href=../user-journey-personas/ rel=prev><link href=../../development/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>WebSocket API Specification - AI Agent TDD-Scrum Workflow</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><style>:root{.md-tag{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M5.5%207A1.5%201.5%200%200%201%204%205.5%201.5%201.5%200%200%201%205.5%204%201.5%201.5%200%200%201%207%205.5%201.5%201.5%200%200%201%205.5%207m15.91%204.58-9-9C12.05%202.22%2011.55%202%2011%202H4c-1.11%200-2%20.89-2%202v7c0%20.55.22%201.05.59%201.41l8.99%209c.37.36.87.59%201.42.59s1.05-.23%201.41-.59l7-7c.37-.36.59-.86.59-1.41%200-.56-.23-1.06-.59-1.42%22/%3E%3C/svg%3E');}.md-tag.md-tag--html{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m12%2017.56%204.07-1.13.55-6.1H9.38L9.2%208.3h7.6l.2-1.99H7l.56%206.01h6.89l-.23%202.58-2.22.6-2.22-.6-.14-1.66h-2l.29%203.19zM4.07%203h15.86L18.5%2019.2%2012%2021l-6.5-1.8z%22/%3E%3C/svg%3E');}.md-tag.md-tag--js{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M3%203h18v18H3zm4.73%2015.04c.4.85%201.19%201.55%202.54%201.55%201.5%200%202.53-.8%202.53-2.55v-5.78h-1.7V17c0%20.86-.35%201.08-.9%201.08-.58%200-.82-.4-1.09-.87zm5.98-.18c.5.98%201.51%201.73%203.09%201.73%201.6%200%202.8-.83%202.8-2.36%200-1.41-.81-2.04-2.25-2.66l-.42-.18c-.73-.31-1.04-.52-1.04-1.02%200-.41.31-.73.81-.73.48%200%20.8.21%201.09.73l1.31-.87c-.55-.96-1.33-1.33-2.4-1.33-1.51%200-2.48.96-2.48%202.23%200%201.38.81%202.03%202.03%202.55l.42.18c.78.34%201.24.55%201.24%201.13%200%20.48-.45.83-1.15.83-.83%200-1.31-.43-1.67-1.03z%22/%3E%3C/svg%3E');}.md-tag.md-tag--css{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m5%203-.65%203.34h13.59L17.5%208.5H3.92l-.66%203.33h13.59l-.76%203.81-5.48%201.81-4.75-1.81.33-1.64H2.85l-.79%204%207.85%203%209.05-3%201.2-6.03.24-1.21L21.94%203z%22/%3E%3C/svg%3E');}.md-tag.md-tag--python{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M19.14%207.5A2.86%202.86%200%200%201%2022%2010.36v3.78A2.86%202.86%200%200%201%2019.14%2017H12c0%20.39.32.96.71.96H17v1.68a2.86%202.86%200%200%201-2.86%202.86H9.86A2.86%202.86%200%200%201%207%2019.64v-3.75a2.85%202.85%200%200%201%202.86-2.85h5.25a2.85%202.85%200%200%200%202.85-2.86V7.5zm-4.28%2011.79c-.4%200-.72.3-.72.89s.32.71.72.71a.71.71%200%200%200%20.71-.71c0-.59-.32-.89-.71-.89m-10-1.79A2.86%202.86%200%200%201%202%2014.64v-3.78A2.86%202.86%200%200%201%204.86%208H12c0-.39-.32-.96-.71-.96H7V5.36A2.86%202.86%200%200%201%209.86%202.5h4.28A2.86%202.86%200%200%201%2017%205.36v3.75a2.85%202.85%200%200%201-2.86%202.85H8.89a2.85%202.85%200%200%200-2.85%202.86v2.68zM9.14%205.71c.4%200%20.72-.3.72-.89s-.32-.71-.72-.71c-.39%200-.71.12-.71.71s.32.89.71.89%22/%3E%3C/svg%3E');}}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><link rel=stylesheet href=../../stylesheets/enhanced-navigation.css><link rel=stylesheet href=../../stylesheets/color-schemes.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head><body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=blue><input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off><input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off><label class=md-overlay for=__drawer></label><div data-md-component=skip><a href=#websocket-api-specification class=md-skip> Skip to content </a></div><div data-md-component=announce></div><div data-md-color-scheme=default data-md-component=outdated hidden></div><header class="md-header md-header--shadow md-header--lifted" data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a href=../.. title="AI Agent TDD-Scrum Workflow" class="md-header__button md-logo" aria-label="AI Agent TDD-Scrum Workflow" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a><label class="md-header__button md-icon" for=__drawer><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> AI Agent TDD-Scrum Workflow </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> WebSocket API Specification </span></div></div></div><form class=md-header__option data-md-component=palette><input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=blue aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0><label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label><input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_1><label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label></form><script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><div class=md-header__option><div class=md-select><button class="md-header__button md-icon" aria-label="Select language"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg></button><div class=md-select__inner><ul class=md-select__list><li class=md-select__item><a href=../../ hreflang=en class=md-select__link> English </a></li></ul></div></div></div><label class="md-header__button md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required><label class="md-search__icon md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg></label><nav class=md-search__options aria-label=Search><a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg></a><button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap tabindex=0 data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta> Initializing search </div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a href=https://github.com/jmontp/agent-workflow title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></div><div class=md-source__repository> jmontp/agent-workflow </div></a></div></nav><nav class=md-tabs aria-label=Tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a href=../.. class=md-tabs__link> 🏠 Home </a></li><li class=md-tabs__item><a href=../../getting-started/ class=md-tabs__link> ⚡ Getting Started </a></li><li class=md-tabs__item><a href=../../user-guide/ class=md-tabs__link> 📊 User Guide </a></li><li class=md-tabs__item><a href=../../concepts/ class=md-tabs__link> 🎯 Core Concepts </a></li><li class=md-tabs__item><a href=../../architecture/ class=md-tabs__link> 🔥 Architecture </a></li><li class=md-tabs__item><a href=../../advanced/ class=md-tabs__link> ⚡ Advanced Topics </a></li><li class="md-tabs__item md-tabs__item--active"><a href=../ class=md-tabs__link> 🎨 Planning & Design </a></li><li class=md-tabs__item><a href=../../development/ class=md-tabs__link> 📊 Development </a></li><li class=md-tabs__item><a href=../../deployment/ class=md-tabs__link> 🔥 Deployment </a></li><li class=md-tabs__item><a href=../../templates/ class=md-tabs__link> 📋 Templates </a></li><li class=md-tabs__item><a href=../../theme-integration-guide/ class=md-tabs__link> 🎨 Theme Integration </a></li></ul></div></nav></header><div class=md-container data-md-component=container><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a href=../.. title="AI Agent TDD-Scrum Workflow" class="md-nav__button md-logo" aria-label="AI Agent TDD-Scrum Workflow" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a> AI Agent TDD-Scrum Workflow </label><div class=md-nav__source><a href=https://github.com/jmontp/agent-workflow title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></div><div class=md-source__repository> jmontp/agent-workflow </div></a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../.. class=md-nav__link><span class=md-ellipsis> 🏠 Home </span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../getting-started/ class=md-nav__link><span class=md-ellipsis> ⚡ Getting Started </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../user-guide/ class=md-nav__link><span class=md-ellipsis> 📊 User Guide </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../concepts/ class=md-nav__link><span class=md-ellipsis> 🎯 Core Concepts </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../architecture/ class=md-nav__link><span class=md-ellipsis> 🔥 Architecture </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../advanced/ class=md-nav__link><span class=md-ellipsis> ⚡ Advanced Topics </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7 checked><div class="md-nav__link md-nav__container"><a href=../ class="md-nav__link "><span class=md-ellipsis> 🎨 Planning & Design </span></a><label class="md-nav__link " for=__nav_7 id=__nav_7_label tabindex><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=true><label class=md-nav__title for=__nav_7><span class="md-nav__icon md-icon"></span> 🎨 Planning & Design </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../component-specifications/ class=md-nav__link><span class=md-ellipsis> Component Specifications </span></a></li><li class=md-nav__item><a href=../implementation-roadmap/ class=md-nav__link><span class=md-ellipsis> Implementation Roadmap </span></a></li><li class=md-nav__item><a href=../ui-portal-architecture/ class=md-nav__link><span class=md-ellipsis> UI Portal Architecture </span></a></li><li class=md-nav__item><a href=../ui-ux-wireframes/ class=md-nav__link><span class=md-ellipsis> UI/UX Wireframes </span></a></li><li class=md-nav__item><a href=../user-journey-personas/ class=md-nav__link><span class=md-ellipsis> User Journey & Personas </span></a></li><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type=checkbox id=__toc><label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> WebSocket API Specification </span><span class="md-nav__icon md-icon"></span></label><a href=./ class="md-nav__link md-nav__link--active"><span class=md-ellipsis> WebSocket API Specification </span></a><nav class="md-nav md-nav--secondary" aria-label="On this page"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> On this page </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#overview class=md-nav__link><span class=md-ellipsis> Overview </span></a></li><li class=md-nav__item><a href=#connection-architecture class=md-nav__link><span class=md-ellipsis> Connection Architecture </span></a><nav class=md-nav aria-label="Connection Architecture"><ul class=md-nav__list><li class=md-nav__item><a href=#base-url-and-transports class=md-nav__link><span class=md-ellipsis> Base URL and Transports </span></a></li><li class=md-nav__item><a href=#namespace-organization class=md-nav__link><span class=md-ellipsis> Namespace Organization </span></a></li><li class=md-nav__item><a href=#connection-lifecycle class=md-nav__link><span class=md-ellipsis> Connection Lifecycle </span></a></li></ul></nav></li><li class=md-nav__item><a href=#event-specifications class=md-nav__link><span class=md-ellipsis> Event Specifications </span></a><nav class=md-nav aria-label="Event Specifications"><ul class=md-nav__list><li class=md-nav__item><a href=#1-portal-namespace-portal class=md-nav__link><span class=md-ellipsis> 1. Portal Namespace (/portal) </span></a></li><li class=md-nav__item><a href=#2-project-namespace-projectname class=md-nav__link><span class=md-ellipsis> 2. Project Namespace (/project/{name}) </span></a></li><li class=md-nav__item><a href=#3-chat-namespace-chatname class=md-nav__link><span class=md-ellipsis> 3. Chat Namespace (/chat/{name}) </span></a></li><li class=md-nav__item><a href=#4-monitoring-namespace-monitoring class=md-nav__link><span class=md-ellipsis> 4. Monitoring Namespace (/monitoring) </span></a></li><li class=md-nav__item><a href=#5-admin-namespace-admin class=md-nav__link><span class=md-ellipsis> 5. Admin Namespace (/admin) </span></a></li></ul></nav></li><li class=md-nav__item><a href=#client-side-integration class=md-nav__link><span class=md-ellipsis> Client-Side Integration </span></a><nav class=md-nav aria-label="Client-Side Integration"><ul class=md-nav__list><li class=md-nav__item><a href=#socketio-client-setup class=md-nav__link><span class=md-ellipsis> Socket.io Client Setup </span></a></li><li class=md-nav__item><a href=#react-hook-integration class=md-nav__link><span class=md-ellipsis> React Hook Integration </span></a></li></ul></nav></li><li class=md-nav__item><a href=#error-handling-and-reconnection class=md-nav__link><span class=md-ellipsis> Error Handling and Reconnection </span></a><nav class=md-nav aria-label="Error Handling and Reconnection"><ul class=md-nav__list><li class=md-nav__item><a href=#error-types-and-handling class=md-nav__link><span class=md-ellipsis> Error Types and Handling </span></a></li><li class=md-nav__item><a href=#reconnection-strategy class=md-nav__link><span class=md-ellipsis> Reconnection Strategy </span></a></li></ul></nav></li><li class=md-nav__item><a href=#security-considerations class=md-nav__link><span class=md-ellipsis> Security Considerations </span></a><nav class=md-nav aria-label="Security Considerations"><ul class=md-nav__list><li class=md-nav__item><a href=#authentication-and-authorization class=md-nav__link><span class=md-ellipsis> Authentication and Authorization </span></a></li><li class=md-nav__item><a href=#rate-limiting-and-abuse-prevention class=md-nav__link><span class=md-ellipsis> Rate Limiting and Abuse Prevention </span></a></li><li class=md-nav__item><a href=#input-validation-and-sanitization class=md-nav__link><span class=md-ellipsis> Input Validation and Sanitization </span></a></li></ul></nav></li></ul></nav></li></ul></nav></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../development/ class=md-nav__link><span class=md-ellipsis> 📊 Development </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../deployment/ class=md-nav__link><span class=md-ellipsis> 🔥 Deployment </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../templates/ class=md-nav__link><span class=md-ellipsis> 📋 Templates </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../theme-integration-guide/ class=md-nav__link><span class=md-ellipsis> 🎨 Theme Integration </span><span class="md-nav__icon md-icon"></span></a></li></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><a href=https://github.com/jmontp/agent-workflow/edit/master/docs/planning/websocket-api-specification.md title="Edit this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg></a><a href=https://github.com/jmontp/agent-workflow/raw/master/docs/planning/websocket-api-specification.md title="View source of this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg></a><h1 id=websocket-api-specification>WebSocket API Specification<a class=headerlink href=#websocket-api-specification title="Permanent link">&para;</a></h1><h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2><p>The WebSocket API provides real-time bidirectional communication between the web portal and the orchestrator system. It uses Socket.io for enhanced reliability, automatic reconnection, and namespace-based organization.</p><h2 id=connection-architecture>Connection Architecture<a class=headerlink href=#connection-architecture title="Permanent link">&para;</a></h2><h3 id=base-url-and-transports>Base URL and Transports<a class=headerlink href=#base-url-and-transports title="Permanent link">&para;</a></h3><div class="language-text highlight"><span class=filename>Text Only</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><a href=#__codelineno-0-1><span class=linenos data-linenos="1 "></span></a>Base URL: ws://localhost:8000/socket.io/
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><a href=#__codelineno-0-2><span class=linenos data-linenos="2 "></span></a>Transports: websocket, polling (fallback)
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><a href=#__codelineno-0-3><span class=linenos data-linenos="3 "></span></a>Heartbeat Interval: 25 seconds
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><a href=#__codelineno-0-4><span class=linenos data-linenos="4 "></span></a>Heartbeat Timeout: 60 seconds
</span></code></pre></div><h3 id=namespace-organization>Namespace Organization<a class=headerlink href=#namespace-organization title="Permanent link">&para;</a></h3><p>The WebSocket server uses Socket.io namespaces to organize different types of real-time communication:</p><div class="language-text highlight"><span class=filename>Text Only</span><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a><a href=#__codelineno-1-1><span class=linenos data-linenos="1 "></span></a>/portal             - Main application events
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a><a href=#__codelineno-1-2><span class=linenos data-linenos="2 "></span></a>/project/{name}     - Project-specific events  
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a><a href=#__codelineno-1-3><span class=linenos data-linenos="3 "></span></a>/chat/{name}        - Chat message events
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a><a href=#__codelineno-1-4><span class=linenos data-linenos="4 "></span></a>/monitoring         - System monitoring events
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><a href=#__codelineno-1-5><span class=linenos data-linenos="5 "></span></a>/admin              - Administrative events
</span></code></pre></div><h3 id=connection-lifecycle>Connection Lifecycle<a class=headerlink href=#connection-lifecycle title="Permanent link">&para;</a></h3><pre class=mermaid><code>sequenceDiagram
    participant Client
    participant Server
    participant Orchestrator
    
    Client-&gt;&gt;Server: Connect to /portal
    Server-&gt;&gt;Client: Connection established
    Client-&gt;&gt;Server: join_project({project_name})
    Server-&gt;&gt;Server: Add to project room
    Server-&gt;&gt;Client: joined_project({project_name})
    
    Server-&gt;&gt;Orchestrator: Subscribe to project updates
    Orchestrator-&gt;&gt;Server: Project state change
    Server-&gt;&gt;Client: state_change(data)
    
    Client-&gt;&gt;Server: Heartbeat ping
    Server-&gt;&gt;Client: Heartbeat pong</code></pre><h2 id=event-specifications>Event Specifications<a class=headerlink href=#event-specifications title="Permanent link">&para;</a></h2><h3 id=1-portal-namespace-portal>1. Portal Namespace (<code class="language-text highlight">/portal</code>)<a class=headerlink href=#1-portal-namespace-portal title="Permanent link">&para;</a></h3><h4 id=client-to-server-events>Client to Server Events<a class=headerlink href=#client-to-server-events title="Permanent link">&para;</a></h4><p><strong>join_project</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a><a href=#__codelineno-2-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>JoinProjectRequest</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a><a href=#__codelineno-2-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a><a href=#__codelineno-2-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>user_id?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4></a><a href=#__codelineno-2-4><span class=linenos data-linenos=" 4 "></span></a><span class=p>}</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5></a><a href=#__codelineno-2-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6></a><a href=#__codelineno-2-6><span class=linenos data-linenos=" 6 "></span></a><span class=c1>// Usage</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7></a><a href=#__codelineno-2-7><span class=linenos data-linenos=" 7 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;join_project&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8></a><a href=#__codelineno-2-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;my-project&#39;</span><span class=p>,</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9></a><a href=#__codelineno-2-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=nx>user_id</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;user123&#39;</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10></a><a href=#__codelineno-2-10><span class=linenos data-linenos="10 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>leave_project</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a><a href=#__codelineno-3-1><span class=linenos data-linenos="1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>LeaveProjectRequest</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2></a><a href=#__codelineno-3-2><span class=linenos data-linenos="2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3></a><a href=#__codelineno-3-3><span class=linenos data-linenos="3 "></span></a><span class=p>}</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4></a><a href=#__codelineno-3-4><span class=linenos data-linenos="4 "></span></a>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5></a><a href=#__codelineno-3-5><span class=linenos data-linenos="5 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;leave_project&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6></a><a href=#__codelineno-3-6><span class=linenos data-linenos="6 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;my-project&#39;</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7></a><a href=#__codelineno-3-7><span class=linenos data-linenos="7 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>subscribe_to_events</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1></a><a href=#__codelineno-4-1><span class=linenos data-linenos="1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>SubscribeRequest</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2></a><a href=#__codelineno-4-2><span class=linenos data-linenos="2 "></span></a><span class=w>  </span><span class=nx>events</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[];</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3></a><a href=#__codelineno-4-3><span class=linenos data-linenos="3 "></span></a><span class=w>  </span><span class=nx>project_name?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4></a><a href=#__codelineno-4-4><span class=linenos data-linenos="4 "></span></a><span class=p>}</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5></a><a href=#__codelineno-4-5><span class=linenos data-linenos="5 "></span></a>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6></a><a href=#__codelineno-4-6><span class=linenos data-linenos="6 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;subscribe_to_events&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7></a><a href=#__codelineno-4-7><span class=linenos data-linenos="7 "></span></a><span class=w>  </span><span class=nx>events</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;state_change&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;task_update&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;agent_activity&#39;</span><span class=p>],</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8></a><a href=#__codelineno-4-8><span class=linenos data-linenos="8 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;my-project&#39;</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9></a><a href=#__codelineno-4-9><span class=linenos data-linenos="9 "></span></a><span class=p>});</span>
</span></code></pre></div></p><h4 id=server-to-client-events>Server to Client Events<a class=headerlink href=#server-to-client-events title="Permanent link">&para;</a></h4><p><strong>joined_project</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a><a href=#__codelineno-5-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>JoinedProjectResponse</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2></a><a href=#__codelineno-5-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3></a><a href=#__codelineno-5-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>current_state</span><span class=o>:</span><span class=w> </span><span class=kt>WorkflowState</span><span class=p>;</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4></a><a href=#__codelineno-5-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>active_users</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5></a><a href=#__codelineno-5-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>last_activity</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6></a><a href=#__codelineno-5-6><span class=linenos data-linenos=" 6 "></span></a><span class=p>}</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7></a><a href=#__codelineno-5-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8></a><a href=#__codelineno-5-8><span class=linenos data-linenos=" 8 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;joined_project&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>JoinedProjectResponse</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9></a><a href=#__codelineno-5-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=c1>// Handle successful project join</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10></a><a href=#__codelineno-5-10><span class=linenos data-linenos="10 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>user_joined</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1></a><a href=#__codelineno-6-1><span class=linenos data-linenos="1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>UserJoinedEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2></a><a href=#__codelineno-6-2><span class=linenos data-linenos="2 "></span></a><span class=w>  </span><span class=nx>user_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3></a><a href=#__codelineno-6-3><span class=linenos data-linenos="3 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4></a><a href=#__codelineno-6-4><span class=linenos data-linenos="4 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5></a><a href=#__codelineno-6-5><span class=linenos data-linenos="5 "></span></a><span class=p>}</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6></a><a href=#__codelineno-6-6><span class=linenos data-linenos="6 "></span></a>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7></a><a href=#__codelineno-6-7><span class=linenos data-linenos="7 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;user_joined&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>UserJoinedEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8></a><a href=#__codelineno-6-8><span class=linenos data-linenos="8 "></span></a><span class=w>  </span><span class=c1>// Handle another user joining project</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9></a><a href=#__codelineno-6-9><span class=linenos data-linenos="9 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>user_left</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a><a href=#__codelineno-7-1><span class=linenos data-linenos="1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>UserLeftEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2></a><a href=#__codelineno-7-2><span class=linenos data-linenos="2 "></span></a><span class=w>  </span><span class=nx>user_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3></a><a href=#__codelineno-7-3><span class=linenos data-linenos="3 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4></a><a href=#__codelineno-7-4><span class=linenos data-linenos="4 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5></a><a href=#__codelineno-7-5><span class=linenos data-linenos="5 "></span></a><span class=p>}</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6></a><a href=#__codelineno-7-6><span class=linenos data-linenos="6 "></span></a>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7></a><a href=#__codelineno-7-7><span class=linenos data-linenos="7 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;user_left&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>UserLeftEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8></a><a href=#__codelineno-7-8><span class=linenos data-linenos="8 "></span></a><span class=w>  </span><span class=c1>// Handle user leaving project</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9></a><a href=#__codelineno-7-9><span class=linenos data-linenos="9 "></span></a><span class=p>});</span>
</span></code></pre></div></p><h3 id=2-project-namespace-projectname>2. Project Namespace (<code class="language-text highlight">/project/{name}</code>)<a class=headerlink href=#2-project-namespace-projectname title="Permanent link">&para;</a></h3><h4 id=state-management-events>State Management Events<a class=headerlink href=#state-management-events title="Permanent link">&para;</a></h4><p><strong>state_change</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1></a><a href=#__codelineno-8-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>StateChangeEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2></a><a href=#__codelineno-8-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3></a><a href=#__codelineno-8-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>old_state</span><span class=o>:</span><span class=w> </span><span class=kt>WorkflowState</span><span class=p>;</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4></a><a href=#__codelineno-8-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>new_state</span><span class=o>:</span><span class=w> </span><span class=kt>WorkflowState</span><span class=p>;</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5></a><a href=#__codelineno-8-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6></a><a href=#__codelineno-8-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>triggered_by</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7></a><a href=#__codelineno-8-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>command?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8></a><a href=#__codelineno-8-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>reason?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9></a><a href=#__codelineno-8-9><span class=linenos data-linenos=" 9 "></span></a><span class=p>}</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10></a><a href=#__codelineno-8-10><span class=linenos data-linenos="10 "></span></a>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11></a><a href=#__codelineno-8-11><span class=linenos data-linenos="11 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;state_change&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>StateChangeEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12></a><a href=#__codelineno-8-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=c1>// Update UI to reflect new state</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13></a><a href=#__codelineno-8-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=nx>updateProjectState</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>project_name</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>new_state</span><span class=p>);</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14></a><a href=#__codelineno-8-14><span class=linenos data-linenos="14 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>task_update</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1></a><a href=#__codelineno-9-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>TaskUpdateEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2></a><a href=#__codelineno-9-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3></a><a href=#__codelineno-9-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>task_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4></a><a href=#__codelineno-9-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>task_type</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5></a><a href=#__codelineno-9-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>status</span><span class=o>:</span><span class=w> </span><span class=kt>TaskStatus</span><span class=p>;</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6></a><a href=#__codelineno-9-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>progress</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7></a><a href=#__codelineno-9-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>agent_type</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8></a><a href=#__codelineno-9-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>started_at?</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9></a><a href=#__codelineno-9-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=nx>completed_at?</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10></a><a href=#__codelineno-9-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=nx>error?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11></a><a href=#__codelineno-9-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=nx>metadata?</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>any</span><span class=o>&gt;</span><span class=p>;</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12></a><a href=#__codelineno-9-12><span class=linenos data-linenos="12 "></span></a><span class=p>}</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13></a><a href=#__codelineno-9-13><span class=linenos data-linenos="13 "></span></a>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14></a><a href=#__codelineno-9-14><span class=linenos data-linenos="14 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;task_update&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>TaskUpdateEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15></a><a href=#__codelineno-9-15><span class=linenos data-linenos="15 "></span></a><span class=w>  </span><span class=c1>// Update task progress in UI</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16></a><a href=#__codelineno-9-16><span class=linenos data-linenos="16 "></span></a><span class=w>  </span><span class=nx>updateTaskProgress</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>task_id</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>progress</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>status</span><span class=p>);</span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17></a><a href=#__codelineno-9-17><span class=linenos data-linenos="17 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>approval_request</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1></a><a href=#__codelineno-10-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>ApprovalRequestEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2></a><a href=#__codelineno-10-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3></a><a href=#__codelineno-10-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>request_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4></a><a href=#__codelineno-10-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>task</span><span class=o>:</span><span class=w> </span><span class=kt>Task</span><span class=p>;</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5></a><a href=#__codelineno-10-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>reason</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6></a><a href=#__codelineno-10-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>created_at</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7></a><a href=#__codelineno-10-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>retry_count</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8></a><a href=#__codelineno-10-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>timeout_at</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9></a><a href=#__codelineno-10-9><span class=linenos data-linenos=" 9 "></span></a><span class=p>}</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10></a><a href=#__codelineno-10-10><span class=linenos data-linenos="10 "></span></a>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11></a><a href=#__codelineno-10-11><span class=linenos data-linenos="11 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;approval_request&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>ApprovalRequestEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12></a><a href=#__codelineno-10-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=c1>// Show approval request in UI</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13></a><a href=#__codelineno-10-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=nx>showApprovalDialog</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14></a><a href=#__codelineno-10-14><span class=linenos data-linenos="14 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>approval_resolved</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1></a><a href=#__codelineno-11-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>ApprovalResolvedEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2></a><a href=#__codelineno-11-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3></a><a href=#__codelineno-11-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>request_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4></a><a href=#__codelineno-11-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>approved</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5></a><a href=#__codelineno-11-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>resolved_by</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6></a><a href=#__codelineno-11-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>resolved_at</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7></a><a href=#__codelineno-11-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>comment?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8></a><a href=#__codelineno-11-8><span class=linenos data-linenos=" 8 "></span></a><span class=p>}</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9></a><a href=#__codelineno-11-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10></a><a href=#__codelineno-11-10><span class=linenos data-linenos="10 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;approval_resolved&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>ApprovalResolvedEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11></a><a href=#__codelineno-11-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=c1>// Hide approval dialog and continue workflow</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12></a><a href=#__codelineno-11-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=nx>hideApprovalDialog</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>request_id</span><span class=p>);</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13></a><a href=#__codelineno-11-13><span class=linenos data-linenos="13 "></span></a><span class=p>});</span>
</span></code></pre></div></p><h4 id=sprint-and-backlog-events>Sprint and Backlog Events<a class=headerlink href=#sprint-and-backlog-events title="Permanent link">&para;</a></h4><p><strong>sprint_progress</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1></a><a href=#__codelineno-12-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>SprintProgressEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2></a><a href=#__codelineno-12-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3></a><a href=#__codelineno-12-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>sprint_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4></a><a href=#__codelineno-12-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>total_stories</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5></a><a href=#__codelineno-12-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>completed_stories</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6></a><a href=#__codelineno-12-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>failed_stories</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7></a><a href=#__codelineno-12-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>in_progress_stories</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8></a><a href=#__codelineno-12-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>estimated_completion</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9></a><a href=#__codelineno-12-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=nx>velocity</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10></a><a href=#__codelineno-12-10><span class=linenos data-linenos="10 "></span></a><span class=p>}</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11></a><a href=#__codelineno-12-11><span class=linenos data-linenos="11 "></span></a>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12></a><a href=#__codelineno-12-12><span class=linenos data-linenos="12 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;sprint_progress&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>SprintProgressEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13></a><a href=#__codelineno-12-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=c1>// Update sprint progress visualization</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14></a><a href=#__codelineno-12-14><span class=linenos data-linenos="14 "></span></a><span class=w>  </span><span class=nx>updateSprintProgress</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15></a><a href=#__codelineno-12-15><span class=linenos data-linenos="15 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>backlog_updated</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1></a><a href=#__codelineno-13-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>BacklogUpdatedEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2></a><a href=#__codelineno-13-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3></a><a href=#__codelineno-13-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>change_type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;added&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;removed&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;updated&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;reordered&#39;</span><span class=p>;</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4></a><a href=#__codelineno-13-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>story_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5></a><a href=#__codelineno-13-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>story?</span><span class=o>:</span><span class=w> </span><span class=kt>Story</span><span class=p>;</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6></a><a href=#__codelineno-13-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>old_position?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7></a><a href=#__codelineno-13-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>new_position?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8></a><a href=#__codelineno-13-8><span class=linenos data-linenos=" 8 "></span></a><span class=p>}</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9></a><a href=#__codelineno-13-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10></a><a href=#__codelineno-13-10><span class=linenos data-linenos="10 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;backlog_updated&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>BacklogUpdatedEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11></a><a href=#__codelineno-13-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=c1>// Update backlog display</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12></a><a href=#__codelineno-13-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=nx>updateBacklogItem</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13></a><a href=#__codelineno-13-13><span class=linenos data-linenos="13 "></span></a><span class=p>});</span>
</span></code></pre></div></p><h3 id=3-chat-namespace-chatname>3. Chat Namespace (<code class="language-text highlight">/chat/{name}</code>)<a class=headerlink href=#3-chat-namespace-chatname title="Permanent link">&para;</a></h3><h4 id=message-events>Message Events<a class=headerlink href=#message-events title="Permanent link">&para;</a></h4><p><strong>send_message</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1></a><a href=#__codelineno-14-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>SendMessageRequest</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2></a><a href=#__codelineno-14-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>content</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3></a><a href=#__codelineno-14-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;command&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;message&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;thread_reply&#39;</span><span class=p>;</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4></a><a href=#__codelineno-14-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>thread_id?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5></a><a href=#__codelineno-14-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>attachments?</span><span class=o>:</span><span class=w> </span><span class=kt>FileAttachment</span><span class=p>[];</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6></a><a href=#__codelineno-14-6><span class=linenos data-linenos=" 6 "></span></a><span class=p>}</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7></a><a href=#__codelineno-14-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8></a><a href=#__codelineno-14-8><span class=linenos data-linenos=" 8 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;send_message&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9></a><a href=#__codelineno-14-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=nx>content</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;/sprint start&#39;</span><span class=p>,</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10></a><a href=#__codelineno-14-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;command&#39;</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11></a><a href=#__codelineno-14-11><span class=linenos data-linenos="11 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>message_received</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1></a><a href=#__codelineno-15-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>MessageReceivedEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2></a><a href=#__codelineno-15-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>message_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3></a><a href=#__codelineno-15-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4></a><a href=#__codelineno-15-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>user_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5></a><a href=#__codelineno-15-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>content</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6></a><a href=#__codelineno-15-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;command&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;response&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;thread&#39;</span><span class=p>;</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7></a><a href=#__codelineno-15-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8></a><a href=#__codelineno-15-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>thread_id?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9></a><a href=#__codelineno-15-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=nx>attachments?</span><span class=o>:</span><span class=w> </span><span class=kt>FileAttachment</span><span class=p>[];</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10></a><a href=#__codelineno-15-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=nx>reactions?</span><span class=o>:</span><span class=w> </span><span class=kt>Reaction</span><span class=p>[];</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11></a><a href=#__codelineno-15-11><span class=linenos data-linenos="11 "></span></a><span class=p>}</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12></a><a href=#__codelineno-15-12><span class=linenos data-linenos="12 "></span></a>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13></a><a href=#__codelineno-15-13><span class=linenos data-linenos="13 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;message_received&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>MessageReceivedEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14></a><a href=#__codelineno-15-14><span class=linenos data-linenos="14 "></span></a><span class=w>  </span><span class=c1>// Add message to chat interface</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15></a><a href=#__codelineno-15-15><span class=linenos data-linenos="15 "></span></a><span class=w>  </span><span class=nx>addMessageToChat</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16></a><a href=#__codelineno-15-16><span class=linenos data-linenos="16 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>command_result</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1></a><a href=#__codelineno-16-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>CommandResultEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2></a><a href=#__codelineno-16-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>message_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3></a><a href=#__codelineno-16-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>command</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4></a><a href=#__codelineno-16-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>success</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5></a><a href=#__codelineno-16-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>result?</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>;</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6></a><a href=#__codelineno-16-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>error?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7></a><a href=#__codelineno-16-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>execution_time</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8></a><a href=#__codelineno-16-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9></a><a href=#__codelineno-16-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=nx>embed_data?</span><span class=o>:</span><span class=w> </span><span class=kt>EmbedData</span><span class=p>;</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10></a><a href=#__codelineno-16-10><span class=linenos data-linenos="10 "></span></a><span class=p>}</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11></a><a href=#__codelineno-16-11><span class=linenos data-linenos="11 "></span></a>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12></a><a href=#__codelineno-16-12><span class=linenos data-linenos="12 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;command_result&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>CommandResultEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13></a><a href=#__codelineno-16-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=c1>// Display command result in chat</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14></a><a href=#__codelineno-16-14><span class=linenos data-linenos="14 "></span></a><span class=w>  </span><span class=nx>displayCommandResult</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15></a><a href=#__codelineno-16-15><span class=linenos data-linenos="15 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>typing_start</strong> / <strong>typing_stop</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1></a><a href=#__codelineno-17-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>TypingEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2></a><a href=#__codelineno-17-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>user_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3></a><a href=#__codelineno-17-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4></a><a href=#__codelineno-17-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5></a><a href=#__codelineno-17-5><span class=linenos data-linenos=" 5 "></span></a><span class=p>}</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6></a><a href=#__codelineno-17-6><span class=linenos data-linenos=" 6 "></span></a>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7></a><a href=#__codelineno-17-7><span class=linenos data-linenos=" 7 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;typing_start&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>TypingEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8></a><a href=#__codelineno-17-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>showTypingIndicator</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>user_id</span><span class=p>);</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9></a><a href=#__codelineno-17-9><span class=linenos data-linenos=" 9 "></span></a><span class=p>});</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10></a><a href=#__codelineno-17-10><span class=linenos data-linenos="10 "></span></a>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11></a><a href=#__codelineno-17-11><span class=linenos data-linenos="11 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;typing_stop&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>TypingEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12></a><a href=#__codelineno-17-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=nx>hideTypingIndicator</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>user_id</span><span class=p>);</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13></a><a href=#__codelineno-17-13><span class=linenos data-linenos="13 "></span></a><span class=p>});</span>
</span></code></pre></div></p><h4 id=thread-management-events>Thread Management Events<a class=headerlink href=#thread-management-events title="Permanent link">&para;</a></h4><p><strong>thread_created</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1></a><a href=#__codelineno-18-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>ThreadCreatedEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2></a><a href=#__codelineno-18-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>thread_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3></a><a href=#__codelineno-18-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>parent_message_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4></a><a href=#__codelineno-18-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5></a><a href=#__codelineno-18-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>created_by</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6></a><a href=#__codelineno-18-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7></a><a href=#__codelineno-18-7><span class=linenos data-linenos=" 7 "></span></a><span class=p>}</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8></a><a href=#__codelineno-18-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9></a><a href=#__codelineno-18-9><span class=linenos data-linenos=" 9 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;thread_created&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadCreatedEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10></a><a href=#__codelineno-18-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=c1>// Enable thread view for message</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11></a><a href=#__codelineno-18-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=nx>enableThreadView</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>parent_message_id</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>thread_id</span><span class=p>);</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12></a><a href=#__codelineno-18-12><span class=linenos data-linenos="12 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>thread_updated</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1></a><a href=#__codelineno-19-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>ThreadUpdatedEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2></a><a href=#__codelineno-19-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>thread_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3></a><a href=#__codelineno-19-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>message_count</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4></a><a href=#__codelineno-19-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>last_message_at</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5></a><a href=#__codelineno-19-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>participants</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[];</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6></a><a href=#__codelineno-19-6><span class=linenos data-linenos=" 6 "></span></a><span class=p>}</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7></a><a href=#__codelineno-19-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8></a><a href=#__codelineno-19-8><span class=linenos data-linenos=" 8 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;thread_updated&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>ThreadUpdatedEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9></a><a href=#__codelineno-19-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=c1>// Update thread metadata</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10></a><a href=#__codelineno-19-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=nx>updateThreadInfo</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11></a><a href=#__codelineno-19-11><span class=linenos data-linenos="11 "></span></a><span class=p>});</span>
</span></code></pre></div></p><h3 id=4-monitoring-namespace-monitoring>4. Monitoring Namespace (<code class="language-text highlight">/monitoring</code>)<a class=headerlink href=#4-monitoring-namespace-monitoring title="Permanent link">&para;</a></h3><h4 id=agent-activity-events>Agent Activity Events<a class=headerlink href=#agent-activity-events title="Permanent link">&para;</a></h4><p><strong>agent_activity</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1></a><a href=#__codelineno-20-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>AgentActivityEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2></a><a href=#__codelineno-20-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>agent_type</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3></a><a href=#__codelineno-20-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4></a><a href=#__codelineno-20-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5></a><a href=#__codelineno-20-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>status</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;started&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;completed&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;failed&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;paused&#39;</span><span class=p>;</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6></a><a href=#__codelineno-20-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>task_id?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7></a><a href=#__codelineno-20-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>story_id?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8></a><a href=#__codelineno-20-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9></a><a href=#__codelineno-20-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=nx>duration?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10></a><a href=#__codelineno-20-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=nx>metrics?</span><span class=o>:</span><span class=w> </span><span class=kt>AgentMetrics</span><span class=p>;</span>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11></a><a href=#__codelineno-20-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=nx>error?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12></a><a href=#__codelineno-20-12><span class=linenos data-linenos="12 "></span></a><span class=p>}</span>
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13></a><a href=#__codelineno-20-13><span class=linenos data-linenos="13 "></span></a>
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14></a><a href=#__codelineno-20-14><span class=linenos data-linenos="14 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;agent_activity&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>AgentActivityEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15></a><a href=#__codelineno-20-15><span class=linenos data-linenos="15 "></span></a><span class=w>  </span><span class=c1>// Update agent activity dashboard</span>
</span><span id=__span-20-16><a id=__codelineno-20-16 name=__codelineno-20-16></a><a href=#__codelineno-20-16><span class=linenos data-linenos="16 "></span></a><span class=w>  </span><span class=nx>updateAgentActivity</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-20-17><a id=__codelineno-20-17 name=__codelineno-20-17></a><a href=#__codelineno-20-17><span class=linenos data-linenos="17 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>system_metrics</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1></a><a href=#__codelineno-21-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>SystemMetricsEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2></a><a href=#__codelineno-21-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3></a><a href=#__codelineno-21-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>cpu_usage</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4></a><a href=#__codelineno-21-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>memory_usage</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5></a><a href=#__codelineno-21-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>disk_usage</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6></a><a href=#__codelineno-21-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>network_io</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7></a><a href=#__codelineno-21-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=nx>bytes_sent</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8></a><a href=#__codelineno-21-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=nx>bytes_received</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9></a><a href=#__codelineno-21-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=p>};</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10></a><a href=#__codelineno-21-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=nx>active_connections</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11></a><a href=#__codelineno-21-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=nx>active_projects</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12></a><a href=#__codelineno-21-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=nx>active_tasks</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-21-13><a id=__codelineno-21-13 name=__codelineno-21-13></a><a href=#__codelineno-21-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=nx>error_rate</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-21-14><a id=__codelineno-21-14 name=__codelineno-21-14></a><a href=#__codelineno-21-14><span class=linenos data-linenos="14 "></span></a><span class=w>  </span><span class=nx>uptime</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-21-15><a id=__codelineno-21-15 name=__codelineno-21-15></a><a href=#__codelineno-21-15><span class=linenos data-linenos="15 "></span></a><span class=p>}</span>
</span><span id=__span-21-16><a id=__codelineno-21-16 name=__codelineno-21-16></a><a href=#__codelineno-21-16><span class=linenos data-linenos="16 "></span></a>
</span><span id=__span-21-17><a id=__codelineno-21-17 name=__codelineno-21-17></a><a href=#__codelineno-21-17><span class=linenos data-linenos="17 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;system_metrics&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>SystemMetricsEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-18><a id=__codelineno-21-18 name=__codelineno-21-18></a><a href=#__codelineno-21-18><span class=linenos data-linenos="18 "></span></a><span class=w>  </span><span class=c1>// Update system metrics dashboard</span>
</span><span id=__span-21-19><a id=__codelineno-21-19 name=__codelineno-21-19></a><a href=#__codelineno-21-19><span class=linenos data-linenos="19 "></span></a><span class=w>  </span><span class=nx>updateSystemMetrics</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-21-20><a id=__codelineno-21-20 name=__codelineno-21-20></a><a href=#__codelineno-21-20><span class=linenos data-linenos="20 "></span></a><span class=p>});</span>
</span></code></pre></div></p><h4 id=tdd-monitoring-events>TDD Monitoring Events<a class=headerlink href=#tdd-monitoring-events title="Permanent link">&para;</a></h4><p><strong>tdd_cycle_started</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1></a><a href=#__codelineno-22-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>TDDCycleStartedEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2></a><a href=#__codelineno-22-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3></a><a href=#__codelineno-22-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>cycle_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4></a><a href=#__codelineno-22-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>story_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5></a><a href=#__codelineno-22-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>started_by</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6></a><a href=#__codelineno-22-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>estimated_duration</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7></a><a href=#__codelineno-22-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8></a><a href=#__codelineno-22-8><span class=linenos data-linenos=" 8 "></span></a><span class=p>}</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9></a><a href=#__codelineno-22-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10></a><a href=#__codelineno-22-10><span class=linenos data-linenos="10 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;tdd_cycle_started&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>TDDCycleStartedEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-22-11><a id=__codelineno-22-11 name=__codelineno-22-11></a><a href=#__codelineno-22-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=c1>// Show TDD cycle in monitoring dashboard</span>
</span><span id=__span-22-12><a id=__codelineno-22-12 name=__codelineno-22-12></a><a href=#__codelineno-22-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=nx>startTDDCycleMonitoring</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-22-13><a id=__codelineno-22-13 name=__codelineno-22-13></a><a href=#__codelineno-22-13><span class=linenos data-linenos="13 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>tdd_state_change</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1></a><a href=#__codelineno-23-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>TDDStateChangeEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2></a><a href=#__codelineno-23-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3></a><a href=#__codelineno-23-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>cycle_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4></a><a href=#__codelineno-23-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>old_state</span><span class=o>:</span><span class=w> </span><span class=kt>TDDState</span><span class=p>;</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5></a><a href=#__codelineno-23-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>new_state</span><span class=o>:</span><span class=w> </span><span class=kt>TDDState</span><span class=p>;</span>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6></a><a href=#__codelineno-23-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7></a><a href=#__codelineno-23-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>phase_duration?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8></a><a href=#__codelineno-23-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>test_results?</span><span class=o>:</span><span class=w> </span><span class=kt>TestResult</span><span class=p>[];</span>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9></a><a href=#__codelineno-23-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=nx>code_metrics?</span><span class=o>:</span><span class=w> </span><span class=kt>CodeMetrics</span><span class=p>;</span>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10></a><a href=#__codelineno-23-10><span class=linenos data-linenos="10 "></span></a><span class=p>}</span>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11></a><a href=#__codelineno-23-11><span class=linenos data-linenos="11 "></span></a>
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12></a><a href=#__codelineno-23-12><span class=linenos data-linenos="12 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;tdd_state_change&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>TDDStateChangeEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13></a><a href=#__codelineno-23-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=c1>// Update TDD cycle progress</span>
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14></a><a href=#__codelineno-23-14><span class=linenos data-linenos="14 "></span></a><span class=w>  </span><span class=nx>updateTDDCycleState</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15></a><a href=#__codelineno-23-15><span class=linenos data-linenos="15 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>test_output</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1></a><a href=#__codelineno-24-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>TestOutputEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2></a><a href=#__codelineno-24-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3></a><a href=#__codelineno-24-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>cycle_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4></a><a href=#__codelineno-24-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>output_type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;stdout&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;stderr&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;test_result&#39;</span><span class=p>;</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5></a><a href=#__codelineno-24-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>content</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6></a><a href=#__codelineno-24-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7></a><a href=#__codelineno-24-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>sequence_number</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8></a><a href=#__codelineno-24-8><span class=linenos data-linenos=" 8 "></span></a><span class=p>}</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9></a><a href=#__codelineno-24-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10></a><a href=#__codelineno-24-10><span class=linenos data-linenos="10 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;test_output&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>TestOutputEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11></a><a href=#__codelineno-24-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=c1>// Stream test output to UI</span>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12></a><a href=#__codelineno-24-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=nx>appendTestOutput</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13></a><a href=#__codelineno-24-13><span class=linenos data-linenos="13 "></span></a><span class=p>});</span>
</span></code></pre></div></p><h3 id=5-admin-namespace-admin>5. Admin Namespace (<code class="language-text highlight">/admin</code>)<a class=headerlink href=#5-admin-namespace-admin title="Permanent link">&para;</a></h3><h4 id=configuration-events>Configuration Events<a class=headerlink href=#configuration-events title="Permanent link">&para;</a></h4><p><strong>config_changed</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1></a><a href=#__codelineno-25-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>ConfigChangedEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2></a><a href=#__codelineno-25-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>config_type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;agent&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;system&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;security&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;user&#39;</span><span class=p>;</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3></a><a href=#__codelineno-25-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>changed_by</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4></a><a href=#__codelineno-25-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>changes</span><span class=o>:</span><span class=w> </span><span class=kt>Record</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>any</span><span class=o>&gt;</span><span class=p>;</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5></a><a href=#__codelineno-25-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6></a><a href=#__codelineno-25-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>reason?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7></a><a href=#__codelineno-25-7><span class=linenos data-linenos=" 7 "></span></a><span class=p>}</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8></a><a href=#__codelineno-25-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9></a><a href=#__codelineno-25-9><span class=linenos data-linenos=" 9 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;config_changed&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>ConfigChangedEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10></a><a href=#__codelineno-25-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=c1>// Refresh configuration UI</span>
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11></a><a href=#__codelineno-25-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=nx>refreshConfiguration</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>config_type</span><span class=p>);</span>
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12></a><a href=#__codelineno-25-12><span class=linenos data-linenos="12 "></span></a><span class=p>});</span>
</span></code></pre></div></p><p><strong>user_action</strong><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1></a><a href=#__codelineno-26-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>UserActionEvent</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2></a><a href=#__codelineno-26-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>user_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3></a><a href=#__codelineno-26-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4></a><a href=#__codelineno-26-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>resource</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5></a><a href=#__codelineno-26-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6></a><a href=#__codelineno-26-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>ip_address?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7></a><a href=#__codelineno-26-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>user_agent?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8></a><a href=#__codelineno-26-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=nx>success</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9></a><a href=#__codelineno-26-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=nx>error?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10></a><a href=#__codelineno-26-10><span class=linenos data-linenos="10 "></span></a><span class=p>}</span>
</span><span id=__span-26-11><a id=__codelineno-26-11 name=__codelineno-26-11></a><a href=#__codelineno-26-11><span class=linenos data-linenos="11 "></span></a>
</span><span id=__span-26-12><a id=__codelineno-26-12 name=__codelineno-26-12></a><a href=#__codelineno-26-12><span class=linenos data-linenos="12 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;user_action&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>UserActionEvent</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-26-13><a id=__codelineno-26-13 name=__codelineno-26-13></a><a href=#__codelineno-26-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=c1>// Log user action for audit</span>
</span><span id=__span-26-14><a id=__codelineno-26-14 name=__codelineno-26-14></a><a href=#__codelineno-26-14><span class=linenos data-linenos="14 "></span></a><span class=w>  </span><span class=nx>logUserAction</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-26-15><a id=__codelineno-26-15 name=__codelineno-26-15></a><a href=#__codelineno-26-15><span class=linenos data-linenos="15 "></span></a><span class=p>});</span>
</span></code></pre></div></p><h2 id=client-side-integration>Client-Side Integration<a class=headerlink href=#client-side-integration title="Permanent link">&para;</a></h2><h3 id=socketio-client-setup>Socket.io Client Setup<a class=headerlink href=#socketio-client-setup title="Permanent link">&para;</a></h3><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1></a><a href=#__codelineno-27-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>io</span><span class=p>,</span><span class=w> </span><span class=nx>Socket</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;socket.io-client&#39;</span><span class=p>;</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2></a><a href=#__codelineno-27-2><span class=linenos data-linenos=" 2 "></span></a>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3></a><a href=#__codelineno-27-3><span class=linenos data-linenos=" 3 "></span></a><span class=kd>class</span><span class=w> </span><span class=nx>WebSocketManager</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4></a><a href=#__codelineno-27-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=nx>sockets</span><span class=o>:</span><span class=w> </span><span class=kt>Map</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>Socket</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Map</span><span class=p>();</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5></a><a href=#__codelineno-27-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=nx>subscriptions</span><span class=o>:</span><span class=w> </span><span class=kt>Map</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nb>Set</span><span class=o>&lt;</span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Map</span><span class=p>();</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6></a><a href=#__codelineno-27-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7></a><a href=#__codelineno-27-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>connect</span><span class=p>(</span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;/portal&#39;</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>Socket</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8></a><a href=#__codelineno-27-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>sockets</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>namespace</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9></a><a href=#__codelineno-27-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>      </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>sockets</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>namespace</span><span class=p>)</span><span class=o>!</span><span class=p>;</span>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10></a><a href=#__codelineno-27-10><span class=linenos data-linenos="10 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11></a><a href=#__codelineno-27-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span>
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12></a><a href=#__codelineno-27-12><span class=linenos data-linenos="12 "></span></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>socket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>io</span><span class=p>(</span><span class=sb>`ws://localhost:8000</span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13></a><a href=#__codelineno-27-13><span class=linenos data-linenos="13 "></span></a><span class=w>      </span><span class=nx>transports</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;websocket&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;polling&#39;</span><span class=p>],</span>
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14></a><a href=#__codelineno-27-14><span class=linenos data-linenos="14 "></span></a><span class=w>      </span><span class=nx>timeout</span><span class=o>:</span><span class=w> </span><span class=kt>5000</span><span class=p>,</span>
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15></a><a href=#__codelineno-27-15><span class=linenos data-linenos="15 "></span></a><span class=w>      </span><span class=nx>reconnection</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=p>,</span>
</span><span id=__span-27-16><a id=__codelineno-27-16 name=__codelineno-27-16></a><a href=#__codelineno-27-16><span class=linenos data-linenos="16 "></span></a><span class=w>      </span><span class=nx>reconnectionAttempts</span><span class=o>:</span><span class=w> </span><span class=kt>5</span><span class=p>,</span>
</span><span id=__span-27-17><a id=__codelineno-27-17 name=__codelineno-27-17></a><a href=#__codelineno-27-17><span class=linenos data-linenos="17 "></span></a><span class=w>      </span><span class=nx>reconnectionDelay</span><span class=o>:</span><span class=w> </span><span class=kt>1000</span><span class=p>,</span>
</span><span id=__span-27-18><a id=__codelineno-27-18 name=__codelineno-27-18></a><a href=#__codelineno-27-18><span class=linenos data-linenos="18 "></span></a><span class=w>      </span><span class=nx>reconnectionDelayMax</span><span class=o>:</span><span class=w> </span><span class=kt>5000</span><span class=p>,</span>
</span><span id=__span-27-19><a id=__codelineno-27-19 name=__codelineno-27-19></a><a href=#__codelineno-27-19><span class=linenos data-linenos="19 "></span></a><span class=w>    </span><span class=p>});</span>
</span><span id=__span-27-20><a id=__codelineno-27-20 name=__codelineno-27-20></a><a href=#__codelineno-27-20><span class=linenos data-linenos="20 "></span></a><span class=w>    </span>
</span><span id=__span-27-21><a id=__codelineno-27-21 name=__codelineno-27-21></a><a href=#__codelineno-27-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=nx>setupSocketListeners</span><span class=p>(</span><span class=nx>socket</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-27-22><a id=__codelineno-27-22 name=__codelineno-27-22></a><a href=#__codelineno-27-22><span class=linenos data-linenos="22 "></span></a><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=nx>sockets</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=nx>socket</span><span class=p>);</span>
</span><span id=__span-27-23><a id=__codelineno-27-23 name=__codelineno-27-23></a><a href=#__codelineno-27-23><span class=linenos data-linenos="23 "></span></a><span class=w>    </span>
</span><span id=__span-27-24><a id=__codelineno-27-24 name=__codelineno-27-24></a><a href=#__codelineno-27-24><span class=linenos data-linenos="24 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>socket</span><span class=p>;</span>
</span><span id=__span-27-25><a id=__codelineno-27-25 name=__codelineno-27-25></a><a href=#__codelineno-27-25><span class=linenos data-linenos="25 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-27-26><a id=__codelineno-27-26 name=__codelineno-27-26></a><a href=#__codelineno-27-26><span class=linenos data-linenos="26 "></span></a><span class=w>  </span>
</span><span id=__span-27-27><a id=__codelineno-27-27 name=__codelineno-27-27></a><a href=#__codelineno-27-27><span class=linenos data-linenos="27 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=nx>setupSocketListeners</span><span class=p>(</span><span class=nx>socket</span><span class=o>:</span><span class=w> </span><span class=kt>Socket</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-28><a id=__codelineno-27-28 name=__codelineno-27-28></a><a href=#__codelineno-27-28><span class=linenos data-linenos="28 "></span></a><span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;connect&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-29><a id=__codelineno-27-29 name=__codelineno-27-29></a><a href=#__codelineno-27-29><span class=linenos data-linenos="29 "></span></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Connected to </span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span><span id=__span-27-30><a id=__codelineno-27-30 name=__codelineno-27-30></a><a href=#__codelineno-27-30><span class=linenos data-linenos="30 "></span></a><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=nx>notifySubscribers</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:connected`</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>namespace</span><span class=w> </span><span class=p>});</span>
</span><span id=__span-27-31><a id=__codelineno-27-31 name=__codelineno-27-31></a><a href=#__codelineno-27-31><span class=linenos data-linenos="31 "></span></a><span class=w>    </span><span class=p>});</span>
</span><span id=__span-27-32><a id=__codelineno-27-32 name=__codelineno-27-32></a><a href=#__codelineno-27-32><span class=linenos data-linenos="32 "></span></a><span class=w>    </span>
</span><span id=__span-27-33><a id=__codelineno-27-33 name=__codelineno-27-33></a><a href=#__codelineno-27-33><span class=linenos data-linenos="33 "></span></a><span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;disconnect&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>reason</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-34><a id=__codelineno-27-34 name=__codelineno-27-34></a><a href=#__codelineno-27-34><span class=linenos data-linenos="34 "></span></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Disconnected from </span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>reason</span><span class=p>);</span>
</span><span id=__span-27-35><a id=__codelineno-27-35 name=__codelineno-27-35></a><a href=#__codelineno-27-35><span class=linenos data-linenos="35 "></span></a><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=nx>notifySubscribers</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:disconnected`</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=nx>reason</span><span class=w> </span><span class=p>});</span>
</span><span id=__span-27-36><a id=__codelineno-27-36 name=__codelineno-27-36></a><a href=#__codelineno-27-36><span class=linenos data-linenos="36 "></span></a><span class=w>    </span><span class=p>});</span>
</span><span id=__span-27-37><a id=__codelineno-27-37 name=__codelineno-27-37></a><a href=#__codelineno-27-37><span class=linenos data-linenos="37 "></span></a><span class=w>    </span>
</span><span id=__span-27-38><a id=__codelineno-27-38 name=__codelineno-27-38></a><a href=#__codelineno-27-38><span class=linenos data-linenos="38 "></span></a><span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-39><a id=__codelineno-27-39 name=__codelineno-27-39></a><a href=#__codelineno-27-39><span class=linenos data-linenos="39 "></span></a><span class=w>      </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Socket error on </span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
</span><span id=__span-27-40><a id=__codelineno-27-40 name=__codelineno-27-40></a><a href=#__codelineno-27-40><span class=linenos data-linenos="40 "></span></a><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=nx>notifySubscribers</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:error`</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=w> </span><span class=p>});</span>
</span><span id=__span-27-41><a id=__codelineno-27-41 name=__codelineno-27-41></a><a href=#__codelineno-27-41><span class=linenos data-linenos="41 "></span></a><span class=w>    </span><span class=p>});</span>
</span><span id=__span-27-42><a id=__codelineno-27-42 name=__codelineno-27-42></a><a href=#__codelineno-27-42><span class=linenos data-linenos="42 "></span></a><span class=w>    </span>
</span><span id=__span-27-43><a id=__codelineno-27-43 name=__codelineno-27-43></a><a href=#__codelineno-27-43><span class=linenos data-linenos="43 "></span></a><span class=w>    </span><span class=c1>// Forward all events to subscribers</span>
</span><span id=__span-27-44><a id=__codelineno-27-44 name=__codelineno-27-44></a><a href=#__codelineno-27-44><span class=linenos data-linenos="44 "></span></a><span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>onAny</span><span class=p>((</span><span class=nx>event</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-45><a id=__codelineno-27-45 name=__codelineno-27-45></a><a href=#__codelineno-27-45><span class=linenos data-linenos="45 "></span></a><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=nx>notifySubscribers</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:</span><span class=si>${</span><span class=nx>event</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-27-46><a id=__codelineno-27-46 name=__codelineno-27-46></a><a href=#__codelineno-27-46><span class=linenos data-linenos="46 "></span></a><span class=w>    </span><span class=p>});</span>
</span><span id=__span-27-47><a id=__codelineno-27-47 name=__codelineno-27-47></a><a href=#__codelineno-27-47><span class=linenos data-linenos="47 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-27-48><a id=__codelineno-27-48 name=__codelineno-27-48></a><a href=#__codelineno-27-48><span class=linenos data-linenos="48 "></span></a><span class=w>  </span>
</span><span id=__span-27-49><a id=__codelineno-27-49 name=__codelineno-27-49></a><a href=#__codelineno-27-49><span class=linenos data-linenos="49 "></span></a><span class=w>  </span><span class=nx>subscribe</span><span class=p>(</span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>callback</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-50><a id=__codelineno-27-50 name=__codelineno-27-50></a><a href=#__codelineno-27-50><span class=linenos data-linenos="50 "></span></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`</span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:</span><span class=si>${</span><span class=nx>event</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span><span id=__span-27-51><a id=__codelineno-27-51 name=__codelineno-27-51></a><a href=#__codelineno-27-51><span class=linenos data-linenos="51 "></span></a><span class=w>    </span>
</span><span id=__span-27-52><a id=__codelineno-27-52 name=__codelineno-27-52></a><a href=#__codelineno-27-52><span class=linenos data-linenos="52 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>subscriptions</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>key</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-53><a id=__codelineno-27-53 name=__codelineno-27-53></a><a href=#__codelineno-27-53><span class=linenos data-linenos="53 "></span></a><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=nx>subscriptions</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Set</span><span class=p>());</span>
</span><span id=__span-27-54><a id=__codelineno-27-54 name=__codelineno-27-54></a><a href=#__codelineno-27-54><span class=linenos data-linenos="54 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-27-55><a id=__codelineno-27-55 name=__codelineno-27-55></a><a href=#__codelineno-27-55><span class=linenos data-linenos="55 "></span></a><span class=w>    </span>
</span><span id=__span-27-56><a id=__codelineno-27-56 name=__codelineno-27-56></a><a href=#__codelineno-27-56><span class=linenos data-linenos="56 "></span></a><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=nx>subscriptions</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>)</span><span class=o>!</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>callback</span><span class=p>);</span>
</span><span id=__span-27-57><a id=__codelineno-27-57 name=__codelineno-27-57></a><a href=#__codelineno-27-57><span class=linenos data-linenos="57 "></span></a><span class=w>    </span>
</span><span id=__span-27-58><a id=__codelineno-27-58 name=__codelineno-27-58></a><a href=#__codelineno-27-58><span class=linenos data-linenos="58 "></span></a><span class=w>    </span><span class=c1>// Ensure connection exists</span>
</span><span id=__span-27-59><a id=__codelineno-27-59 name=__codelineno-27-59></a><a href=#__codelineno-27-59><span class=linenos data-linenos="59 "></span></a><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=nx>connect</span><span class=p>(</span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-27-60><a id=__codelineno-27-60 name=__codelineno-27-60></a><a href=#__codelineno-27-60><span class=linenos data-linenos="60 "></span></a><span class=w>    </span>
</span><span id=__span-27-61><a id=__codelineno-27-61 name=__codelineno-27-61></a><a href=#__codelineno-27-61><span class=linenos data-linenos="61 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-62><a id=__codelineno-27-62 name=__codelineno-27-62></a><a href=#__codelineno-27-62><span class=linenos data-linenos="62 "></span></a><span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>subscribers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>subscriptions</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span><span id=__span-27-63><a id=__codelineno-27-63 name=__codelineno-27-63></a><a href=#__codelineno-27-63><span class=linenos data-linenos="63 "></span></a><span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>subscribers</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-64><a id=__codelineno-27-64 name=__codelineno-27-64></a><a href=#__codelineno-27-64><span class=linenos data-linenos="64 "></span></a><span class=w>        </span><span class=nx>subscribers</span><span class=p>.</span><span class=ow>delete</span><span class=p>(</span><span class=nx>callback</span><span class=p>);</span>
</span><span id=__span-27-65><a id=__codelineno-27-65 name=__codelineno-27-65></a><a href=#__codelineno-27-65><span class=linenos data-linenos="65 "></span></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>subscribers</span><span class=p>.</span><span class=nx>size</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=mf>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-66><a id=__codelineno-27-66 name=__codelineno-27-66></a><a href=#__codelineno-27-66><span class=linenos data-linenos="66 "></span></a><span class=w>          </span><span class=k>this</span><span class=p>.</span><span class=nx>subscriptions</span><span class=p>.</span><span class=ow>delete</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span><span id=__span-27-67><a id=__codelineno-27-67 name=__codelineno-27-67></a><a href=#__codelineno-27-67><span class=linenos data-linenos="67 "></span></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-27-68><a id=__codelineno-27-68 name=__codelineno-27-68></a><a href=#__codelineno-27-68><span class=linenos data-linenos="68 "></span></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-27-69><a id=__codelineno-27-69 name=__codelineno-27-69></a><a href=#__codelineno-27-69><span class=linenos data-linenos="69 "></span></a><span class=w>    </span><span class=p>};</span>
</span><span id=__span-27-70><a id=__codelineno-27-70 name=__codelineno-27-70></a><a href=#__codelineno-27-70><span class=linenos data-linenos="70 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-27-71><a id=__codelineno-27-71 name=__codelineno-27-71></a><a href=#__codelineno-27-71><span class=linenos data-linenos="71 "></span></a><span class=w>  </span>
</span><span id=__span-27-72><a id=__codelineno-27-72 name=__codelineno-27-72></a><a href=#__codelineno-27-72><span class=linenos data-linenos="72 "></span></a><span class=w>  </span><span class=nx>emit</span><span class=p>(</span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-73><a id=__codelineno-27-73 name=__codelineno-27-73></a><a href=#__codelineno-27-73><span class=linenos data-linenos="73 "></span></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>socket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>connect</span><span class=p>(</span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-27-74><a id=__codelineno-27-74 name=__codelineno-27-74></a><a href=#__codelineno-27-74><span class=linenos data-linenos="74 "></span></a><span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=nx>event</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-27-75><a id=__codelineno-27-75 name=__codelineno-27-75></a><a href=#__codelineno-27-75><span class=linenos data-linenos="75 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-27-76><a id=__codelineno-27-76 name=__codelineno-27-76></a><a href=#__codelineno-27-76><span class=linenos data-linenos="76 "></span></a><span class=w>  </span>
</span><span id=__span-27-77><a id=__codelineno-27-77 name=__codelineno-27-77></a><a href=#__codelineno-27-77><span class=linenos data-linenos="77 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=nx>notifySubscribers</span><span class=p>(</span><span class=nx>key</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-78><a id=__codelineno-27-78 name=__codelineno-27-78></a><a href=#__codelineno-27-78><span class=linenos data-linenos="78 "></span></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>subscribers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>subscriptions</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span><span id=__span-27-79><a id=__codelineno-27-79 name=__codelineno-27-79></a><a href=#__codelineno-27-79><span class=linenos data-linenos="79 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>subscribers</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-80><a id=__codelineno-27-80 name=__codelineno-27-80></a><a href=#__codelineno-27-80><span class=linenos data-linenos="80 "></span></a><span class=w>      </span><span class=nx>subscribers</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>callback</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>callback</span><span class=p>(</span><span class=nx>data</span><span class=p>));</span>
</span><span id=__span-27-81><a id=__codelineno-27-81 name=__codelineno-27-81></a><a href=#__codelineno-27-81><span class=linenos data-linenos="81 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-27-82><a id=__codelineno-27-82 name=__codelineno-27-82></a><a href=#__codelineno-27-82><span class=linenos data-linenos="82 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-27-83><a id=__codelineno-27-83 name=__codelineno-27-83></a><a href=#__codelineno-27-83><span class=linenos data-linenos="83 "></span></a><span class=w>  </span>
</span><span id=__span-27-84><a id=__codelineno-27-84 name=__codelineno-27-84></a><a href=#__codelineno-27-84><span class=linenos data-linenos="84 "></span></a><span class=w>  </span><span class=nx>disconnect</span><span class=p>(</span><span class=nx>namespace?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-85><a id=__codelineno-27-85 name=__codelineno-27-85></a><a href=#__codelineno-27-85><span class=linenos data-linenos="85 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>namespace</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-86><a id=__codelineno-27-86 name=__codelineno-27-86></a><a href=#__codelineno-27-86><span class=linenos data-linenos="86 "></span></a><span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>socket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>sockets</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-27-87><a id=__codelineno-27-87 name=__codelineno-27-87></a><a href=#__codelineno-27-87><span class=linenos data-linenos="87 "></span></a><span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>socket</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-88><a id=__codelineno-27-88 name=__codelineno-27-88></a><a href=#__codelineno-27-88><span class=linenos data-linenos="88 "></span></a><span class=w>        </span><span class=nx>socket</span><span class=p>.</span><span class=nx>disconnect</span><span class=p>();</span>
</span><span id=__span-27-89><a id=__codelineno-27-89 name=__codelineno-27-89></a><a href=#__codelineno-27-89><span class=linenos data-linenos="89 "></span></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=nx>sockets</span><span class=p>.</span><span class=ow>delete</span><span class=p>(</span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-27-90><a id=__codelineno-27-90 name=__codelineno-27-90></a><a href=#__codelineno-27-90><span class=linenos data-linenos="90 "></span></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-27-91><a id=__codelineno-27-91 name=__codelineno-27-91></a><a href=#__codelineno-27-91><span class=linenos data-linenos="91 "></span></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-92><a id=__codelineno-27-92 name=__codelineno-27-92></a><a href=#__codelineno-27-92><span class=linenos data-linenos="92 "></span></a><span class=w>      </span><span class=c1>// Disconnect all</span>
</span><span id=__span-27-93><a id=__codelineno-27-93 name=__codelineno-27-93></a><a href=#__codelineno-27-93><span class=linenos data-linenos="93 "></span></a><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=nx>sockets</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>socket</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>socket</span><span class=p>.</span><span class=nx>disconnect</span><span class=p>());</span>
</span><span id=__span-27-94><a id=__codelineno-27-94 name=__codelineno-27-94></a><a href=#__codelineno-27-94><span class=linenos data-linenos="94 "></span></a><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=nx>sockets</span><span class=p>.</span><span class=nx>clear</span><span class=p>();</span>
</span><span id=__span-27-95><a id=__codelineno-27-95 name=__codelineno-27-95></a><a href=#__codelineno-27-95><span class=linenos data-linenos="95 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-27-96><a id=__codelineno-27-96 name=__codelineno-27-96></a><a href=#__codelineno-27-96><span class=linenos data-linenos="96 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-27-97><a id=__codelineno-27-97 name=__codelineno-27-97></a><a href=#__codelineno-27-97><span class=linenos data-linenos="97 "></span></a><span class=p>}</span>
</span><span id=__span-27-98><a id=__codelineno-27-98 name=__codelineno-27-98></a><a href=#__codelineno-27-98><span class=linenos data-linenos="98 "></span></a>
</span><span id=__span-27-99><a id=__codelineno-27-99 name=__codelineno-27-99></a><a href=#__codelineno-27-99><span class=linenos data-linenos="99 "></span></a><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>wsManager</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WebSocketManager</span><span class=p>();</span>
</span></code></pre></div><h3 id=react-hook-integration>React Hook Integration<a class=headerlink href=#react-hook-integration title="Permanent link">&para;</a></h3><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1></a><a href=#__codelineno-28-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>useWebSocketEvent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&lt;</span><span class=nx>T</span><span class=o>&gt;</span><span class=p>(</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2></a><a href=#__codelineno-28-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3></a><a href=#__codelineno-28-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4></a><a href=#__codelineno-28-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>callback</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>T</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>,</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5></a><a href=#__codelineno-28-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>dependencies</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[]</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6></a><a href=#__codelineno-28-6><span class=linenos data-linenos=" 6 "></span></a><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7></a><a href=#__codelineno-28-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>useEffect</span><span class=p>(()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8></a><a href=#__codelineno-28-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>unsubscribe</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>wsManager</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=nx>event</span><span class=p>,</span><span class=w> </span><span class=nx>callback</span><span class=p>);</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9></a><a href=#__codelineno-28-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>unsubscribe</span><span class=p>;</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10></a><a href=#__codelineno-28-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=p>},</span><span class=w> </span><span class=p>[</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=nx>event</span><span class=p>,</span><span class=w> </span><span class=p>...</span><span class=nx>dependencies</span><span class=p>]);</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11></a><a href=#__codelineno-28-11><span class=linenos data-linenos="11 "></span></a><span class=p>};</span>
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12></a><a href=#__codelineno-28-12><span class=linenos data-linenos="12 "></span></a>
</span><span id=__span-28-13><a id=__codelineno-28-13 name=__codelineno-28-13></a><a href=#__codelineno-28-13><span class=linenos data-linenos="13 "></span></a><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>useProjectWebSocket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nx>projectName</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-14><a id=__codelineno-28-14 name=__codelineno-28-14></a><a href=#__codelineno-28-14><span class=linenos data-linenos="14 "></span></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>connected</span><span class=p>,</span><span class=w> </span><span class=nx>setConnected</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span><span id=__span-28-15><a id=__codelineno-28-15 name=__codelineno-28-15></a><a href=#__codelineno-28-15><span class=linenos data-linenos="15 "></span></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>setError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=o>&lt;</span><span class=kt>string</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>null</span><span class=o>&gt;</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span>
</span><span id=__span-28-16><a id=__codelineno-28-16 name=__codelineno-28-16></a><a href=#__codelineno-28-16><span class=linenos data-linenos="16 "></span></a><span class=w>  </span>
</span><span id=__span-28-17><a id=__codelineno-28-17 name=__codelineno-28-17></a><a href=#__codelineno-28-17><span class=linenos data-linenos="17 "></span></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>namespace</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=sb>`/project/</span><span class=si>${</span><span class=nx>projectName</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span><span id=__span-28-18><a id=__codelineno-28-18 name=__codelineno-28-18></a><a href=#__codelineno-28-18><span class=linenos data-linenos="18 "></span></a><span class=w>  </span>
</span><span id=__span-28-19><a id=__codelineno-28-19 name=__codelineno-28-19></a><a href=#__codelineno-28-19><span class=linenos data-linenos="19 "></span></a><span class=w>  </span><span class=nx>useWebSocketEvent</span><span class=p>(</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;connected&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setConnected</span><span class=p>(</span><span class=kc>true</span><span class=p>));</span>
</span><span id=__span-28-20><a id=__codelineno-28-20 name=__codelineno-28-20></a><a href=#__codelineno-28-20><span class=linenos data-linenos="20 "></span></a><span class=w>  </span><span class=nx>useWebSocketEvent</span><span class=p>(</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;disconnected&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setConnected</span><span class=p>(</span><span class=kc>false</span><span class=p>));</span>
</span><span id=__span-28-21><a id=__codelineno-28-21 name=__codelineno-28-21></a><a href=#__codelineno-28-21><span class=linenos data-linenos="21 "></span></a><span class=w>  </span><span class=nx>useWebSocketEvent</span><span class=p>(</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;error&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setError</span><span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>));</span>
</span><span id=__span-28-22><a id=__codelineno-28-22 name=__codelineno-28-22></a><a href=#__codelineno-28-22><span class=linenos data-linenos="22 "></span></a><span class=w>  </span>
</span><span id=__span-28-23><a id=__codelineno-28-23 name=__codelineno-28-23></a><a href=#__codelineno-28-23><span class=linenos data-linenos="23 "></span></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>joinProject</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useCallback</span><span class=p>(()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-24><a id=__codelineno-28-24 name=__codelineno-28-24></a><a href=#__codelineno-28-24><span class=linenos data-linenos="24 "></span></a><span class=w>    </span><span class=nx>wsManager</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;join_project&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>projectName</span><span class=w> </span><span class=p>});</span>
</span><span id=__span-28-25><a id=__codelineno-28-25 name=__codelineno-28-25></a><a href=#__codelineno-28-25><span class=linenos data-linenos="25 "></span></a><span class=w>  </span><span class=p>},</span><span class=w> </span><span class=p>[</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=nx>projectName</span><span class=p>]);</span>
</span><span id=__span-28-26><a id=__codelineno-28-26 name=__codelineno-28-26></a><a href=#__codelineno-28-26><span class=linenos data-linenos="26 "></span></a><span class=w>  </span>
</span><span id=__span-28-27><a id=__codelineno-28-27 name=__codelineno-28-27></a><a href=#__codelineno-28-27><span class=linenos data-linenos="27 "></span></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>leaveProject</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useCallback</span><span class=p>(()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-28><a id=__codelineno-28-28 name=__codelineno-28-28></a><a href=#__codelineno-28-28><span class=linenos data-linenos="28 "></span></a><span class=w>    </span><span class=nx>wsManager</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;leave_project&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>project_name</span><span class=o>:</span><span class=w> </span><span class=kt>projectName</span><span class=w> </span><span class=p>});</span>
</span><span id=__span-28-29><a id=__codelineno-28-29 name=__codelineno-28-29></a><a href=#__codelineno-28-29><span class=linenos data-linenos="29 "></span></a><span class=w>  </span><span class=p>},</span><span class=w> </span><span class=p>[</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=nx>projectName</span><span class=p>]);</span>
</span><span id=__span-28-30><a id=__codelineno-28-30 name=__codelineno-28-30></a><a href=#__codelineno-28-30><span class=linenos data-linenos="30 "></span></a><span class=w>  </span>
</span><span id=__span-28-31><a id=__codelineno-28-31 name=__codelineno-28-31></a><a href=#__codelineno-28-31><span class=linenos data-linenos="31 "></span></a><span class=w>  </span><span class=nx>useEffect</span><span class=p>(()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-32><a id=__codelineno-28-32 name=__codelineno-28-32></a><a href=#__codelineno-28-32><span class=linenos data-linenos="32 "></span></a><span class=w>    </span><span class=nx>joinProject</span><span class=p>();</span>
</span><span id=__span-28-33><a id=__codelineno-28-33 name=__codelineno-28-33></a><a href=#__codelineno-28-33><span class=linenos data-linenos="33 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>leaveProject</span><span class=p>();</span>
</span><span id=__span-28-34><a id=__codelineno-28-34 name=__codelineno-28-34></a><a href=#__codelineno-28-34><span class=linenos data-linenos="34 "></span></a><span class=w>  </span><span class=p>},</span><span class=w> </span><span class=p>[</span><span class=nx>joinProject</span><span class=p>,</span><span class=w> </span><span class=nx>leaveProject</span><span class=p>]);</span>
</span><span id=__span-28-35><a id=__codelineno-28-35 name=__codelineno-28-35></a><a href=#__codelineno-28-35><span class=linenos data-linenos="35 "></span></a><span class=w>  </span>
</span><span id=__span-28-36><a id=__codelineno-28-36 name=__codelineno-28-36></a><a href=#__codelineno-28-36><span class=linenos data-linenos="36 "></span></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-37><a id=__codelineno-28-37 name=__codelineno-28-37></a><a href=#__codelineno-28-37><span class=linenos data-linenos="37 "></span></a><span class=w>    </span><span class=nx>connected</span><span class=p>,</span>
</span><span id=__span-28-38><a id=__codelineno-28-38 name=__codelineno-28-38></a><a href=#__codelineno-28-38><span class=linenos data-linenos="38 "></span></a><span class=w>    </span><span class=nx>error</span><span class=p>,</span>
</span><span id=__span-28-39><a id=__codelineno-28-39 name=__codelineno-28-39></a><a href=#__codelineno-28-39><span class=linenos data-linenos="39 "></span></a><span class=w>    </span><span class=nx>emit</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>wsManager</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=nx>event</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>),</span>
</span><span id=__span-28-40><a id=__codelineno-28-40 name=__codelineno-28-40></a><a href=#__codelineno-28-40><span class=linenos data-linenos="40 "></span></a><span class=w>  </span><span class=p>};</span>
</span><span id=__span-28-41><a id=__codelineno-28-41 name=__codelineno-28-41></a><a href=#__codelineno-28-41><span class=linenos data-linenos="41 "></span></a><span class=p>};</span>
</span></code></pre></div><h2 id=error-handling-and-reconnection>Error Handling and Reconnection<a class=headerlink href=#error-handling-and-reconnection title="Permanent link">&para;</a></h2><h3 id=error-types-and-handling>Error Types and Handling<a class=headerlink href=#error-types-and-handling title="Permanent link">&para;</a></h3><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1></a><a href=#__codelineno-29-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>WebSocketError</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2></a><a href=#__codelineno-29-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;connection&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;authentication&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;validation&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;server&#39;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s1>&#39;network&#39;</span><span class=p>;</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3></a><a href=#__codelineno-29-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4></a><a href=#__codelineno-29-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>code?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5></a><a href=#__codelineno-29-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>details?</span><span class=o>:</span><span class=w> </span><span class=kt>any</span><span class=p>;</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6></a><a href=#__codelineno-29-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>timestamp</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7></a><a href=#__codelineno-29-7><span class=linenos data-linenos=" 7 "></span></a><span class=p>}</span>
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8></a><a href=#__codelineno-29-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9></a><a href=#__codelineno-29-9><span class=linenos data-linenos=" 9 "></span></a><span class=kd>class</span><span class=w> </span><span class=nx>WebSocketErrorHandler</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-10><a id=__codelineno-29-10 name=__codelineno-29-10></a><a href=#__codelineno-29-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=k>static</span><span class=w> </span><span class=nx>handle</span><span class=p>(</span><span class=nx>error</span><span class=o>:</span><span class=w> </span><span class=kt>WebSocketError</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-11><a id=__codelineno-29-11 name=__codelineno-29-11></a><a href=#__codelineno-29-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=kr>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-12><a id=__codelineno-29-12 name=__codelineno-29-12></a><a href=#__codelineno-29-12><span class=linenos data-linenos="12 "></span></a><span class=w>      </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;connection&#39;</span><span class=o>:</span>
</span><span id=__span-29-13><a id=__codelineno-29-13 name=__codelineno-29-13></a><a href=#__codelineno-29-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=nx>handleConnectionError</span><span class=p>(</span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-29-14><a id=__codelineno-29-14 name=__codelineno-29-14></a><a href=#__codelineno-29-14><span class=linenos data-linenos="14 "></span></a><span class=w>        </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-29-15><a id=__codelineno-29-15 name=__codelineno-29-15></a><a href=#__codelineno-29-15><span class=linenos data-linenos="15 "></span></a><span class=w>      </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;authentication&#39;</span><span class=o>:</span>
</span><span id=__span-29-16><a id=__codelineno-29-16 name=__codelineno-29-16></a><a href=#__codelineno-29-16><span class=linenos data-linenos="16 "></span></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=nx>handleAuthError</span><span class=p>(</span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-29-17><a id=__codelineno-29-17 name=__codelineno-29-17></a><a href=#__codelineno-29-17><span class=linenos data-linenos="17 "></span></a><span class=w>        </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-29-18><a id=__codelineno-29-18 name=__codelineno-29-18></a><a href=#__codelineno-29-18><span class=linenos data-linenos="18 "></span></a><span class=w>      </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;validation&#39;</span><span class=o>:</span>
</span><span id=__span-29-19><a id=__codelineno-29-19 name=__codelineno-29-19></a><a href=#__codelineno-29-19><span class=linenos data-linenos="19 "></span></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=nx>handleValidationError</span><span class=p>(</span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-29-20><a id=__codelineno-29-20 name=__codelineno-29-20></a><a href=#__codelineno-29-20><span class=linenos data-linenos="20 "></span></a><span class=w>        </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-29-21><a id=__codelineno-29-21 name=__codelineno-29-21></a><a href=#__codelineno-29-21><span class=linenos data-linenos="21 "></span></a><span class=w>      </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;server&#39;</span><span class=o>:</span>
</span><span id=__span-29-22><a id=__codelineno-29-22 name=__codelineno-29-22></a><a href=#__codelineno-29-22><span class=linenos data-linenos="22 "></span></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=nx>handleServerError</span><span class=p>(</span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-29-23><a id=__codelineno-29-23 name=__codelineno-29-23></a><a href=#__codelineno-29-23><span class=linenos data-linenos="23 "></span></a><span class=w>        </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-29-24><a id=__codelineno-29-24 name=__codelineno-29-24></a><a href=#__codelineno-29-24><span class=linenos data-linenos="24 "></span></a><span class=w>      </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;network&#39;</span><span class=o>:</span>
</span><span id=__span-29-25><a id=__codelineno-29-25 name=__codelineno-29-25></a><a href=#__codelineno-29-25><span class=linenos data-linenos="25 "></span></a><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=nx>handleNetworkError</span><span class=p>(</span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-29-26><a id=__codelineno-29-26 name=__codelineno-29-26></a><a href=#__codelineno-29-26><span class=linenos data-linenos="26 "></span></a><span class=w>        </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-29-27><a id=__codelineno-29-27 name=__codelineno-29-27></a><a href=#__codelineno-29-27><span class=linenos data-linenos="27 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-29-28><a id=__codelineno-29-28 name=__codelineno-29-28></a><a href=#__codelineno-29-28><span class=linenos data-linenos="28 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-29-29><a id=__codelineno-29-29 name=__codelineno-29-29></a><a href=#__codelineno-29-29><span class=linenos data-linenos="29 "></span></a><span class=w>  </span>
</span><span id=__span-29-30><a id=__codelineno-29-30 name=__codelineno-29-30></a><a href=#__codelineno-29-30><span class=linenos data-linenos="30 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=k>static</span><span class=w> </span><span class=nx>handleConnectionError</span><span class=p>(</span><span class=nx>error</span><span class=o>:</span><span class=w> </span><span class=kt>WebSocketError</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-31><a id=__codelineno-29-31 name=__codelineno-29-31></a><a href=#__codelineno-29-31><span class=linenos data-linenos="31 "></span></a><span class=w>    </span><span class=c1>// Show connection status indicator</span>
</span><span id=__span-29-32><a id=__codelineno-29-32 name=__codelineno-29-32></a><a href=#__codelineno-29-32><span class=linenos data-linenos="32 "></span></a><span class=w>    </span><span class=c1>// Attempt automatic reconnection</span>
</span><span id=__span-29-33><a id=__codelineno-29-33 name=__codelineno-29-33></a><a href=#__codelineno-29-33><span class=linenos data-linenos="33 "></span></a><span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>warn</span><span class=p>(</span><span class=sb>`Connection error on </span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
</span><span id=__span-29-34><a id=__codelineno-29-34 name=__codelineno-29-34></a><a href=#__codelineno-29-34><span class=linenos data-linenos="34 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-29-35><a id=__codelineno-29-35 name=__codelineno-29-35></a><a href=#__codelineno-29-35><span class=linenos data-linenos="35 "></span></a><span class=w>  </span>
</span><span id=__span-29-36><a id=__codelineno-29-36 name=__codelineno-29-36></a><a href=#__codelineno-29-36><span class=linenos data-linenos="36 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=k>static</span><span class=w> </span><span class=nx>handleAuthError</span><span class=p>(</span><span class=nx>error</span><span class=o>:</span><span class=w> </span><span class=kt>WebSocketError</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-37><a id=__codelineno-29-37 name=__codelineno-29-37></a><a href=#__codelineno-29-37><span class=linenos data-linenos="37 "></span></a><span class=w>    </span><span class=c1>// Redirect to login or show auth modal</span>
</span><span id=__span-29-38><a id=__codelineno-29-38 name=__codelineno-29-38></a><a href=#__codelineno-29-38><span class=linenos data-linenos="38 "></span></a><span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Authentication error on </span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
</span><span id=__span-29-39><a id=__codelineno-29-39 name=__codelineno-29-39></a><a href=#__codelineno-29-39><span class=linenos data-linenos="39 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-29-40><a id=__codelineno-29-40 name=__codelineno-29-40></a><a href=#__codelineno-29-40><span class=linenos data-linenos="40 "></span></a><span class=w>  </span>
</span><span id=__span-29-41><a id=__codelineno-29-41 name=__codelineno-29-41></a><a href=#__codelineno-29-41><span class=linenos data-linenos="41 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=k>static</span><span class=w> </span><span class=nx>handleValidationError</span><span class=p>(</span><span class=nx>error</span><span class=o>:</span><span class=w> </span><span class=kt>WebSocketError</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-42><a id=__codelineno-29-42 name=__codelineno-29-42></a><a href=#__codelineno-29-42><span class=linenos data-linenos="42 "></span></a><span class=w>    </span><span class=c1>// Show validation error to user</span>
</span><span id=__span-29-43><a id=__codelineno-29-43 name=__codelineno-29-43></a><a href=#__codelineno-29-43><span class=linenos data-linenos="43 "></span></a><span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Validation error on </span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
</span><span id=__span-29-44><a id=__codelineno-29-44 name=__codelineno-29-44></a><a href=#__codelineno-29-44><span class=linenos data-linenos="44 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-29-45><a id=__codelineno-29-45 name=__codelineno-29-45></a><a href=#__codelineno-29-45><span class=linenos data-linenos="45 "></span></a><span class=w>  </span>
</span><span id=__span-29-46><a id=__codelineno-29-46 name=__codelineno-29-46></a><a href=#__codelineno-29-46><span class=linenos data-linenos="46 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=k>static</span><span class=w> </span><span class=nx>handleServerError</span><span class=p>(</span><span class=nx>error</span><span class=o>:</span><span class=w> </span><span class=kt>WebSocketError</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-47><a id=__codelineno-29-47 name=__codelineno-29-47></a><a href=#__codelineno-29-47><span class=linenos data-linenos="47 "></span></a><span class=w>    </span><span class=c1>// Show server error notification</span>
</span><span id=__span-29-48><a id=__codelineno-29-48 name=__codelineno-29-48></a><a href=#__codelineno-29-48><span class=linenos data-linenos="48 "></span></a><span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Server error on </span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
</span><span id=__span-29-49><a id=__codelineno-29-49 name=__codelineno-29-49></a><a href=#__codelineno-29-49><span class=linenos data-linenos="49 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-29-50><a id=__codelineno-29-50 name=__codelineno-29-50></a><a href=#__codelineno-29-50><span class=linenos data-linenos="50 "></span></a><span class=w>  </span>
</span><span id=__span-29-51><a id=__codelineno-29-51 name=__codelineno-29-51></a><a href=#__codelineno-29-51><span class=linenos data-linenos="51 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=k>static</span><span class=w> </span><span class=nx>handleNetworkError</span><span class=p>(</span><span class=nx>error</span><span class=o>:</span><span class=w> </span><span class=kt>WebSocketError</span><span class=p>,</span><span class=w> </span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-52><a id=__codelineno-29-52 name=__codelineno-29-52></a><a href=#__codelineno-29-52><span class=linenos data-linenos="52 "></span></a><span class=w>    </span><span class=c1>// Show network connectivity indicator</span>
</span><span id=__span-29-53><a id=__codelineno-29-53 name=__codelineno-29-53></a><a href=#__codelineno-29-53><span class=linenos data-linenos="53 "></span></a><span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>warn</span><span class=p>(</span><span class=sb>`Network error on </span><span class=si>${</span><span class=nx>namespace</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
</span><span id=__span-29-54><a id=__codelineno-29-54 name=__codelineno-29-54></a><a href=#__codelineno-29-54><span class=linenos data-linenos="54 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-29-55><a id=__codelineno-29-55 name=__codelineno-29-55></a><a href=#__codelineno-29-55><span class=linenos data-linenos="55 "></span></a><span class=p>}</span>
</span></code></pre></div><h3 id=reconnection-strategy>Reconnection Strategy<a class=headerlink href=#reconnection-strategy title="Permanent link">&para;</a></h3><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1></a><a href=#__codelineno-30-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>ReconnectionConfig</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2></a><a href=#__codelineno-30-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>maxAttempts</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3></a><a href=#__codelineno-30-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>baseDelay</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4></a><a href=#__codelineno-30-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>maxDelay</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5></a><a href=#__codelineno-30-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>backoffFactor</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6></a><a href=#__codelineno-30-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>jitter</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7></a><a href=#__codelineno-30-7><span class=linenos data-linenos=" 7 "></span></a><span class=p>}</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8></a><a href=#__codelineno-30-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9></a><a href=#__codelineno-30-9><span class=linenos data-linenos=" 9 "></span></a><span class=kd>class</span><span class=w> </span><span class=nx>ReconnectionManager</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10></a><a href=#__codelineno-30-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=nx>config</span><span class=o>:</span><span class=w> </span><span class=kt>ReconnectionConfig</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11></a><a href=#__codelineno-30-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=nx>maxAttempts</span><span class=o>:</span><span class=w> </span><span class=kt>5</span><span class=p>,</span>
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12></a><a href=#__codelineno-30-12><span class=linenos data-linenos="12 "></span></a><span class=w>    </span><span class=nx>baseDelay</span><span class=o>:</span><span class=w> </span><span class=kt>1000</span><span class=p>,</span>
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13></a><a href=#__codelineno-30-13><span class=linenos data-linenos="13 "></span></a><span class=w>    </span><span class=nx>maxDelay</span><span class=o>:</span><span class=w> </span><span class=kt>30000</span><span class=p>,</span>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14></a><a href=#__codelineno-30-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=nx>backoffFactor</span><span class=o>:</span><span class=w> </span><span class=kt>2</span><span class=p>,</span>
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15></a><a href=#__codelineno-30-15><span class=linenos data-linenos="15 "></span></a><span class=w>    </span><span class=nx>jitter</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=p>,</span>
</span><span id=__span-30-16><a id=__codelineno-30-16 name=__codelineno-30-16></a><a href=#__codelineno-30-16><span class=linenos data-linenos="16 "></span></a><span class=w>  </span><span class=p>};</span>
</span><span id=__span-30-17><a id=__codelineno-30-17 name=__codelineno-30-17></a><a href=#__codelineno-30-17><span class=linenos data-linenos="17 "></span></a><span class=w>  </span>
</span><span id=__span-30-18><a id=__codelineno-30-18 name=__codelineno-30-18></a><a href=#__codelineno-30-18><span class=linenos data-linenos="18 "></span></a><span class=w>  </span><span class=k>private</span><span class=w> </span><span class=nx>attemptCounts</span><span class=o>:</span><span class=w> </span><span class=kt>Map</span><span class=o>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=kt>number</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Map</span><span class=p>();</span>
</span><span id=__span-30-19><a id=__codelineno-30-19 name=__codelineno-30-19></a><a href=#__codelineno-30-19><span class=linenos data-linenos="19 "></span></a><span class=w>  </span>
</span><span id=__span-30-20><a id=__codelineno-30-20 name=__codelineno-30-20></a><a href=#__codelineno-30-20><span class=linenos data-linenos="20 "></span></a><span class=w>  </span><span class=nx>calculateDelay</span><span class=p>(</span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-21><a id=__codelineno-30-21 name=__codelineno-30-21></a><a href=#__codelineno-30-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>attempts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>attemptCounts</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>namespace</span><span class=p>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
</span><span id=__span-30-22><a id=__codelineno-30-22 name=__codelineno-30-22></a><a href=#__codelineno-30-22><span class=linenos data-linenos="22 "></span></a><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>delay</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>min</span><span class=p>(</span>
</span><span id=__span-30-23><a id=__codelineno-30-23 name=__codelineno-30-23></a><a href=#__codelineno-30-23><span class=linenos data-linenos="23 "></span></a><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>baseDelay</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>pow</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>backoffFactor</span><span class=p>,</span><span class=w> </span><span class=nx>attempts</span><span class=p>),</span>
</span><span id=__span-30-24><a id=__codelineno-30-24 name=__codelineno-30-24></a><a href=#__codelineno-30-24><span class=linenos data-linenos="24 "></span></a><span class=w>      </span><span class=k>this</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>maxDelay</span>
</span><span id=__span-30-25><a id=__codelineno-30-25 name=__codelineno-30-25></a><a href=#__codelineno-30-25><span class=linenos data-linenos="25 "></span></a><span class=w>    </span><span class=p>);</span>
</span><span id=__span-30-26><a id=__codelineno-30-26 name=__codelineno-30-26></a><a href=#__codelineno-30-26><span class=linenos data-linenos="26 "></span></a><span class=w>    </span>
</span><span id=__span-30-27><a id=__codelineno-30-27 name=__codelineno-30-27></a><a href=#__codelineno-30-27><span class=linenos data-linenos="27 "></span></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>jitter</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-28><a id=__codelineno-30-28 name=__codelineno-30-28></a><a href=#__codelineno-30-28><span class=linenos data-linenos="28 "></span></a><span class=w>      </span><span class=nx>delay</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>delay</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>0.5</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>0.5</span><span class=p>);</span>
</span><span id=__span-30-29><a id=__codelineno-30-29 name=__codelineno-30-29></a><a href=#__codelineno-30-29><span class=linenos data-linenos="29 "></span></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-30-30><a id=__codelineno-30-30 name=__codelineno-30-30></a><a href=#__codelineno-30-30><span class=linenos data-linenos="30 "></span></a><span class=w>    </span>
</span><span id=__span-30-31><a id=__codelineno-30-31 name=__codelineno-30-31></a><a href=#__codelineno-30-31><span class=linenos data-linenos="31 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>delay</span><span class=p>;</span>
</span><span id=__span-30-32><a id=__codelineno-30-32 name=__codelineno-30-32></a><a href=#__codelineno-30-32><span class=linenos data-linenos="32 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-30-33><a id=__codelineno-30-33 name=__codelineno-30-33></a><a href=#__codelineno-30-33><span class=linenos data-linenos="33 "></span></a><span class=w>  </span>
</span><span id=__span-30-34><a id=__codelineno-30-34 name=__codelineno-30-34></a><a href=#__codelineno-30-34><span class=linenos data-linenos="34 "></span></a><span class=w>  </span><span class=nx>shouldReconnect</span><span class=p>(</span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-35><a id=__codelineno-30-35 name=__codelineno-30-35></a><a href=#__codelineno-30-35><span class=linenos data-linenos="35 "></span></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>attempts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>attemptCounts</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>namespace</span><span class=p>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
</span><span id=__span-30-36><a id=__codelineno-30-36 name=__codelineno-30-36></a><a href=#__codelineno-30-36><span class=linenos data-linenos="36 "></span></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>attempts</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>maxAttempts</span><span class=p>;</span>
</span><span id=__span-30-37><a id=__codelineno-30-37 name=__codelineno-30-37></a><a href=#__codelineno-30-37><span class=linenos data-linenos="37 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-30-38><a id=__codelineno-30-38 name=__codelineno-30-38></a><a href=#__codelineno-30-38><span class=linenos data-linenos="38 "></span></a><span class=w>  </span>
</span><span id=__span-30-39><a id=__codelineno-30-39 name=__codelineno-30-39></a><a href=#__codelineno-30-39><span class=linenos data-linenos="39 "></span></a><span class=w>  </span><span class=nx>recordAttempt</span><span class=p>(</span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-40><a id=__codelineno-30-40 name=__codelineno-30-40></a><a href=#__codelineno-30-40><span class=linenos data-linenos="40 "></span></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>current</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>attemptCounts</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>namespace</span><span class=p>)</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
</span><span id=__span-30-41><a id=__codelineno-30-41 name=__codelineno-30-41></a><a href=#__codelineno-30-41><span class=linenos data-linenos="41 "></span></a><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=nx>attemptCounts</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>namespace</span><span class=p>,</span><span class=w> </span><span class=nx>current</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=p>);</span>
</span><span id=__span-30-42><a id=__codelineno-30-42 name=__codelineno-30-42></a><a href=#__codelineno-30-42><span class=linenos data-linenos="42 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-30-43><a id=__codelineno-30-43 name=__codelineno-30-43></a><a href=#__codelineno-30-43><span class=linenos data-linenos="43 "></span></a><span class=w>  </span>
</span><span id=__span-30-44><a id=__codelineno-30-44 name=__codelineno-30-44></a><a href=#__codelineno-30-44><span class=linenos data-linenos="44 "></span></a><span class=w>  </span><span class=nx>resetAttempts</span><span class=p>(</span><span class=nx>namespace</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-45><a id=__codelineno-30-45 name=__codelineno-30-45></a><a href=#__codelineno-30-45><span class=linenos data-linenos="45 "></span></a><span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=nx>attemptCounts</span><span class=p>.</span><span class=ow>delete</span><span class=p>(</span><span class=nx>namespace</span><span class=p>);</span>
</span><span id=__span-30-46><a id=__codelineno-30-46 name=__codelineno-30-46></a><a href=#__codelineno-30-46><span class=linenos data-linenos="46 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-30-47><a id=__codelineno-30-47 name=__codelineno-30-47></a><a href=#__codelineno-30-47><span class=linenos data-linenos="47 "></span></a><span class=p>}</span>
</span></code></pre></div><h2 id=security-considerations>Security Considerations<a class=headerlink href=#security-considerations title="Permanent link">&para;</a></h2><h3 id=authentication-and-authorization>Authentication and Authorization<a class=headerlink href=#authentication-and-authorization title="Permanent link">&para;</a></h3><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1></a><a href=#__codelineno-31-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>WebSocketAuth</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2></a><a href=#__codelineno-31-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>token</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3></a><a href=#__codelineno-31-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>user_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4></a><a href=#__codelineno-31-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>permissions</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[];</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5></a><a href=#__codelineno-31-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>project_access</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[];</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6></a><a href=#__codelineno-31-6><span class=linenos data-linenos=" 6 "></span></a><span class=p>}</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7></a><a href=#__codelineno-31-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8></a><a href=#__codelineno-31-8><span class=linenos data-linenos=" 8 "></span></a><span class=c1>// Client-side authentication</span>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9></a><a href=#__codelineno-31-9><span class=linenos data-linenos=" 9 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;connect&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10></a><a href=#__codelineno-31-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;authenticate&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11></a><a href=#__codelineno-31-11><span class=linenos data-linenos="11 "></span></a><span class=w>    </span><span class=nx>token</span><span class=o>:</span><span class=w> </span><span class=kt>getAuthToken</span><span class=p>(),</span>
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12></a><a href=#__codelineno-31-12><span class=linenos data-linenos="12 "></span></a><span class=w>    </span><span class=nx>user_id</span><span class=o>:</span><span class=w> </span><span class=kt>getCurrentUserId</span><span class=p>(),</span>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13></a><a href=#__codelineno-31-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=p>});</span>
</span><span id=__span-31-14><a id=__codelineno-31-14 name=__codelineno-31-14></a><a href=#__codelineno-31-14><span class=linenos data-linenos="14 "></span></a><span class=p>});</span>
</span><span id=__span-31-15><a id=__codelineno-31-15 name=__codelineno-31-15></a><a href=#__codelineno-31-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-31-16><a id=__codelineno-31-16 name=__codelineno-31-16></a><a href=#__codelineno-31-16><span class=linenos data-linenos="16 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;authenticated&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>user_id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w> </span><span class=nx>permissions</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>[]</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-31-17><a id=__codelineno-31-17 name=__codelineno-31-17></a><a href=#__codelineno-31-17><span class=linenos data-linenos="17 "></span></a><span class=w>  </span><span class=c1>// Authentication successful</span>
</span><span id=__span-31-18><a id=__codelineno-31-18 name=__codelineno-31-18></a><a href=#__codelineno-31-18><span class=linenos data-linenos="18 "></span></a><span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;WebSocket authenticated:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-31-19><a id=__codelineno-31-19 name=__codelineno-31-19></a><a href=#__codelineno-31-19><span class=linenos data-linenos="19 "></span></a><span class=p>});</span>
</span><span id=__span-31-20><a id=__codelineno-31-20 name=__codelineno-31-20></a><a href=#__codelineno-31-20><span class=linenos data-linenos="20 "></span></a>
</span><span id=__span-31-21><a id=__codelineno-31-21 name=__codelineno-31-21></a><a href=#__codelineno-31-21><span class=linenos data-linenos="21 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;authentication_failed&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=o>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w> </span><span class=nx>code</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-31-22><a id=__codelineno-31-22 name=__codelineno-31-22></a><a href=#__codelineno-31-22><span class=linenos data-linenos="22 "></span></a><span class=w>  </span><span class=c1>// Handle authentication failure</span>
</span><span id=__span-31-23><a id=__codelineno-31-23 name=__codelineno-31-23></a><a href=#__codelineno-31-23><span class=linenos data-linenos="23 "></span></a><span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;WebSocket authentication failed:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
</span><span id=__span-31-24><a id=__codelineno-31-24 name=__codelineno-31-24></a><a href=#__codelineno-31-24><span class=linenos data-linenos="24 "></span></a><span class=w>  </span><span class=c1>// Redirect to login or show error</span>
</span><span id=__span-31-25><a id=__codelineno-31-25 name=__codelineno-31-25></a><a href=#__codelineno-31-25><span class=linenos data-linenos="25 "></span></a><span class=p>});</span>
</span></code></pre></div><h3 id=rate-limiting-and-abuse-prevention>Rate Limiting and Abuse Prevention<a class=headerlink href=#rate-limiting-and-abuse-prevention title="Permanent link">&para;</a></h3><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1></a><a href=#__codelineno-32-1><span class=linenos data-linenos=" 1 "></span></a><span class=kd>interface</span><span class=w> </span><span class=nx>RateLimitConfig</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2></a><a href=#__codelineno-32-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nx>maxEventsPerSecond</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3></a><a href=#__codelineno-32-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nx>maxEventsPerMinute</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4></a><a href=#__codelineno-32-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>maxConcurrentConnections</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5></a><a href=#__codelineno-32-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=nx>banDuration</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6></a><a href=#__codelineno-32-6><span class=linenos data-linenos=" 6 "></span></a><span class=p>}</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7></a><a href=#__codelineno-32-7><span class=linenos data-linenos=" 7 "></span></a>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8></a><a href=#__codelineno-32-8><span class=linenos data-linenos=" 8 "></span></a><span class=c1>// Server-side rate limiting (pseudo-code)</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9></a><a href=#__codelineno-32-9><span class=linenos data-linenos=" 9 "></span></a><span class=kd>const</span><span class=w> </span><span class=nx>rateLimiter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>RateLimiter</span><span class=p>({</span>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10></a><a href=#__codelineno-32-10><span class=linenos data-linenos="10 "></span></a><span class=w>  </span><span class=nx>maxEventsPerSecond</span><span class=o>:</span><span class=w> </span><span class=kt>10</span><span class=p>,</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11></a><a href=#__codelineno-32-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=nx>maxEventsPerMinute</span><span class=o>:</span><span class=w> </span><span class=kt>100</span><span class=p>,</span>
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12></a><a href=#__codelineno-32-12><span class=linenos data-linenos="12 "></span></a><span class=w>  </span><span class=nx>maxConcurrentConnections</span><span class=o>:</span><span class=w> </span><span class=kt>5</span><span class=p>,</span>
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13></a><a href=#__codelineno-32-13><span class=linenos data-linenos="13 "></span></a><span class=w>  </span><span class=nx>banDuration</span><span class=o>:</span><span class=w> </span><span class=kt>300000</span><span class=p>,</span><span class=w> </span><span class=c1>// 5 minutes</span>
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14></a><a href=#__codelineno-32-14><span class=linenos data-linenos="14 "></span></a><span class=p>});</span>
</span><span id=__span-32-15><a id=__codelineno-32-15 name=__codelineno-32-15></a><a href=#__codelineno-32-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-32-16><a id=__codelineno-32-16 name=__codelineno-32-16></a><a href=#__codelineno-32-16><span class=linenos data-linenos="16 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;*&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-17><a id=__codelineno-32-17 name=__codelineno-32-17></a><a href=#__codelineno-32-17><span class=linenos data-linenos="17 "></span></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nx>rateLimiter</span><span class=p>.</span><span class=nx>allow</span><span class=p>(</span><span class=nx>socket</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>event</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-18><a id=__codelineno-32-18 name=__codelineno-32-18></a><a href=#__codelineno-32-18><span class=linenos data-linenos="18 "></span></a><span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;rate_limited&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-19><a id=__codelineno-32-19 name=__codelineno-32-19></a><a href=#__codelineno-32-19><span class=linenos data-linenos="19 "></span></a><span class=w>      </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;Rate limit exceeded&#39;</span><span class=p>,</span>
</span><span id=__span-32-20><a id=__codelineno-32-20 name=__codelineno-32-20></a><a href=#__codelineno-32-20><span class=linenos data-linenos="20 "></span></a><span class=w>      </span><span class=nx>retry_after</span><span class=o>:</span><span class=w> </span><span class=kt>rateLimiter.getRetryAfter</span><span class=p>(</span><span class=nx>socket</span><span class=p>.</span><span class=nx>id</span><span class=p>),</span>
</span><span id=__span-32-21><a id=__codelineno-32-21 name=__codelineno-32-21></a><a href=#__codelineno-32-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=p>});</span>
</span><span id=__span-32-22><a id=__codelineno-32-22 name=__codelineno-32-22></a><a href=#__codelineno-32-22><span class=linenos data-linenos="22 "></span></a><span class=w>    </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-32-23><a id=__codelineno-32-23 name=__codelineno-32-23></a><a href=#__codelineno-32-23><span class=linenos data-linenos="23 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-32-24><a id=__codelineno-32-24 name=__codelineno-32-24></a><a href=#__codelineno-32-24><span class=linenos data-linenos="24 "></span></a><span class=w>  </span>
</span><span id=__span-32-25><a id=__codelineno-32-25 name=__codelineno-32-25></a><a href=#__codelineno-32-25><span class=linenos data-linenos="25 "></span></a><span class=w>  </span><span class=c1>// Process event normally</span>
</span><span id=__span-32-26><a id=__codelineno-32-26 name=__codelineno-32-26></a><a href=#__codelineno-32-26><span class=linenos data-linenos="26 "></span></a><span class=p>});</span>
</span></code></pre></div><h3 id=input-validation-and-sanitization>Input Validation and Sanitization<a class=headerlink href=#input-validation-and-sanitization title="Permanent link">&para;</a></h3><div class="language-typescript highlight"><span class=filename>TypeScript</span><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1></a><a href=#__codelineno-33-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>import</span><span class=w> </span><span class=nx>Joi</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;joi&#39;</span><span class=p>;</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2></a><a href=#__codelineno-33-2><span class=linenos data-linenos=" 2 "></span></a>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3></a><a href=#__codelineno-33-3><span class=linenos data-linenos=" 3 "></span></a><span class=kd>const</span><span class=w> </span><span class=nx>messageSchema</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>Joi</span><span class=p>.</span><span class=nx>object</span><span class=p>({</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4></a><a href=#__codelineno-33-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nx>content</span><span class=o>:</span><span class=w> </span><span class=kt>Joi.string</span><span class=p>().</span><span class=nx>max</span><span class=p>(</span><span class=mf>2000</span><span class=p>).</span><span class=nx>required</span><span class=p>(),</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5></a><a href=#__codelineno-33-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>  </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=nx>Joi</span><span class=p>.</span><span class=kt>string</span><span class=p>().</span><span class=nx>valid</span><span class=p>(</span><span class=s1>&#39;command&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;message&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;thread_reply&#39;</span><span class=p>).</span><span class=nx>required</span><span class=p>(),</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6></a><a href=#__codelineno-33-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>  </span><span class=nx>thread_id</span><span class=o>:</span><span class=w> </span><span class=kt>Joi.string</span><span class=p>().</span><span class=nx>uuid</span><span class=p>().</span><span class=nx>optional</span><span class=p>(),</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7></a><a href=#__codelineno-33-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>  </span><span class=nx>attachments</span><span class=o>:</span><span class=w> </span><span class=kt>Joi.array</span><span class=p>().</span><span class=nx>items</span><span class=p>(</span><span class=nx>Joi</span><span class=p>.</span><span class=nx>object</span><span class=p>({</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8></a><a href=#__codelineno-33-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>Joi.string</span><span class=p>().</span><span class=nx>required</span><span class=p>(),</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9></a><a href=#__codelineno-33-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>    </span><span class=nx>size</span><span class=o>:</span><span class=w> </span><span class=kt>Joi.number</span><span class=p>().</span><span class=nx>max</span><span class=p>(</span><span class=mf>10485760</span><span class=p>).</span><span class=nx>required</span><span class=p>(),</span><span class=w> </span><span class=c1>// 10MB max</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10></a><a href=#__codelineno-33-10><span class=linenos data-linenos="10 "></span></a><span class=w>    </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=nx>Joi</span><span class=p>.</span><span class=kt>string</span><span class=p>().</span><span class=nx>required</span><span class=p>(),</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11></a><a href=#__codelineno-33-11><span class=linenos data-linenos="11 "></span></a><span class=w>  </span><span class=p>})).</span><span class=nx>max</span><span class=p>(</span><span class=mf>5</span><span class=p>).</span><span class=nx>optional</span><span class=p>(),</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12></a><a href=#__codelineno-33-12><span class=linenos data-linenos="12 "></span></a><span class=p>});</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13></a><a href=#__codelineno-33-13><span class=linenos data-linenos="13 "></span></a>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14></a><a href=#__codelineno-33-14><span class=linenos data-linenos="14 "></span></a><span class=nx>socket</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;send_message&#39;</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15></a><a href=#__codelineno-33-15><span class=linenos data-linenos="15 "></span></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>value</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>messageSchema</span><span class=p>.</span><span class=nx>validate</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16></a><a href=#__codelineno-33-16><span class=linenos data-linenos="16 "></span></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17></a><a href=#__codelineno-33-17><span class=linenos data-linenos="17 "></span></a><span class=w>    </span><span class=nx>socket</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;validation_error&#39;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18></a><a href=#__codelineno-33-18><span class=linenos data-linenos="18 "></span></a><span class=w>      </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;Invalid message format&#39;</span><span class=p>,</span>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19></a><a href=#__codelineno-33-19><span class=linenos data-linenos="19 "></span></a><span class=w>      </span><span class=nx>details</span><span class=o>:</span><span class=w> </span><span class=kt>error.details</span><span class=p>,</span>
</span><span id=__span-33-20><a id=__codelineno-33-20 name=__codelineno-33-20></a><a href=#__codelineno-33-20><span class=linenos data-linenos="20 "></span></a><span class=w>    </span><span class=p>});</span>
</span><span id=__span-33-21><a id=__codelineno-33-21 name=__codelineno-33-21></a><a href=#__codelineno-33-21><span class=linenos data-linenos="21 "></span></a><span class=w>    </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-33-22><a id=__codelineno-33-22 name=__codelineno-33-22></a><a href=#__codelineno-33-22><span class=linenos data-linenos="22 "></span></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-33-23><a id=__codelineno-33-23 name=__codelineno-33-23></a><a href=#__codelineno-33-23><span class=linenos data-linenos="23 "></span></a><span class=w>  </span>
</span><span id=__span-33-24><a id=__codelineno-33-24 name=__codelineno-33-24></a><a href=#__codelineno-33-24><span class=linenos data-linenos="24 "></span></a><span class=w>  </span><span class=c1>// Process validated message</span>
</span><span id=__span-33-25><a id=__codelineno-33-25 name=__codelineno-33-25></a><a href=#__codelineno-33-25><span class=linenos data-linenos="25 "></span></a><span class=w>  </span><span class=nx>processMessage</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span><span id=__span-33-26><a id=__codelineno-33-26 name=__codelineno-33-26></a><a href=#__codelineno-33-26><span class=linenos data-linenos="26 "></span></a><span class=p>});</span>
</span></code></pre></div><p>This comprehensive WebSocket API specification provides the foundation for real-time communication in the web portal, ensuring reliable, secure, and efficient data exchange between the client and server components.</p><aside class=md-source-file><span class=md-source-file__fact><span class=md-icon title="Last update"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="June 18, 2025 17:45:41 UTC">June 18, 2025 17:45:41</span></span><span class=md-source-file__fact><span class=md-icon title=Created><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="June 18, 2025 17:45:41 UTC">June 18, 2025 17:45:41</span></span></aside><form class=md-feedback name=feedback hidden><fieldset><legend class=md-feedback__title> Was this page helpful? </legend><div class=md-feedback__inner><div class=md-feedback__list><button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg></button><button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg></button></div><div class=md-feedback__note><div data-md-value=1 hidden> Thanks for your feedback! </div><div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by <a href="https://github.com/jmontp/agent-workflow/issues/new/?title=[Feedback]+WebSocket%20API%20Specification+-+/planning/websocket-api-specification/" target=_blank rel=noopener>telling us what you found confusing</a>. </div></div></div></fieldset></form></article></div><script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type=button class="md-top md-icon" data-md-component=top hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a href=../user-journey-personas/ class="md-footer__link md-footer__link--prev" aria-label="Previous: User Journey & Personas"><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg></div><div class=md-footer__title><span class=md-footer__direction> Previous </span><div class=md-ellipsis> User Journey & Personas </div></div></a><a href=../../development/ class="md-footer__link md-footer__link--next" aria-label="Next: 👨‍💻 Development"><div class=md-footer__title><span class=md-footer__direction> Next </span><div class=md-ellipsis> 👨‍💻 Development </div></div><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></div></a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright></div><div class=md-social><a href=https://github.com/jmontp/agent-workflow target=_blank rel=noopener title="GitHub Repository" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></a><a href=https://jmontp.github.io/agent-workflow/ target=_blank rel=noopener title="Documentation Site" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a><a href=https://discord.gg/your-discord-server target=_blank rel=noopener title="Discord Community" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8"/></svg></a><a href=https://github.com/sponsors/jmontp target=_blank rel=noopener title=Sponsor class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53z"/></svg></a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><div class=md-progress data-md-component=progress role=progressbar></div><div class=md-consent data-md-component=consent id=__consent hidden><div class=md-consent__overlay></div><aside class=md-consent__inner><form class="md-consent__form md-grid md-typeset" name=consent><h4>Cookie consent</h4><p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p><input class=md-toggle type=checkbox id=__settings><div class=md-consent__settings><ul class=task-list><li class=task-list-item><label class=task-list-control><input type=checkbox name=analytics checked><span class=task-list-indicator></span> Google Analytics </label></li><li class=task-list-item><label class=task-list-control><input type=checkbox name=github checked><span class=task-list-indicator></span> GitHub </label></li></ul></div><div class=md-consent__controls><button class="md-button md-button--primary">Accept</button><button type=reset class="md-button md-button--primary">Reject</button><label class=md-button for=__settings>Manage settings</label></div></form></aside></div><script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script><script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": {"API": "api", "Architecture": "architecture", "CSS": "css", "Discord": "discord", "HTML5": "html", "JavaScript": "js", "Python": "python", "Scrum": "scrum", "TDD": "tdd"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script><script src=../../assets/javascripts/bundle.13a4f30d.min.js></script><script src=https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mtml-chtml.js></script><script src=../../js/mermaid-zoom.js></script><script src=../../js/universal-search.js></script><script src=../../js/enhanced-navigation.js></script><script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body></html>