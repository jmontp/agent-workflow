/* COMPREHENSIVE LAYOUT CONFLICT RESOLUTION */

/* ========================================
   CRITICAL: Force proper Discord-style layout structure
   ======================================== */

/* Phase 1: Core App Layout - Highest Priority */
.app-layout {
    display: flex !important;
    height: 100vh !important;
    background: var(--chat-bg, #ffffff) !important;
    position: relative !important;
    overflow: hidden !important;
}

.main-content {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    min-width: 0 !important;
    transition: margin-right var(--chat-animation-duration, 0.2s) var(--chat-animation-easing, ease) !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    background: var(--bg-secondary, #f5f5f5) !important;
}

/* Phase 2: Force State Diagrams to Display (Override column layout) */
.visualization-grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 20px !important;
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
}

.diagram-container {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
    background: var(--bg-surface, #ffffff) !important;
    border-radius: var(--border-radius, 8px) !important;
    padding: 20px !important;
    box-shadow: var(--shadow-md, 0 4px 6px rgba(0, 0, 0, 0.1)) !important;
    border: 1px solid var(--border-color, #e2e8f0) !important;
    margin-bottom: 20px !important;
}

/* Phase 3: Hide Interface Management Panels That Are Causing Column Layout */
.interface-panel,
.agent-testing-panel,
.interface-management,
.agent-interface-management,
.interface-config-panel,
#interface-tabs,
.interface-container,
.interface-controls,
.interface-selector,
.status-display,
.testing-controls {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    position: absolute !important;
    left: -9999px !important;
    width: 0 !important;
    height: 0 !important;
    overflow: hidden !important;
}

/* Phase 4: Ensure chat panel is a side panel, not inline */
.chat-panel {
    position: fixed !important;
    top: 0 !important;
    right: 0 !important;
    width: var(--chat-panel-width, 400px) !important;
    height: 100vh !important;
    background: var(--chat-panel-bg, #f8f9fa) !important;
    border-left: 1px solid var(--chat-border, #e2e8f0) !important;
    display: flex !important;
    flex-direction: column !important;
    transform: translateX(100%) !important;
    transition: transform var(--chat-animation-duration, 0.2s) var(--chat-animation-easing, ease) !important;
    z-index: 1000 !important;
}

.chat-panel.open,
.chat-panel.show {
    transform: translateX(0) !important;
}

/* Phase 5: Main content adjustment when chat is open */
.main-content.chat-open {
    margin-right: var(--chat-panel-width, 400px) !important;
}

/* Phase 6: Force visibility of core visualizer elements */
main[role="main"],
.container,
header,
.status-bar,
.cycles-panel,
.activity-panel,
#workflow-diagram,
#tdd-diagram,
.mermaid {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Phase 7: Override any mobile styles on desktop */
@media (min-width: 769px) {
    .chat-panel {
        position: fixed !important;
        width: var(--chat-panel-width, 400px) !important;
        height: 100vh !important;
        transform: translateX(100%) !important;
    }
    
    .chat-panel.open {
        transform: translateX(0) !important;
    }
    
    .main-content.chat-open {
        margin-right: var(--chat-panel-width, 400px) !important;
        transform: none !important;
    }
    
    /* Force desktop layout - no mobile overrides */
    .mobile-project-selector {
        display: none !important;
    }
    
    .project-tabs {
        display: flex !important;
    }
}

/* Phase 8: Critical - Prevent any grid/flexbox layout conflicts */
body {
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
}

/* Phase 9: Force proper document flow */
html, body {
    height: 100% !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

/* Phase 10: Emergency visibility override */
.emergency-show-visualizer {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

.emergency-hide-interface {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
}