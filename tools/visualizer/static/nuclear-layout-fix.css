/* OPTIMIZED LAYOUT ENFORCEMENT - Consolidated from 13 phases to 5 essential phases */

/* PHASE 1: Core Layout Structure */
.app-layout {
    display: flex !important;
    height: 100vh !important;
    background: var(--bg-primary) !important;
    position: relative !important;
    overflow: hidden !important;
}

.main-content {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    min-width: 0 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    transition: margin-right var(--chat-animation-duration) var(--chat-animation-easing) !important;
}

/* PHASE 2: Force Critical Components Visible */
.visualization-grid,
.diagram-container,
.mermaid,
main[role="main"],
header,
.status-bar {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

.visualization-grid {
    width: 100% !important;
    margin: var(--spacing-xl) 0 !important;
}

.diagram-container {
    margin-bottom: var(--spacing-2xl) !important;
    padding: var(--spacing-xl) !important;
    background: var(--bg-surface) !important;
    border: var(--border-width) solid var(--border-color) !important;
    border-radius: var(--border-radius) !important;
    box-shadow: var(--shadow-md) !important;
}

.mermaid {
    min-height: 400px !important;
    text-align: center !important;
}

/* PHASE 3: Interface Panel Complete Removal */
.interface-panel,
.agent-testing-panel,
.interface-management,
.testing-controls,
.agent-interface-management {
    display: none !important;
    visibility: hidden !important;
    position: absolute !important;
    left: -99999px !important;
    width: 0 !important;
    height: 0 !important;
    overflow: hidden !important;
    pointer-events: none !important;
}

/* PHASE 4: Chat Panel Authority */
.chat-panel {
    position: fixed !important;
    top: 0 !important;
    right: 0 !important;
    width: var(--chat-panel-width) !important;
    height: 100vh !important;
    background: var(--bg-secondary) !important;
    border-left: var(--border-width) solid var(--border-color) !important;
    display: flex !important;
    flex-direction: column !important;
    transform: translateX(100%) !important;
    transition: transform var(--chat-animation-duration) var(--chat-animation-easing) !important;
    z-index: var(--z-modal) !important;
}

.chat-panel.open,
.chat-panel.show {
    transform: translateX(0) !important;
}

.main-content.chat-open {
    margin-right: var(--chat-panel-width) !important;
}

/* PHASE 5: Essential Layout Enforcement */
* {
    box-sizing: border-box !important;
}

body {
    overflow-x: hidden !important;
}

.container {
    display: block !important;
    width: 100% !important;
    max-width: none !important;
}

main[role="main"] {
    flex: 1 !important;
    padding: 0 var(--spacing-xl) !important;
}

/* Mobile Responsive Override */
@media (max-width: 768px) {
    .mobile-project-selector {
        display: flex !important;
    }
    
    .project-tabs {
        display: none !important;
    }
    
    .chat-panel {
        width: 100vw !important;
        border-left: none !important;
    }
    
    .main-content.chat-open {
        margin-right: 0 !important;
        transform: translateX(-100%) !important;
    }
}

/* Anti-JS Override */
[data-js-hidden] .visualization-grid,
[data-js-hidden] .diagram-container {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Layout Success Indicator */
body::after {
    content: "âœ… Optimized Layout Active" !important;
    position: fixed !important;
    bottom: var(--spacing-md) !important;
    left: var(--spacing-md) !important;
    background: var(--color-success) !important;
    color: var(--text-inverse) !important;
    padding: var(--spacing-sm) var(--spacing-md) !important;
    border-radius: var(--border-radius-sm) !important;
    font-size: 12px !important;
    z-index: var(--z-tooltip) !important;
    pointer-events: none !important;
}