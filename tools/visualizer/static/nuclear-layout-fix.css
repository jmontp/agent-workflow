/* NUCLEAR LAYOUT FIX - Forces correct Discord-style layout */

/* PHASE 1: Force app layout structure */
.app-layout {
    display: flex !important;
    height: 100vh !important;
    background: var(--chat-bg, #ffffff) !important;
    position: relative !important;
}

.main-content {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    min-width: 0 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
}

/* PHASE 2: Force state machine diagrams to be visible */
.visualization-grid {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    width: 100% !important;
    margin: 20px 0 !important;
}

.diagram-container {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    margin-bottom: 30px !important;
    padding: 20px !important;
    background: #fff !important;
    border: 1px solid #e0e0e0 !important;
    border-radius: 8px !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;
}

.diagram-container h2 {
    display: block !important;
    visibility: visible !important;
    margin-bottom: 15px !important;
    color: #333 !important;
    font-size: 18px !important;
}

.mermaid {
    display: block !important;
    visibility: visible !important;
    min-height: 400px !important;
    text-align: center !important;
}

/* PHASE 3: Hide ALL interface management panels */
.interface-panel,
.agent-testing-panel,
.interface-management,
.testing-controls,
.agent-interface-management,
.activity-panel {
    display: none !important;
    visibility: hidden !important;
    position: absolute !important;
    left: -9999px !important;
}

/* PHASE 4: Force chat panel to be side panel */
.chat-panel {
    position: fixed !important;
    top: 0 !important;
    right: 0 !important;
    width: 400px !important;
    height: 100vh !important;
    background: var(--chat-panel-bg, #f8f9fa) !important;
    border-left: 1px solid var(--chat-border, #e2e8f0) !important;
    display: flex !important;
    flex-direction: column !important;
    transform: translateX(100%) !important;
    transition: transform 0.3s ease !important;
    z-index: 1000 !important;
}

.chat-panel.open,
.chat-panel.show {
    transform: translateX(0) !important;
}

/* PHASE 5: Ensure proper header and status bar */
header {
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
}

.status-bar {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 10px 20px !important;
    background: #f5f5f5 !important;
    border-bottom: 1px solid #e0e0e0 !important;
}

/* PHASE 6: Project tab bar styling */
.project-tab-bar {
    display: block !important;
    visibility: visible !important;
    padding: 10px 20px !important;
    background: #fff !important;
    border-bottom: 1px solid #e0e0e0 !important;
}

.project-tabs {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
}

.project-tab {
    display: flex !important;
    align-items: center !important;
    padding: 8px 16px !important;
    background: #f0f0f0 !important;
    border: 1px solid #ddd !important;
    border-radius: 20px !important;
    margin-right: 10px !important;
}

.project-tab.active {
    background: #4CAF50 !important;
    color: white !important;
}

/* PHASE 7: Mobile overrides disabled on desktop */
@media (min-width: 769px) {
    .mobile-project-selector {
        display: none !important;
    }
    
    .chat-panel {
        position: fixed !important;
        width: 400px !important;
        height: 100vh !important;
    }
}

/* PHASE 8: Emergency visibility enforcement */
body {
    overflow-x: hidden !important;
}

main[role="main"] {
    display: block !important;
    visibility: visible !important;
    flex: 1 !important;
    padding: 0 20px !important;
}

/* PHASE 9: Chat toggle button */
#panel-toggle-btn {
    display: inline-block !important;
    visibility: visible !important;
    background: #4CAF50 !important;
    color: white !important;
    border: none !important;
    padding: 8px 12px !important;
    border-radius: 4px !important;
    cursor: pointer !important;
}

#panel-toggle-btn:hover {
    background: #45a049 !important;
}

/* PHASE 10: Remove any grid layouts that might conflict */
.container {
    display: block !important;
    width: 100% !important;
    max-width: none !important;
}

/* PHASE 11: Debug helpers */
.visualization-grid::before {
    content: "ðŸŽ¯ State Machine Visualizer" !important;
    display: block !important;
    font-size: 14px !important;
    color: #666 !important;
    text-align: center !important;
    margin-bottom: 15px !important;
}

/* PHASE 12: Force override any competing styles */
* {
    box-sizing: border-box !important;
}

/* PHASE 13: Prevent JavaScript from hiding diagrams */
[data-js-hidden] .visualization-grid,
[data-js-hidden] .diagram-container {
    display: block !important;
    visibility: visible !important;
}

/* Success indicator */
body::after {
    content: "âœ… Nuclear Layout Fix Applied" !important;
    position: fixed !important;
    bottom: 10px !important;
    left: 10px !important;
    background: #4CAF50 !important;
    color: white !important;
    padding: 5px 10px !important;
    border-radius: 4px !important;
    font-size: 12px !important;
    z-index: 9999 !important;
    pointer-events: none !important;
}