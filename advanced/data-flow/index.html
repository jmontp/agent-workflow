<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Human-In-The-Loop orchestration framework for AI-assisted software development"><meta name=author content="AI Agent Workflow Team"><link href=https://jmontp.github.io/agent-workflow/advanced/data-flow/ rel=canonical><link href=../component/ rel=prev><link href=../orchestration-repo/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>Data Flow - AI Agent TDD-Scrum Workflow</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><style>:root{.md-tag{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M5.5%207A1.5%201.5%200%200%201%204%205.5%201.5%201.5%200%200%201%205.5%204%201.5%201.5%200%200%201%207%205.5%201.5%201.5%200%200%201%205.5%207m15.91%204.58-9-9C12.05%202.22%2011.55%202%2011%202H4c-1.11%200-2%20.89-2%202v7c0%20.55.22%201.05.59%201.41l8.99%209c.37.36.87.59%201.42.59s1.05-.23%201.41-.59l7-7c.37-.36.59-.86.59-1.41%200-.56-.23-1.06-.59-1.42%22/%3E%3C/svg%3E');}.md-tag.md-tag--html{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m12%2017.56%204.07-1.13.55-6.1H9.38L9.2%208.3h7.6l.2-1.99H7l.56%206.01h6.89l-.23%202.58-2.22.6-2.22-.6-.14-1.66h-2l.29%203.19zM4.07%203h15.86L18.5%2019.2%2012%2021l-6.5-1.8z%22/%3E%3C/svg%3E');}.md-tag.md-tag--js{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M3%203h18v18H3zm4.73%2015.04c.4.85%201.19%201.55%202.54%201.55%201.5%200%202.53-.8%202.53-2.55v-5.78h-1.7V17c0%20.86-.35%201.08-.9%201.08-.58%200-.82-.4-1.09-.87zm5.98-.18c.5.98%201.51%201.73%203.09%201.73%201.6%200%202.8-.83%202.8-2.36%200-1.41-.81-2.04-2.25-2.66l-.42-.18c-.73-.31-1.04-.52-1.04-1.02%200-.41.31-.73.81-.73.48%200%20.8.21%201.09.73l1.31-.87c-.55-.96-1.33-1.33-2.4-1.33-1.51%200-2.48.96-2.48%202.23%200%201.38.81%202.03%202.03%202.55l.42.18c.78.34%201.24.55%201.24%201.13%200%20.48-.45.83-1.15.83-.83%200-1.31-.43-1.67-1.03z%22/%3E%3C/svg%3E');}.md-tag.md-tag--css{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m5%203-.65%203.34h13.59L17.5%208.5H3.92l-.66%203.33h13.59l-.76%203.81-5.48%201.81-4.75-1.81.33-1.64H2.85l-.79%204%207.85%203%209.05-3%201.2-6.03.24-1.21L21.94%203z%22/%3E%3C/svg%3E');}.md-tag.md-tag--python{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M19.14%207.5A2.86%202.86%200%200%201%2022%2010.36v3.78A2.86%202.86%200%200%201%2019.14%2017H12c0%20.39.32.96.71.96H17v1.68a2.86%202.86%200%200%201-2.86%202.86H9.86A2.86%202.86%200%200%201%207%2019.64v-3.75a2.85%202.85%200%200%201%202.86-2.85h5.25a2.85%202.85%200%200%200%202.85-2.86V7.5zm-4.28%2011.79c-.4%200-.72.3-.72.89s.32.71.72.71a.71.71%200%200%200%20.71-.71c0-.59-.32-.89-.71-.89m-10-1.79A2.86%202.86%200%200%201%202%2014.64v-3.78A2.86%202.86%200%200%201%204.86%208H12c0-.39-.32-.96-.71-.96H7V5.36A2.86%202.86%200%200%201%209.86%202.5h4.28A2.86%202.86%200%200%201%2017%205.36v3.75a2.85%202.85%200%200%201-2.86%202.85H8.89a2.85%202.85%200%200%200-2.85%202.86v2.68zM9.14%205.71c.4%200%20.72-.3.72-.89s-.32-.71-.72-.71c-.39%200-.71.12-.71.71s.32.89.71.89%22/%3E%3C/svg%3E');}}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><link rel=stylesheet href=../../stylesheets/enhanced-navigation.css><link rel=stylesheet href=../../stylesheets/color-schemes.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head><body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=black><input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off><input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off><label class=md-overlay for=__drawer></label><div data-md-component=skip><a href=#data-flow-architecture class=md-skip> Skip to content </a></div><div data-md-component=announce></div><div data-md-color-scheme=default data-md-component=outdated hidden></div><header class="md-header md-header--shadow md-header--lifted" data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a href=../.. title="AI Agent TDD-Scrum Workflow" class="md-header__button md-logo" aria-label="AI Agent TDD-Scrum Workflow" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a><label class="md-header__button md-icon" for=__drawer><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> AI Agent TDD-Scrum Workflow </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> Data Flow </span></div></div></div><div class=md-header__option><div class=md-select><button class="md-header__button md-icon" aria-label="Select language"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg></button><div class=md-select__inner><ul class=md-select__list><li class=md-select__item><a href=../../ hreflang=en class=md-select__link> English </a></li></ul></div></div></div><label class="md-header__button md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required><label class="md-search__icon md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg></label><nav class=md-search__options aria-label=Search><a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg></a><button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap tabindex=0 data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta> Initializing search </div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a href=https://github.com/jmontp/agent-workflow title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></div><div class=md-source__repository> jmontp/agent-workflow </div></a></div></nav><nav class=md-tabs aria-label=Tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a href=../.. class=md-tabs__link> 🏠 Home </a></li><li class=md-tabs__item><a href=../../getting-started/ class=md-tabs__link> ⚡ Getting Started </a></li><li class=md-tabs__item><a href=../../user-guide/ class=md-tabs__link> 📊 User Guide </a></li><li class=md-tabs__item><a href=../../concepts/ class=md-tabs__link> 🎯 Core Concepts </a></li><li class=md-tabs__item><a href=../../architecture/ class=md-tabs__link> 🔥 Architecture </a></li><li class="md-tabs__item md-tabs__item--active"><a href=../ class=md-tabs__link> ⚡ Advanced Topics </a></li><li class=md-tabs__item><a href=../../planning/ class=md-tabs__link> 🎨 Planning & Design </a></li><li class=md-tabs__item><a href=../../development/ class=md-tabs__link> 📊 Development </a></li><li class=md-tabs__item><a href=../../deployment/ class=md-tabs__link> 🔥 Deployment </a></li><li class=md-tabs__item><a href=../../templates/ class=md-tabs__link> 📋 Templates </a></li><li class=md-tabs__item><a href=../../theme-integration-guide/ class=md-tabs__link> 🎨 Theme Integration </a></li><li class=md-tabs__item><a href=../../archive/compliance/ class=md-tabs__link> 📁 Archive </a></li></ul></div></nav></header><div class=md-container data-md-component=container><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a href=../.. title="AI Agent TDD-Scrum Workflow" class="md-nav__button md-logo" aria-label="AI Agent TDD-Scrum Workflow" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a> AI Agent TDD-Scrum Workflow </label><div class=md-nav__source><a href=https://github.com/jmontp/agent-workflow title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></div><div class=md-source__repository> jmontp/agent-workflow </div></a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../.. class=md-nav__link><span class=md-ellipsis> 🏠 Home </span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../getting-started/ class=md-nav__link><span class=md-ellipsis> ⚡ Getting Started </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../user-guide/ class=md-nav__link><span class=md-ellipsis> 📊 User Guide </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../concepts/ class=md-nav__link><span class=md-ellipsis> 🎯 Core Concepts </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../architecture/ class=md-nav__link><span class=md-ellipsis> 🔥 Architecture </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked><div class="md-nav__link md-nav__container"><a href=../ class="md-nav__link "><span class=md-ellipsis> ⚡ Advanced Topics </span></a><label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true><label class=md-nav__title for=__nav_6><span class="md-nav__icon md-icon"></span> ⚡ Advanced Topics </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../context/ class=md-nav__link><span class=md-ellipsis> Context Diagram </span></a></li><li class=md-nav__item><a href=../architecture-detailed/ class=md-nav__link><span class=md-ellipsis> Detailed Architecture </span></a></li><li class=md-nav__item><a href=../container/ class=md-nav__link><span class=md-ellipsis> Container Architecture </span></a></li><li class=md-nav__item><a href=../component/ class=md-nav__link><span class=md-ellipsis> System Components </span></a></li><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type=checkbox id=__toc><label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> Data Flow </span><span class="md-nav__icon md-icon"></span></label><a href=./ class="md-nav__link md-nav__link--active"><span class=md-ellipsis> Data Flow </span></a><nav class="md-nav md-nav--secondary" aria-label="On this page"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> On this page </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#overview class=md-nav__link><span class=md-ellipsis> Overview </span></a></li><li class=md-nav__item><a href=#data-flow-patterns class=md-nav__link><span class=md-ellipsis> Data Flow Patterns </span></a><nav class=md-nav aria-label="Data Flow Patterns"><ul class=md-nav__list><li class=md-nav__item><a href=#4-tdd-cycle-initialization-flow class=md-nav__link><span class=md-ellipsis> 4. TDD Cycle Initialization Flow </span></a></li><li class=md-nav__item><a href=#5-test-preservation-workflow class=md-nav__link><span class=md-ellipsis> 5. Test Preservation Workflow </span></a></li><li class=md-nav__item><a href=#6-test-file-lifecycle-management class=md-nav__link><span class=md-ellipsis> 6. Test File Lifecycle Management </span></a></li><li class=md-nav__item><a href=#1-project-registration-flow class=md-nav__link><span class=md-ellipsis> 1. Project Registration Flow </span></a></li><li class=md-nav__item><a href=#2-command-execution-flow class=md-nav__link><span class=md-ellipsis> 2. Command Execution Flow </span></a></li><li class=md-nav__item><a href=#3-sprint-management-with-tdd-integration-flow class=md-nav__link><span class=md-ellipsis> 3. Sprint Management with TDD Integration Flow </span></a></li></ul></nav></li><li class=md-nav__item><a href=#data-storage-patterns class=md-nav__link><span class=md-ellipsis> Data Storage Patterns </span></a><nav class=md-nav aria-label="Data Storage Patterns"><ul class=md-nav__list><li class=md-nav__item><a href=#orchestration-repository class=md-nav__link><span class=md-ellipsis> Orchestration Repository </span></a></li><li class=md-nav__item><a href=#project-repository class=md-nav__link><span class=md-ellipsis> Project Repository </span></a></li></ul></nav></li><li class=md-nav__item><a href=#readwrite-access-patterns class=md-nav__link><span class=md-ellipsis> Read/Write Access Patterns </span></a><nav class=md-nav aria-label="Read/Write Access Patterns"><ul class=md-nav__list><li class=md-nav__item><a href=#read-operations class=md-nav__link><span class=md-ellipsis> Read Operations </span></a></li><li class=md-nav__item><a href=#write-operations class=md-nav__link><span class=md-ellipsis> Write Operations </span></a></li><li class=md-nav__item><a href=#security-boundaries class=md-nav__link><span class=md-ellipsis> Security Boundaries </span></a></li></ul></nav></li><li class=md-nav__item><a href=#state-synchronization class=md-nav__link><span class=md-ellipsis> State Synchronization </span></a><nav class=md-nav aria-label="State Synchronization"><ul class=md-nav__list><li class=md-nav__item><a href=#dual-state-machine-coordination class=md-nav__link><span class=md-ellipsis> Dual State Machine Coordination </span></a></li><li class=md-nav__item><a href=#multi-project-coordination class=md-nav__link><span class=md-ellipsis> Multi-Project Coordination </span></a></li></ul></nav></li><li class=md-nav__item><a href=#data-consistency class=md-nav__link><span class=md-ellipsis> Data Consistency </span></a><nav class=md-nav aria-label="Data Consistency"><ul class=md-nav__list><li class=md-nav__item><a href=#eventual-consistency-model class=md-nav__link><span class=md-ellipsis> Eventual Consistency Model </span></a></li><li class=md-nav__item><a href=#transaction-boundaries class=md-nav__link><span class=md-ellipsis> Transaction Boundaries </span></a></li><li class=md-nav__item><a href=#backup-and-recovery class=md-nav__link><span class=md-ellipsis> Backup and Recovery </span></a></li></ul></nav></li><li class=md-nav__item><a href=#performance-considerations class=md-nav__link><span class=md-ellipsis> Performance Considerations </span></a><nav class=md-nav aria-label="Performance Considerations"><ul class=md-nav__list><li class=md-nav__item><a href=#read-performance class=md-nav__link><span class=md-ellipsis> Read Performance </span></a></li><li class=md-nav__item><a href=#write-performance class=md-nav__link><span class=md-ellipsis> Write Performance </span></a></li><li class=md-nav__item><a href=#scalability class=md-nav__link><span class=md-ellipsis> Scalability </span></a></li></ul></nav></li><li class=md-nav__item><a href=#monitoring-and-observability class=md-nav__link><span class=md-ellipsis> Monitoring and Observability </span></a><nav class=md-nav aria-label="Monitoring and Observability"><ul class=md-nav__list><li class=md-nav__item><a href=#data-flow-metrics class=md-nav__link><span class=md-ellipsis> Data Flow Metrics </span></a></li><li class=md-nav__item><a href=#audit-trail class=md-nav__link><span class=md-ellipsis> Audit Trail </span></a></li><li class=md-nav__item><a href=#health-checks class=md-nav__link><span class=md-ellipsis> Health Checks </span></a></li></ul></nav></li></ul></nav></li><li class=md-nav__item><a href=../orchestration-repo/ class=md-nav__link><span class=md-ellipsis> Orchestration Repository </span></a></li><li class=md-nav__item><a href=../project-repo/ class=md-nav__link><span class=md-ellipsis> Project Repository </span></a></li><li class=md-nav__item><a href=../security-implementation/ class=md-nav__link><span class=md-ellipsis> Security Implementation </span></a></li><li class=md-nav__item><a href=../testing/ class=md-nav__link><span class=md-ellipsis> Testing Strategy </span></a></li><li class=md-nav__item><a href=../code/ class=md-nav__link><span class=md-ellipsis> Code Structure </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../planning/ class=md-nav__link><span class=md-ellipsis> 🎨 Planning & Design </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../development/ class=md-nav__link><span class=md-ellipsis> 📊 Development </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../deployment/ class=md-nav__link><span class=md-ellipsis> 🔥 Deployment </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../templates/ class=md-nav__link><span class=md-ellipsis> 📋 Templates </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../theme-integration-guide/ class=md-nav__link><span class=md-ellipsis> 🎨 Theme Integration </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../archive/compliance/ class=md-nav__link><span class=md-ellipsis> 📁 Archive </span><span class="md-nav__icon md-icon"></span></a></li></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><a href=https://github.com/jmontp/agent-workflow/edit/master/docs/advanced/data-flow.md title="Edit this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg></a><a href=https://github.com/jmontp/agent-workflow/raw/master/docs/advanced/data-flow.md title="View source of this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg></a><h1 id=data-flow-architecture>Data Flow Architecture<a class=headerlink href=#data-flow-architecture title="Permanent link">&para;</a></h1><p>This document describes how data flows between the orchestration repository and project repositories in the two-repository model, including the Test-Driven Development workflow and test preservation patterns.</p><h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2><p>The AI Agent TDD-Scrum workflow system operates on a clear separation between: - <strong>Orchestration Repository</strong>: Central framework, coordination, and dual state machine management - <strong>Project Repositories</strong>: Individual codebases with embedded project management data and TDD state</p><p>The system implements dual data flows: - <strong>Workflow Data Flow</strong>: Project-level state and management data - <strong>TDD Data Flow</strong>: Story-level TDD cycles, test files, and test preservation</p><h2 id=data-flow-patterns>Data Flow Patterns<a class=headerlink href=#data-flow-patterns title="Permanent link">&para;</a></h2><h3 id=4-tdd-cycle-initialization-flow>4. TDD Cycle Initialization Flow<a class=headerlink href=#4-tdd-cycle-initialization-flow title="Permanent link">&para;</a></h3><pre class=mermaid><code>sequenceDiagram
    participant O as Orchestrator
    participant TSM as TDD SM
    participant DA as Design Agent
    participant P as Project Repo
    participant TDD as TDD Storage

    Note over O,P: Sprint starts, TDD cycles created
    O-&gt;&gt;TSM: Create TDD cycle for story AUTH-1
    TSM-&gt;&gt;TDD: Initialize cycle data
    TDD-&gt;&gt;TDD: Create cycle-{id}.json
    TSM-&gt;&gt;P: Create TDD test directory
    P-&gt;&gt;P: mkdir tests/tdd/AUTH-1/
    
    Note over TSM,DA: DESIGN phase begins
    TSM-&gt;&gt;DA: Start design phase
    DA-&gt;&gt;P: Read story requirements
    P-&gt;&gt;DA: Return story data
    DA-&gt;&gt;DA: Create technical specifications
    DA-&gt;&gt;TDD: Store design artifacts
    TDD-&gt;&gt;TDD: Update cycle with design notes
    DA-&gt;&gt;TSM: Design phase complete
    TSM-&gt;&gt;TSM: Transition to TEST_RED</code></pre><h3 id=5-test-preservation-workflow>5. Test Preservation Workflow<a class=headerlink href=#5-test-preservation-workflow title="Permanent link">&para;</a></h3><pre class=mermaid><code>sequenceDiagram
    participant QA as QA Agent
    participant CA as Code Agent
    participant P as Project Repo
    participant TDD as TDD Storage
    participant CI as CI System

    Note over QA,P: TEST_RED phase - create failing tests
    QA-&gt;&gt;P: Create test files in tests/tdd/AUTH-1/
    P-&gt;&gt;P: Write test_login.py (failing)
    QA-&gt;&gt;P: Run tests to confirm failures
    P-&gt;&gt;QA: Test results (RED)
    QA-&gt;&gt;TDD: Store test results
    QA-&gt;&gt;P: Git commit failing tests
    P-&gt;&gt;P: Commit tests to repository
    
    Note over CA,P: CODE_GREEN phase - implement minimal code
    CA-&gt;&gt;P: Read committed test files
    P-&gt;&gt;CA: Return test requirements
    CA-&gt;&gt;P: Implement minimal code in src/
    CA-&gt;&gt;P: Run tests to verify GREEN
    P-&gt;&gt;CA: Test results (GREEN)
    CA-&gt;&gt;TDD: Store passing test results
    CA-&gt;&gt;P: Git commit implementation
    
    Note over CA,CI: REFACTOR phase - improve while preserving tests
    CA-&gt;&gt;P: Refactor code quality
    CA-&gt;&gt;P: Run tests to ensure still GREEN
    P-&gt;&gt;CA: Test results (GREEN)
    CA-&gt;&gt;P: Git commit refactored code
    P-&gt;&gt;CI: Trigger CI pipeline
    CI-&gt;&gt;P: Run full test suite
    CI-&gt;&gt;TDD: Store CI results</code></pre><h3 id=6-test-file-lifecycle-management>6. Test File Lifecycle Management<a class=headerlink href=#6-test-file-lifecycle-management title="Permanent link">&para;</a></h3><pre class=mermaid><code>sequenceDiagram
    participant TSM as TDD SM
    participant TFM as Test File Manager
    participant P as Project Repo
    participant TDD as TDD Storage

    Note over TSM,P: Test file creation in TDD directory
    TSM-&gt;&gt;TFM: Create test file for story
    TFM-&gt;&gt;P: tests/tdd/AUTH-1/test_login.py
    TFM-&gt;&gt;TDD: Track file in TestFile object
    TDD-&gt;&gt;TDD: Store file metadata
    
    Note over TFM,P: Test file preservation through phases
    TFM-&gt;&gt;P: Git commit (TEST_RED → CODE_GREEN)
    TFM-&gt;&gt;TDD: Update file status to COMMITTED
    TFM-&gt;&gt;P: Validate tests remain (CODE_GREEN → REFACTOR)
    TFM-&gt;&gt;TDD: Update file status to PASSING
    
    Note over TFM,P: Test file promotion to permanent location
    TFM-&gt;&gt;P: Copy to tests/unit/test_login.py
    TFM-&gt;&gt;TDD: Update file status to INTEGRATED
    TFM-&gt;&gt;P: Update CI configuration
    TFM-&gt;&gt;P: Git commit final test integration</code></pre><h3 id=1-project-registration-flow>1. Project Registration Flow<a class=headerlink href=#1-project-registration-flow title="Permanent link">&para;</a></h3><pre class=mermaid><code>sequenceDiagram
    participant U as User
    participant D as Discord Bot
    participant O as Orchestrator
    participant P as Project Repo
    participant G as Git

    U-&gt;&gt;D: /project register &lt;path&gt;
    D-&gt;&gt;D: Validate path exists
    D-&gt;&gt;D: Check if git repository
    D-&gt;&gt;D: Verify no existing channel
    D-&gt;&gt;P: Initialize .orch-state/
    P-&gt;&gt;P: Create directory structure
    P-&gt;&gt;P: Create template files
    D-&gt;&gt;D: Create Discord channel
    D-&gt;&gt;O: Register project
    O-&gt;&gt;O: Add to project registry
    D-&gt;&gt;U: Registration complete</code></pre><h3 id=2-command-execution-flow>2. Command Execution Flow<a class=headerlink href=#2-command-execution-flow title="Permanent link">&para;</a></h3><pre class=mermaid><code>sequenceDiagram
    participant U as User
    participant D as Discord Bot
    participant O as Orchestrator
    participant SM as State Machine
    participant A as Agent
    participant P as Project Repo

    U-&gt;&gt;D: /epic "New feature"
    D-&gt;&gt;O: Route command to project
    O-&gt;&gt;SM: Validate against state
    SM-&gt;&gt;O: Command allowed
    O-&gt;&gt;A: Create epic task
    A-&gt;&gt;P: Read current backlog.json
    P-&gt;&gt;A: Return project data
    A-&gt;&gt;A: Create epic object
    A-&gt;&gt;P: Write updated backlog.json
    A-&gt;&gt;O: Task complete
    O-&gt;&gt;D: Success response
    D-&gt;&gt;U: Epic created notification</code></pre><h3 id=3-sprint-management-with-tdd-integration-flow>3. Sprint Management with TDD Integration Flow<a class=headerlink href=#3-sprint-management-with-tdd-integration-flow title="Permanent link">&para;</a></h3><pre class=mermaid><code>sequenceDiagram
    participant U as User
    participant D as Discord Bot
    participant O as Orchestrator
    participant WSM as Workflow SM
    participant TSM as TDD SM
    participant P as Project Repo

    U-&gt;&gt;D: /sprint plan
    D-&gt;&gt;O: Route to project
    O-&gt;&gt;WSM: Validate sprint planning
    WSM-&gt;&gt;O: Planning allowed
    O-&gt;&gt;P: Read backlog.json
    P-&gt;&gt;O: Return stories
    O-&gt;&gt;P: Create sprint in sprints/
    P-&gt;&gt;P: Write sprint-xxx.json
    O-&gt;&gt;P: Update story assignments
    P-&gt;&gt;P: Update backlog.json
    
    Note over O,TSM: Sprint start triggers TDD cycles
    U-&gt;&gt;D: /sprint start
    D-&gt;&gt;O: Start sprint
    O-&gt;&gt;WSM: Transition to SPRINT_ACTIVE
    loop For each story in sprint
        O-&gt;&gt;TSM: Create TDD cycle
        TSM-&gt;&gt;P: Create TDD state in .orch-state/tdd/
        P-&gt;&gt;P: Initialize story TDD directory
    end
    
    O-&gt;&gt;D: Sprint and TDD cycles active
    D-&gt;&gt;U: Show sprint and TDD status</code></pre><h2 id=data-storage-patterns>Data Storage Patterns<a class=headerlink href=#data-storage-patterns title="Permanent link">&para;</a></h2><h3 id=orchestration-repository>Orchestration Repository<a class=headerlink href=#orchestration-repository title="Permanent link">&para;</a></h3><div class="language-text highlight"><span class=filename>Text Only</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><a href=#__codelineno-0-1><span class=linenos data-linenos="1 "></span></a>agent-workflow/
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><a href=#__codelineno-0-2><span class=linenos data-linenos="2 "></span></a>├── lib/
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><a href=#__codelineno-0-3><span class=linenos data-linenos="3 "></span></a>│   ├── agents/              # Agent definitions (global)
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><a href=#__codelineno-0-4><span class=linenos data-linenos="4 "></span></a>│   ├── state_machine.py     # Workflow states (global)
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><a href=#__codelineno-0-5><span class=linenos data-linenos="5 "></span></a>│   ├── discord_bot.py       # Interface (global)
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6></a><a href=#__codelineno-0-6><span class=linenos data-linenos="6 "></span></a>│   └── agent_tool_config.py # Security policies (global)
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7></a><a href=#__codelineno-0-7><span class=linenos data-linenos="7 "></span></a>├── scripts/
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8></a><a href=#__codelineno-0-8><span class=linenos data-linenos="8 "></span></a>│   └── orchestrator.py      # Coordination engine (global)
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9></a><a href=#__codelineno-0-9><span class=linenos data-linenos="9 "></span></a>└── docs_src/               # Framework documentation (global)
</span></code></pre></div><h3 id=project-repository>Project Repository<a class=headerlink href=#project-repository title="Permanent link">&para;</a></h3><div class="language-text highlight"><span class=filename>Text Only</span><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a><a href=#__codelineno-1-1><span class=linenos data-linenos=" 1 "></span></a>project-repo/
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a><a href=#__codelineno-1-2><span class=linenos data-linenos=" 2 "></span></a>├── src/                    # Project code (project-specific)
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a><a href=#__codelineno-1-3><span class=linenos data-linenos=" 3 "></span></a>├── tests/                  # Project tests (project-specific)
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a><a href=#__codelineno-1-4><span class=linenos data-linenos=" 4 "></span></a>│   ├── unit/              # Permanent unit tests
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><a href=#__codelineno-1-5><span class=linenos data-linenos=" 5 "></span></a>│   ├── integration/       # Permanent integration tests
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6></a><a href=#__codelineno-1-6><span class=linenos data-linenos=" 6 "></span></a>│   └── tdd/               # TDD working directory
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7></a><a href=#__codelineno-1-7><span class=linenos data-linenos=" 7 "></span></a>│       └── {story-id}/    # Per-story TDD tests
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8></a><a href=#__codelineno-1-8><span class=linenos data-linenos=" 8 "></span></a>├── .orch-state/           # Workflow data (project-specific)
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9></a><a href=#__codelineno-1-9><span class=linenos data-linenos=" 9 "></span></a>│   ├── backlog.json       # Project management data
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10></a><a href=#__codelineno-1-10><span class=linenos data-linenos="10 "></span></a>│   ├── sprints/           # Sprint history
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11></a><a href=#__codelineno-1-11><span class=linenos data-linenos="11 "></span></a>│   ├── tdd/               # TDD state storage
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12></a><a href=#__codelineno-1-12><span class=linenos data-linenos="12 "></span></a>│   │   ├── cycles/        # TDD cycle data
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13></a><a href=#__codelineno-1-13><span class=linenos data-linenos="13 "></span></a>│   │   └── test-results/  # Test execution results
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14></a><a href=#__codelineno-1-14><span class=linenos data-linenos="14 "></span></a>│   ├── architecture.md    # Project architecture decisions
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15></a><a href=#__codelineno-1-15><span class=linenos data-linenos="15 "></span></a>│   ├── best-practices.md  # Project conventions
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16></a><a href=#__codelineno-1-16><span class=linenos data-linenos="16 "></span></a>│   └── status.json        # Current workflow state
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17></a><a href=#__codelineno-1-17><span class=linenos data-linenos="17 "></span></a>└── .git/                  # Version control (project-specific)
</span></code></pre></div><h2 id=readwrite-access-patterns>Read/Write Access Patterns<a class=headerlink href=#readwrite-access-patterns title="Permanent link">&para;</a></h2><h3 id=read-operations>Read Operations<a class=headerlink href=#read-operations title="Permanent link">&para;</a></h3><ul><li><strong>Orchestrator → Project</strong>: Reads workflow state, backlog, and configuration</li><li><strong>TDD State Machine → Project</strong>: Reads TDD cycles, test results, and coverage</li><li><strong>Discord Bot → Project</strong>: Displays current workflow and TDD status</li><li><strong>Agents → Project</strong>: Access context for both workflow and TDD decision making</li><li><strong>Test File Manager → Project</strong>: Reads test files and execution results</li></ul><h3 id=write-operations>Write Operations<a class=headerlink href=#write-operations title="Permanent link">&para;</a></h3><ul><li><strong>Orchestrator → Project</strong>: Updates workflow state and project data</li><li><strong>TDD State Machine → Project</strong>: Updates TDD cycle state and test data</li><li><strong>Agents → Project</strong>: Persist workflow task results and TDD artifacts</li><li><strong>Discord Commands → Project</strong>: Modify backlogs, sprints, and TDD cycles</li><li><strong>Test Preservation → Project</strong>: Commit and promote test files</li></ul><h3 id=security-boundaries>Security Boundaries<a class=headerlink href=#security-boundaries title="Permanent link">&para;</a></h3><ul><li><strong>No Cross-Project Access</strong>: Agents cannot read other project data or TDD cycles</li><li><strong>Limited Write Scope</strong>: Only <code class="language-text highlight">.orch-state/</code> and <code class="language-text highlight">tests/tdd/</code> directories writable</li><li><strong>TDD Isolation</strong>: TDD cycles isolated per story to prevent test contamination</li><li><strong>Git Permissions</strong>: Standard repository access controls apply to both workflow and test data</li></ul><h2 id=state-synchronization>State Synchronization<a class=headerlink href=#state-synchronization title="Permanent link">&para;</a></h2><h3 id=dual-state-machine-coordination>Dual State Machine Coordination<a class=headerlink href=#dual-state-machine-coordination title="Permanent link">&para;</a></h3><pre class=mermaid><code>stateDiagram-v2
    [*] --&gt; IDLE
    
    state "Workflow States" as WF {
        IDLE --&gt; BACKLOG_READY: /epic
        BACKLOG_READY --&gt; SPRINT_PLANNED: /sprint plan
        SPRINT_PLANNED --&gt; SPRINT_ACTIVE: /sprint start
        SPRINT_ACTIVE --&gt; SPRINT_REVIEW: /sprint status
        SPRINT_REVIEW --&gt; IDLE: /feedback
    }
    
    state "TDD States (Per Story)" as TDD {
        [*] --&gt; DESIGN
        DESIGN --&gt; TEST_RED: /tdd test
        TEST_RED --&gt; CODE_GREEN: /tdd commit-tests
        CODE_GREEN --&gt; REFACTOR: /tdd commit-code
        REFACTOR --&gt; COMMIT: /tdd commit-refactor
        COMMIT --&gt; [*]
    }
    
    SPRINT_ACTIVE --&gt; TDD: Story TDD cycles
    TDD --&gt; SPRINT_REVIEW: All stories complete
    
    note right of WF
        Workflow state stored in
        .orch-state/status.json
    end note
    
    note right of TDD
        TDD state stored in
        .orch-state/tdd/cycles/
    end note</code></pre><h3 id=multi-project-coordination>Multi-Project Coordination<a class=headerlink href=#multi-project-coordination title="Permanent link">&para;</a></h3><ul><li><strong>Independent Dual States</strong>: Each project has own workflow and TDD state machines</li><li><strong>Parallel Execution</strong>: Multiple projects and TDD cycles can be active simultaneously</li><li><strong>Resource Sharing</strong>: Agents allocated per project and TDD phase needs</li><li><strong>Conflict Prevention</strong>: Discord channels provide isolation for both workflow and TDD commands</li><li><strong>TDD Isolation</strong>: TDD cycles per story prevent cross-story test contamination</li></ul><h2 id=data-consistency>Data Consistency<a class=headerlink href=#data-consistency title="Permanent link">&para;</a></h2><h3 id=eventual-consistency-model>Eventual Consistency Model<a class=headerlink href=#eventual-consistency-model title="Permanent link">&para;</a></h3><ul><li><strong>Local Consistency</strong>: Each project maintains internal consistency for both workflow and TDD data</li><li><strong>Dual State Consistency</strong>: Workflow and TDD state machines maintain synchronized state</li><li><strong>Global Coordination</strong>: Orchestrator ensures cross-project resource allocation and TDD cycle coordination</li><li><strong>Conflict Resolution</strong>: Manual intervention for complex workflow and TDD scenarios</li></ul><h3 id=transaction-boundaries>Transaction Boundaries<a class=headerlink href=#transaction-boundaries title="Permanent link">&para;</a></h3><ul><li><strong>Single Project</strong>: ACID properties maintained within project for both workflow and TDD data</li><li><strong>Cross Project</strong>: No transactions spanning projects or TDD cycles</li><li><strong>TDD Atomicity</strong>: TDD phase transitions are atomic within a story</li><li><strong>Rollback Strategy</strong>: Git provides rollback capabilities for both code and test artifacts</li></ul><h3 id=backup-and-recovery>Backup and Recovery<a class=headerlink href=#backup-and-recovery title="Permanent link">&para;</a></h3><ul><li><strong>Git History</strong>: Complete audit trail of all workflow and TDD changes</li><li><strong>State Recovery</strong>: Projects can be restored from any git commit including TDD state</li><li><strong>Test Preservation</strong>: TDD test artifacts preserved through git history</li><li><strong>Disaster Recovery</strong>: Projects portable between orchestration instances with full TDD history</li></ul><h2 id=performance-considerations>Performance Considerations<a class=headerlink href=#performance-considerations title="Permanent link">&para;</a></h2><h3 id=read-performance>Read Performance<a class=headerlink href=#read-performance title="Permanent link">&para;</a></h3><ul><li><strong>Local Access</strong>: Project and TDD data accessed directly from filesystem</li><li><strong>Caching Strategy</strong>: Orchestrator caches frequently accessed workflow and TDD state</li><li><strong>Lazy Loading</strong>: Project and TDD data loaded on-demand</li><li><strong>TDD State Optimization</strong>: TDD cycles loaded only when stories are active</li></ul><h3 id=write-performance>Write Performance<a class=headerlink href=#write-performance title="Permanent link">&para;</a></h3><ul><li><strong>Batched Writes</strong>: Multiple workflow and TDD changes combined into single commits</li><li><strong>Asynchronous Operations</strong>: Non-blocking writes to project repositories and TDD storage</li><li><strong>Conflict Avoidance</strong>: Structured data minimizes merge conflicts for both workflow and TDD data</li><li><strong>Test File Efficiency</strong>: Test files written incrementally during TDD phases</li></ul><h3 id=scalability>Scalability<a class=headerlink href=#scalability title="Permanent link">&para;</a></h3><ul><li><strong>Horizontal Scaling</strong>: Add projects and TDD cycles without affecting others</li><li><strong>Resource Isolation</strong>: Per-project and per-story resource allocation</li><li><strong>Network Efficiency</strong>: Local filesystem access minimizes I/O for both workflow and test data</li><li><strong>TDD Parallelization</strong>: Multiple TDD cycles can run simultaneously across stories</li></ul><h2 id=monitoring-and-observability>Monitoring and Observability<a class=headerlink href=#monitoring-and-observability title="Permanent link">&para;</a></h2><h3 id=data-flow-metrics>Data Flow Metrics<a class=headerlink href=#data-flow-metrics title="Permanent link">&para;</a></h3><ul><li><strong>Command Latency</strong>: Time from Discord to project and TDD updates</li><li><strong>State Transition Frequency</strong>: Workflow and TDD progression rates</li><li><strong>Error Rates</strong>: Failed operations per project and TDD cycle</li><li><strong>TDD Cycle Metrics</strong>: Time spent in each TDD phase, test coverage progression</li><li><strong>Test Preservation Success</strong>: Rate of successful test file lifecycle management</li></ul><h3 id=audit-trail>Audit Trail<a class=headerlink href=#audit-trail title="Permanent link">&para;</a></h3><ul><li><strong>Git History</strong>: All workflow and TDD changes tracked in version control</li><li><strong>Discord Logs</strong>: Command execution history for both workflow and TDD commands</li><li><strong>Agent Logs</strong>: Detailed task execution traces including TDD phase transitions</li><li><strong>TDD Logs</strong>: Test creation, execution, and preservation activities</li><li><strong>Test Result History</strong>: Complete test execution timeline and results</li></ul><h3 id=health-checks>Health Checks<a class=headerlink href=#health-checks title="Permanent link">&para;</a></h3><ul><li><strong>Project Repository</strong>: Git status and filesystem health for both workflow and test data</li><li><strong>Data Integrity</strong>: JSON schema validation for workflow and TDD state</li><li><strong>State Consistency</strong>: Dual state machine validation and synchronization</li><li><strong>Test File Integrity</strong>: Verification of test file preservation and promotion</li><li><strong>TDD Cycle Health</strong>: Detection of stuck TDD cycles and automated recovery</li></ul><aside class=md-source-file><span class=md-source-file__fact><span class=md-icon title="Last update"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="June 18, 2025 00:47:19 UTC">June 18, 2025 00:47:19</span></span><span class=md-source-file__fact><span class=md-icon title=Created><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="June 17, 2025 15:20:12 UTC">June 17, 2025 15:20:12</span></span></aside><form class=md-feedback name=feedback hidden><fieldset><legend class=md-feedback__title> Was this page helpful? </legend><div class=md-feedback__inner><div class=md-feedback__list><button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg></button><button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg></button></div><div class=md-feedback__note><div data-md-value=1 hidden> Thanks for your feedback! </div><div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by <a href="https://github.com/jmontp/agent-workflow/issues/new/?title=[Feedback]+Data%20Flow+-+/advanced/data-flow/" target=_blank rel=noopener>telling us what you found confusing</a>. </div></div></div></fieldset></form></article></div><script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type=button class="md-top md-icon" data-md-component=top hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a href=../component/ class="md-footer__link md-footer__link--prev" aria-label="Previous: System Components"><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg></div><div class=md-footer__title><span class=md-footer__direction> Previous </span><div class=md-ellipsis> System Components </div></div></a><a href=../orchestration-repo/ class="md-footer__link md-footer__link--next" aria-label="Next: Orchestration Repository"><div class=md-footer__title><span class=md-footer__direction> Next </span><div class=md-ellipsis> Orchestration Repository </div></div><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></div></a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright></div><div class=md-social><a href=https://github.com/jmontp/agent-workflow target=_blank rel=noopener title="GitHub Repository" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></a><a href=https://jmontp.github.io/agent-workflow/ target=_blank rel=noopener title="Documentation Site" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a><a href=https://discord.gg/your-discord-server target=_blank rel=noopener title="Discord Community" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8"/></svg></a><a href=https://github.com/sponsors/jmontp target=_blank rel=noopener title=Sponsor class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53z"/></svg></a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><div class=md-progress data-md-component=progress role=progressbar></div><div class=md-consent data-md-component=consent id=__consent hidden><div class=md-consent__overlay></div><aside class=md-consent__inner><form class="md-consent__form md-grid md-typeset" name=consent><h4>Cookie consent</h4><p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p><input class=md-toggle type=checkbox id=__settings><div class=md-consent__settings><ul class=task-list><li class=task-list-item><label class=task-list-control><input type=checkbox name=analytics checked><span class=task-list-indicator></span> Google Analytics </label></li><li class=task-list-item><label class=task-list-control><input type=checkbox name=github checked><span class=task-list-indicator></span> GitHub </label></li></ul></div><div class=md-consent__controls><button class="md-button md-button--primary">Accept</button><button type=reset class="md-button md-button--primary">Reject</button><label class=md-button for=__settings>Manage settings</label></div></form></aside></div><script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script><script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": {"API": "api", "Architecture": "architecture", "CSS": "css", "Discord": "discord", "HTML5": "html", "JavaScript": "js", "Python": "python", "Scrum": "scrum", "TDD": "tdd"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script><script src=../../assets/javascripts/bundle.13a4f30d.min.js></script><script src=https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mtml-chtml.js></script><script src=../../js/mermaid-zoom.js></script><script src=../../js/universal-search.js></script><script src=../../js/enhanced-navigation.js></script><script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body></html>