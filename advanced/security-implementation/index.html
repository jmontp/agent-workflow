<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Human-In-The-Loop orchestration framework for AI-assisted software development"><meta name=author content="AI Agent Workflow Team"><link href=https://jmontp.github.io/agent-workflow/advanced/security-implementation/ rel=canonical><link href=../project-repo/ rel=prev><link href=../testing/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>Security Implementation - AI Agent TDD-Scrum Workflow</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><style>:root{.md-tag{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M5.5%207A1.5%201.5%200%200%201%204%205.5%201.5%201.5%200%200%201%205.5%204%201.5%201.5%200%200%201%207%205.5%201.5%201.5%200%200%201%205.5%207m15.91%204.58-9-9C12.05%202.22%2011.55%202%2011%202H4c-1.11%200-2%20.89-2%202v7c0%20.55.22%201.05.59%201.41l8.99%209c.37.36.87.59%201.42.59s1.05-.23%201.41-.59l7-7c.37-.36.59-.86.59-1.41%200-.56-.23-1.06-.59-1.42%22/%3E%3C/svg%3E');}.md-tag.md-tag--html{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m12%2017.56%204.07-1.13.55-6.1H9.38L9.2%208.3h7.6l.2-1.99H7l.56%206.01h6.89l-.23%202.58-2.22.6-2.22-.6-.14-1.66h-2l.29%203.19zM4.07%203h15.86L18.5%2019.2%2012%2021l-6.5-1.8z%22/%3E%3C/svg%3E');}.md-tag.md-tag--js{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M3%203h18v18H3zm4.73%2015.04c.4.85%201.19%201.55%202.54%201.55%201.5%200%202.53-.8%202.53-2.55v-5.78h-1.7V17c0%20.86-.35%201.08-.9%201.08-.58%200-.82-.4-1.09-.87zm5.98-.18c.5.98%201.51%201.73%203.09%201.73%201.6%200%202.8-.83%202.8-2.36%200-1.41-.81-2.04-2.25-2.66l-.42-.18c-.73-.31-1.04-.52-1.04-1.02%200-.41.31-.73.81-.73.48%200%20.8.21%201.09.73l1.31-.87c-.55-.96-1.33-1.33-2.4-1.33-1.51%200-2.48.96-2.48%202.23%200%201.38.81%202.03%202.03%202.55l.42.18c.78.34%201.24.55%201.24%201.13%200%20.48-.45.83-1.15.83-.83%200-1.31-.43-1.67-1.03z%22/%3E%3C/svg%3E');}.md-tag.md-tag--css{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m5%203-.65%203.34h13.59L17.5%208.5H3.92l-.66%203.33h13.59l-.76%203.81-5.48%201.81-4.75-1.81.33-1.64H2.85l-.79%204%207.85%203%209.05-3%201.2-6.03.24-1.21L21.94%203z%22/%3E%3C/svg%3E');}.md-tag.md-tag--python{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M19.14%207.5A2.86%202.86%200%200%201%2022%2010.36v3.78A2.86%202.86%200%200%201%2019.14%2017H12c0%20.39.32.96.71.96H17v1.68a2.86%202.86%200%200%201-2.86%202.86H9.86A2.86%202.86%200%200%201%207%2019.64v-3.75a2.85%202.85%200%200%201%202.86-2.85h5.25a2.85%202.85%200%200%200%202.85-2.86V7.5zm-4.28%2011.79c-.4%200-.72.3-.72.89s.32.71.72.71a.71.71%200%200%200%20.71-.71c0-.59-.32-.89-.71-.89m-10-1.79A2.86%202.86%200%200%201%202%2014.64v-3.78A2.86%202.86%200%200%201%204.86%208H12c0-.39-.32-.96-.71-.96H7V5.36A2.86%202.86%200%200%201%209.86%202.5h4.28A2.86%202.86%200%200%201%2017%205.36v3.75a2.85%202.85%200%200%201-2.86%202.85H8.89a2.85%202.85%200%200%200-2.85%202.86v2.68zM9.14%205.71c.4%200%20.72-.3.72-.89s-.32-.71-.72-.71c-.39%200-.71.12-.71.71s.32.89.71.89%22/%3E%3C/svg%3E');}}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><link rel=stylesheet href=../../stylesheets/enhanced-navigation.css><link rel=stylesheet href=../../stylesheets/color-schemes.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head><body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=black><input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off><input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off><label class=md-overlay for=__drawer></label><div data-md-component=skip><a href=#security-architecture class=md-skip> Skip to content </a></div><div data-md-component=announce></div><div data-md-color-scheme=default data-md-component=outdated hidden></div><header class="md-header md-header--shadow md-header--lifted" data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a href=../.. title="AI Agent TDD-Scrum Workflow" class="md-header__button md-logo" aria-label="AI Agent TDD-Scrum Workflow" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a><label class="md-header__button md-icon" for=__drawer><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> AI Agent TDD-Scrum Workflow </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> Security Implementation </span></div></div></div><div class=md-header__option><div class=md-select><button class="md-header__button md-icon" aria-label="Select language"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg></button><div class=md-select__inner><ul class=md-select__list><li class=md-select__item><a href=../../ hreflang=en class=md-select__link> English </a></li></ul></div></div></div><label class="md-header__button md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required><label class="md-search__icon md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg></label><nav class=md-search__options aria-label=Search><a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg></a><button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap tabindex=0 data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta> Initializing search </div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a href=https://github.com/jmontp/agent-workflow title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></div><div class=md-source__repository> jmontp/agent-workflow </div></a></div></nav><nav class=md-tabs aria-label=Tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a href=../.. class=md-tabs__link> 🏠 Home </a></li><li class=md-tabs__item><a href=../../getting-started/ class=md-tabs__link> ⚡ Getting Started </a></li><li class=md-tabs__item><a href=../../user-guide/ class=md-tabs__link> 📊 User Guide </a></li><li class=md-tabs__item><a href=../../concepts/ class=md-tabs__link> 🎯 Core Concepts </a></li><li class=md-tabs__item><a href=../../architecture/ class=md-tabs__link> 🔥 Architecture </a></li><li class="md-tabs__item md-tabs__item--active"><a href=../ class=md-tabs__link> ⚡ Advanced Topics </a></li><li class=md-tabs__item><a href=../../planning/ class=md-tabs__link> 🎨 Planning & Design </a></li><li class=md-tabs__item><a href=../../development/ class=md-tabs__link> 📊 Development </a></li><li class=md-tabs__item><a href=../../deployment/ class=md-tabs__link> 🔥 Deployment </a></li><li class=md-tabs__item><a href=../../templates/ class=md-tabs__link> 📋 Templates </a></li><li class=md-tabs__item><a href=../../theme-integration-guide/ class=md-tabs__link> 🎨 Theme Integration </a></li></ul></div></nav></header><div class=md-container data-md-component=container><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a href=../.. title="AI Agent TDD-Scrum Workflow" class="md-nav__button md-logo" aria-label="AI Agent TDD-Scrum Workflow" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a> AI Agent TDD-Scrum Workflow </label><div class=md-nav__source><a href=https://github.com/jmontp/agent-workflow title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></div><div class=md-source__repository> jmontp/agent-workflow </div></a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../.. class=md-nav__link><span class=md-ellipsis> 🏠 Home </span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../getting-started/ class=md-nav__link><span class=md-ellipsis> ⚡ Getting Started </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../user-guide/ class=md-nav__link><span class=md-ellipsis> 📊 User Guide </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../concepts/ class=md-nav__link><span class=md-ellipsis> 🎯 Core Concepts </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../architecture/ class=md-nav__link><span class=md-ellipsis> 🔥 Architecture </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked><div class="md-nav__link md-nav__container"><a href=../ class="md-nav__link "><span class=md-ellipsis> ⚡ Advanced Topics </span></a><label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true><label class=md-nav__title for=__nav_6><span class="md-nav__icon md-icon"></span> ⚡ Advanced Topics </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../context/ class=md-nav__link><span class=md-ellipsis> Context Diagram </span></a></li><li class=md-nav__item><a href=../architecture-detailed/ class=md-nav__link><span class=md-ellipsis> Detailed Architecture </span></a></li><li class=md-nav__item><a href=../container/ class=md-nav__link><span class=md-ellipsis> Container Architecture </span></a></li><li class=md-nav__item><a href=../component/ class=md-nav__link><span class=md-ellipsis> System Components </span></a></li><li class=md-nav__item><a href=../data-flow/ class=md-nav__link><span class=md-ellipsis> Data Flow </span></a></li><li class=md-nav__item><a href=../orchestration-repo/ class=md-nav__link><span class=md-ellipsis> Orchestration Repository </span></a></li><li class=md-nav__item><a href=../project-repo/ class=md-nav__link><span class=md-ellipsis> Project Repository </span></a></li><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type=checkbox id=__toc><label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> Security Implementation </span><span class="md-nav__icon md-icon"></span></label><a href=./ class="md-nav__link md-nav__link--active"><span class=md-ellipsis> Security Implementation </span></a><nav class="md-nav md-nav--secondary" aria-label="On this page"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> On this page </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#overview class=md-nav__link><span class=md-ellipsis> Overview </span></a></li><li class=md-nav__item><a href=#agent-security-model class=md-nav__link><span class=md-ellipsis> Agent Security Model </span></a><nav class=md-nav aria-label="Agent Security Model"><ul class=md-nav__list><li class=md-nav__item><a href=#command-access-control class=md-nav__link><span class=md-ellipsis> Command Access Control </span></a></li><li class=md-nav__item><a href=#enhanced-agent-access-matrix-with-tdd-capabilities class=md-nav__link><span class=md-ellipsis> Enhanced Agent Access Matrix (with TDD Capabilities) </span></a></li></ul></nav></li><li class=md-nav__item><a href=#security-implementation class=md-nav__link><span class=md-ellipsis> Security Implementation </span></a><nav class=md-nav aria-label="Security Implementation"><ul class=md-nav__list><li class=md-nav__item><a href=#1-tool-restriction-enforcement class=md-nav__link><span class=md-ellipsis> 1. Tool Restriction Enforcement </span></a></li><li class=md-nav__item><a href=#2-command-categories class=md-nav__link><span class=md-ellipsis> 2. Command Categories </span></a></li><li class=md-nav__item><a href=#3-security-validation class=md-nav__link><span class=md-ellipsis> 3. Security Validation </span></a></li></ul></nav></li><li class=md-nav__item><a href=#data-protection class=md-nav__link><span class=md-ellipsis> Data Protection </span></a><nav class=md-nav aria-label="Data Protection"><ul class=md-nav__list><li class=md-nav__item><a href=#1-enhanced-state-management-security class=md-nav__link><span class=md-ellipsis> 1. Enhanced State Management Security </span></a></li><li class=md-nav__item><a href=#2-environment-security class=md-nav__link><span class=md-ellipsis> 2. Environment Security </span></a></li><li class=md-nav__item><a href=#3-secret-management class=md-nav__link><span class=md-ellipsis> 3. Secret Management </span></a></li></ul></nav></li><li class=md-nav__item><a href=#authentication-authorization class=md-nav__link><span class=md-ellipsis> Authentication &amp; Authorization </span></a><nav class=md-nav aria-label="Authentication & Authorization"><ul class=md-nav__list><li class=md-nav__item><a href=#1-discord-bot-security class=md-nav__link><span class=md-ellipsis> 1. Discord Bot Security </span></a></li><li class=md-nav__item><a href=#2-project-level-permissions class=md-nav__link><span class=md-ellipsis> 2. Project-Level Permissions </span></a></li></ul></nav></li><li class=md-nav__item><a href=#input-validation-sanitization class=md-nav__link><span class=md-ellipsis> Input Validation &amp; Sanitization </span></a><nav class=md-nav aria-label="Input Validation & Sanitization"><ul class=md-nav__list><li class=md-nav__item><a href=#1-enhanced-command-validation class=md-nav__link><span class=md-ellipsis> 1. Enhanced Command Validation </span></a></li><li class=md-nav__item><a href=#2-dual-state-machine-validation class=md-nav__link><span class=md-ellipsis> 2. Dual State Machine Validation </span></a></li></ul></nav></li><li class=md-nav__item><a href=#audit-monitoring class=md-nav__link><span class=md-ellipsis> Audit &amp; Monitoring </span></a><nav class=md-nav aria-label="Audit & Monitoring"><ul class=md-nav__list><li class=md-nav__item><a href=#1-security-logging class=md-nav__link><span class=md-ellipsis> 1. Security Logging </span></a></li><li class=md-nav__item><a href=#2-access-monitoring class=md-nav__link><span class=md-ellipsis> 2. Access Monitoring </span></a></li></ul></nav></li><li class=md-nav__item><a href=#threat-model-mitigations class=md-nav__link><span class=md-ellipsis> Threat Model &amp; Mitigations </span></a><nav class=md-nav aria-label="Threat Model & Mitigations"><ul class=md-nav__list><li class=md-nav__item><a href=#1-enhanced-threat-model-with-tdd-considerations class=md-nav__link><span class=md-ellipsis> 1. Enhanced Threat Model (with TDD Considerations) </span></a></li><li class=md-nav__item><a href=#2-security-controls class=md-nav__link><span class=md-ellipsis> 2. Security Controls </span></a></li></ul></nav></li><li class=md-nav__item><a href=#security-testing class=md-nav__link><span class=md-ellipsis> Security Testing </span></a><nav class=md-nav aria-label="Security Testing"><ul class=md-nav__list><li class=md-nav__item><a href=#1-enhanced-automated-security-tests class=md-nav__link><span class=md-ellipsis> 1. Enhanced Automated Security Tests </span></a></li><li class=md-nav__item><a href=#2-enhanced-security-test-categories class=md-nav__link><span class=md-ellipsis> 2. Enhanced Security Test Categories </span></a></li></ul></nav></li><li class=md-nav__item><a href=#security-configuration class=md-nav__link><span class=md-ellipsis> Security Configuration </span></a><nav class=md-nav aria-label="Security Configuration"><ul class=md-nav__list><li class=md-nav__item><a href=#1-enhanced-agent-security-profiles-with-tdd-support class=md-nav__link><span class=md-ellipsis> 1. Enhanced Agent Security Profiles (with TDD Support) </span></a></li><li class=md-nav__item><a href=#2-enhanced-environment-security-settings-with-tdd-support class=md-nav__link><span class=md-ellipsis> 2. Enhanced Environment Security Settings (with TDD Support) </span></a></li></ul></nav></li><li class=md-nav__item><a href=#best-practices class=md-nav__link><span class=md-ellipsis> Best Practices </span></a><nav class=md-nav aria-label="Best Practices"><ul class=md-nav__list><li class=md-nav__item><a href=#1-development-security class=md-nav__link><span class=md-ellipsis> 1. Development Security </span></a></li><li class=md-nav__item><a href=#2-operational-security class=md-nav__link><span class=md-ellipsis> 2. Operational Security </span></a></li><li class=md-nav__item><a href=#3-monitoring-alerting class=md-nav__link><span class=md-ellipsis> 3. Monitoring &amp; Alerting </span></a></li></ul></nav></li><li class=md-nav__item><a href=#compliance-considerations class=md-nav__link><span class=md-ellipsis> Compliance Considerations </span></a><nav class=md-nav aria-label="Compliance Considerations"><ul class=md-nav__list><li class=md-nav__item><a href=#1-data-privacy class=md-nav__link><span class=md-ellipsis> 1. Data Privacy </span></a></li><li class=md-nav__item><a href=#2-access-controls class=md-nav__link><span class=md-ellipsis> 2. Access Controls </span></a></li></ul></nav></li></ul></nav></li><li class=md-nav__item><a href=../testing/ class=md-nav__link><span class=md-ellipsis> Testing Strategy </span></a></li><li class=md-nav__item><a href=../code/ class=md-nav__link><span class=md-ellipsis> Code Structure </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../planning/ class=md-nav__link><span class=md-ellipsis> 🎨 Planning & Design </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../development/ class=md-nav__link><span class=md-ellipsis> 📊 Development </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../deployment/ class=md-nav__link><span class=md-ellipsis> 🔥 Deployment </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../templates/ class=md-nav__link><span class=md-ellipsis> 📋 Templates </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../theme-integration-guide/ class=md-nav__link><span class=md-ellipsis> 🎨 Theme Integration </span><span class="md-nav__icon md-icon"></span></a></li></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><a href=https://github.com/jmontp/agent-workflow/edit/master/docs/advanced/security-implementation.md title="Edit this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg></a><a href=https://github.com/jmontp/agent-workflow/raw/master/docs/advanced/security-implementation.md title="View source of this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg></a><h1 id=security-architecture>Security Architecture<a class=headerlink href=#security-architecture title="Permanent link">&para;</a></h1><h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2><p>The AI Agent TDD-Scrum Workflow system implements comprehensive security measures to ensure safe operation of AI agents with appropriate access controls and data protection. This includes enhanced security boundaries for Test-Driven Development workflows, test file access controls, and TDD-specific agent restrictions.</p><h2 id=agent-security-model>Agent Security Model<a class=headerlink href=#agent-security-model title="Permanent link">&para;</a></h2><h3 id=command-access-control>Command Access Control<a class=headerlink href=#command-access-control title="Permanent link">&para;</a></h3><p>Each agent type operates under the <strong>Principle of Least Privilege</strong>, with access restricted to only the tools necessary for their specific function.</p><pre class=mermaid><code>graph LR
    subgraph "Agent Security Layers"
        Claude[Claude Code CLI]
        Config[Agent Tool Config]
        Validation[Access Validation]
    end
    
    subgraph "Agent Types"
        Orchestrator[Orchestrator&lt;br/&gt;Full Access]
        Code[Code Agent&lt;br/&gt;Edit + Commit]
        Design[Design Agent&lt;br/&gt;Read Only]
        QA[QA Agent&lt;br/&gt;Test Only]
        Data[Data Agent&lt;br/&gt;Analysis Only]
    end
    
    Claude --&gt; Config
    Config --&gt; Validation
    Validation --&gt; Orchestrator
    Validation --&gt; Code
    Validation --&gt; Design
    Validation --&gt; QA
    Validation --&gt; Data</code></pre><h3 id=enhanced-agent-access-matrix-with-tdd-capabilities>Enhanced Agent Access Matrix (with TDD Capabilities)<a class=headerlink href=#enhanced-agent-access-matrix-with-tdd-capabilities title="Permanent link">&para;</a></h3><table><thead><tr><th>Tool Category</th><th>Orchestrator</th><th>Code Agent (TDD)</th><th>Design Agent (TDD)</th><th>QA Agent (TDD)</th><th>Data Agent</th></tr></thead><tbody><tr><td><strong>File Operations</strong></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Read files</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>Write new files</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>Edit existing code</td><td>✅</td><td>✅</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td>Delete files</td><td>✅</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td><strong>TDD-Specific File Operations</strong></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Create test files</td><td>✅</td><td>✅</td><td>❌</td><td>✅</td><td>❌</td></tr><tr><td>Edit test files</td><td>✅</td><td>✅ (during CODE_GREEN)</td><td>❌</td><td>✅ (during TEST_RED)</td><td>❌</td></tr><tr><td>Preserve test files</td><td>✅</td><td>✅</td><td>❌</td><td>✅</td><td>❌</td></tr><tr><td>Promote test files</td><td>✅</td><td>✅</td><td>❌</td><td>✅</td><td>❌</td></tr><tr><td>Delete test files</td><td>✅</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td><strong>Version Control</strong></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Git status/diff</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>❌</td></tr><tr><td>Git add/commit</td><td>✅</td><td>✅</td><td>❌</td><td>✅ (tests only)</td><td>❌</td></tr><tr><td>Git push</td><td>✅</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td><strong>TDD-Specific Version Control</strong></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Commit failing tests</td><td>✅</td><td>❌</td><td>❌</td><td>✅</td><td>❌</td></tr><tr><td>Commit code with tests</td><td>✅</td><td>✅</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td>Commit refactored code</td><td>✅</td><td>✅</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td><strong>Testing &amp; Analysis</strong></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Run tests</td><td>✅</td><td>✅</td><td>❌</td><td>✅</td><td>❌</td></tr><tr><td>Code quality tools</td><td>✅</td><td>✅</td><td>❌</td><td>✅</td><td>❌</td></tr><tr><td><strong>TDD-Specific Testing</strong></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Create failing tests</td><td>✅</td><td>❌</td><td>❌</td><td>✅</td><td>❌</td></tr><tr><td>Validate test failures</td><td>✅</td><td>✅</td><td>❌</td><td>✅</td><td>❌</td></tr><tr><td>Test coverage analysis</td><td>✅</td><td>✅</td><td>❌</td><td>✅</td><td>✅</td></tr><tr><td><strong>System Operations</strong></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Package management</td><td>✅</td><td>✅ (limited)</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td>Process management</td><td>✅</td><td>❌</td><td>❌</td><td>❌</td><td>❌</td></tr><tr><td>Network access</td><td>✅</td><td>❌</td><td>✅ (research)</td><td>❌</td><td>❌</td></tr></tbody></table><h2 id=security-implementation>Security Implementation<a class=headerlink href=#security-implementation title="Permanent link">&para;</a></h2><h3 id=1-tool-restriction-enforcement>1. Tool Restriction Enforcement<a class=headerlink href=#1-tool-restriction-enforcement title="Permanent link">&para;</a></h3><p>The system leverages Claude Code's built-in security flags:</p><div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><a href=#__codelineno-0-1><span class=linenos data-linenos="1 "></span></a>claude<span class=w> </span>--allowedTools<span class=w> </span><span class=s2>&quot;Read Write Glob&quot;</span><span class=w> </span>--disallowedTools<span class=w> </span><span class=s2>&quot;Bash(rm) Edit&quot;</span>
</span></code></pre></div><p><strong>Architecture Components:</strong></p><ul><li><strong><code class="language-text highlight">agent_tool_config.py</code></strong>: Centralized security configuration</li><li><strong>Enhanced Claude Client</strong>: Automatic tool restriction application</li><li><strong>Agent Integration</strong>: Transparent security enforcement</li></ul><h3 id=2-command-categories>2. Command Categories<a class=headerlink href=#2-command-categories title="Permanent link">&para;</a></h3><h4 id=restricted-commands-blocked-for-most-agents>Restricted Commands (Blocked for Most Agents)<a class=headerlink href=#restricted-commands-blocked-for-most-agents title="Permanent link">&para;</a></h4><ul><li><code class="language-text highlight">sudo</code>, <code class="language-text highlight">su</code> - Privilege escalation</li><li><code class="language-text highlight">chmod</code>, <code class="language-text highlight">chown</code> - Permission changes</li><li><code class="language-text highlight">kill</code>, <code class="language-text highlight">killall</code> - Process termination</li><li><code class="language-text highlight">curl</code>, <code class="language-text highlight">wget</code> - Network downloads</li><li><code class="language-text highlight">ssh</code>, <code class="language-text highlight">scp</code> - Remote access</li><li><code class="language-text highlight">docker run</code> - Container operations</li></ul><h4 id=elevated-commands-orchestrator-only>Elevated Commands (Orchestrator Only)<a class=headerlink href=#elevated-commands-orchestrator-only title="Permanent link">&para;</a></h4><ul><li><code class="language-text highlight">rm</code>, <code class="language-text highlight">rmdir</code> - File deletion</li><li><code class="language-text highlight">git push</code> - Publishing changes</li></ul><h4 id=code-management-commands-orchestrator-code-agent>Code Management Commands (Orchestrator + Code Agent)<a class=headerlink href=#code-management-commands-orchestrator-code-agent title="Permanent link">&para;</a></h4><ul><li><code class="language-text highlight">git commit</code> - Version control commits</li><li><code class="language-text highlight">git add</code> - Stage changes</li><li><code class="language-text highlight">git reset</code> - Reset changes</li></ul><h3 id=3-security-validation>3. Security Validation<a class=headerlink href=#3-security-validation title="Permanent link">&para;</a></h3><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a><a href=#__codelineno-1-1><span class=linenos data-linenos="1 "></span></a><span class=kn>from</span> <span class=nn>lib.agent_tool_config</span> <span class=kn>import</span> <span class=n>validate_agent_access</span><span class=p>,</span> <span class=n>AgentType</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a><a href=#__codelineno-1-2><span class=linenos data-linenos="2 "></span></a>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a><a href=#__codelineno-1-3><span class=linenos data-linenos="3 "></span></a><span class=c1># Runtime validation</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a><a href=#__codelineno-1-4><span class=linenos data-linenos="4 "></span></a><span class=n>can_commit</span> <span class=o>=</span> <span class=n>validate_agent_access</span><span class=p>(</span><span class=n>AgentType</span><span class=o>.</span><span class=n>CODE</span><span class=p>,</span> <span class=s2>&quot;Bash(git commit)&quot;</span><span class=p>)</span>  <span class=c1># ✅ True</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><a href=#__codelineno-1-5><span class=linenos data-linenos="5 "></span></a><span class=n>can_delete</span> <span class=o>=</span> <span class=n>validate_agent_access</span><span class=p>(</span><span class=n>AgentType</span><span class=o>.</span><span class=n>CODE</span><span class=p>,</span> <span class=s2>&quot;Bash(rm)&quot;</span><span class=p>)</span>          <span class=c1># ❌ False</span>
</span></code></pre></div><h2 id=data-protection>Data Protection<a class=headerlink href=#data-protection title="Permanent link">&para;</a></h2><h3 id=1-enhanced-state-management-security>1. Enhanced State Management Security<a class=headerlink href=#1-enhanced-state-management-security title="Permanent link">&para;</a></h3><ul><li><strong>No Sensitive Data</strong>: State files contain only workflow and TDD metadata</li><li><strong>Dual State Storage</strong>: </li><li>Workflow state persisted in <code class="language-text highlight">.orch-state/status.json</code></li><li>TDD state persisted in <code class="language-text highlight">.orch-state/tdd/</code></li><li><strong>Project Isolation</strong>: Independent workflow and TDD state per project</li><li><strong>Story-Level TDD Isolation</strong>: TDD cycles isolated per story to prevent cross-contamination</li><li><strong>Access Control</strong>: File system permissions protect both workflow and TDD state</li><li><strong>Test File Protection</strong>: Test files in <code class="language-text highlight">tests/tdd/</code> protected from unauthorized modification</li></ul><h3 id=2-environment-security>2. Environment Security<a class=headerlink href=#2-environment-security title="Permanent link">&para;</a></h3><div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a><a href=#__codelineno-2-1><span class=linenos data-linenos="1 "></span></a><span class=c1># Required environment variables</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a><a href=#__codelineno-2-2><span class=linenos data-linenos="2 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>DISCORD_BOT_TOKEN</span><span class=o>=</span><span class=s2>&quot;your_token_here&quot;</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a><a href=#__codelineno-2-3><span class=linenos data-linenos="3 "></span></a>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4></a><a href=#__codelineno-2-4><span class=linenos data-linenos="4 "></span></a><span class=c1># Optional: Restrict Claude Code directory access</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5></a><a href=#__codelineno-2-5><span class=linenos data-linenos="5 "></span></a>claude<span class=w> </span>--add-dir<span class=w> </span>./project-dir
</span></code></pre></div><h3 id=3-secret-management>3. Secret Management<a class=headerlink href=#3-secret-management title="Permanent link">&para;</a></h3><ul><li><strong>Environment Variables</strong>: All secrets stored as env vars</li><li><strong>No Hardcoded Secrets</strong>: Code contains no embedded credentials</li><li><strong>Token Rotation</strong>: Support for rotating API tokens</li><li><strong>Audit Logging</strong>: All credential usage logged</li></ul><h2 id=authentication-authorization>Authentication &amp; Authorization<a class=headerlink href=#authentication-authorization title="Permanent link">&para;</a></h2><h3 id=1-discord-bot-security>1. Discord Bot Security<a class=headerlink href=#1-discord-bot-security title="Permanent link">&para;</a></h3><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a><a href=#__codelineno-3-1><span class=linenos data-linenos="1 "></span></a><span class=c1># Role-based access control</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2></a><a href=#__codelineno-3-2><span class=linenos data-linenos="2 "></span></a><span class=nd>@app_commands</span><span class=o>.</span><span class=n>command</span><span class=p>()</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3></a><a href=#__codelineno-3-3><span class=linenos data-linenos="3 "></span></a><span class=nd>@requires_role</span><span class=p>(</span><span class=s2>&quot;developer&quot;</span><span class=p>)</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4></a><a href=#__codelineno-3-4><span class=linenos data-linenos="4 "></span></a><span class=k>async</span> <span class=k>def</span> <span class=nf>sensitive_command</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>interaction</span><span class=p>):</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5></a><a href=#__codelineno-3-5><span class=linenos data-linenos="5 "></span></a>    <span class=c1># Only users with &#39;developer&#39; role can execute</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6></a><a href=#__codelineno-3-6><span class=linenos data-linenos="6 "></span></a>    <span class=k>pass</span>
</span></code></pre></div><h3 id=2-project-level-permissions>2. Project-Level Permissions<a class=headerlink href=#2-project-level-permissions title="Permanent link">&para;</a></h3><ul><li><strong>Channel Isolation</strong>: Each project has dedicated Discord channel</li><li><strong>User Permissions</strong>: Discord role-based access control</li><li><strong>Command Restrictions</strong>: Sensitive commands require elevated roles</li></ul><h2 id=input-validation-sanitization>Input Validation &amp; Sanitization<a class=headerlink href=#input-validation-sanitization title="Permanent link">&para;</a></h2><h3 id=1-enhanced-command-validation>1. Enhanced Command Validation<a class=headerlink href=#1-enhanced-command-validation title="Permanent link">&para;</a></h3><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1></a><a href=#__codelineno-4-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>def</span> <span class=nf>validate_epic_command</span><span class=p>(</span><span class=n>description</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2></a><a href=#__codelineno-4-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate epic description input&quot;&quot;&quot;</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3></a><a href=#__codelineno-4-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>description</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>500</span><span class=p>:</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4></a><a href=#__codelineno-4-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Epic description too long&quot;</span><span class=p>)</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5></a><a href=#__codelineno-4-5><span class=linenos data-linenos=" 5 "></span></a>    
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6></a><a href=#__codelineno-4-6><span class=linenos data-linenos=" 6 "></span></a>    <span class=c1># Prevent command injection</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7></a><a href=#__codelineno-4-7><span class=linenos data-linenos=" 7 "></span></a>    <span class=n>dangerous_chars</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;;&#39;</span><span class=p>,</span> <span class=s1>&#39;&amp;&amp;&#39;</span><span class=p>,</span> <span class=s1>&#39;||&#39;</span><span class=p>,</span> <span class=s1>&#39;`&#39;</span><span class=p>,</span> <span class=s1>&#39;$&#39;</span><span class=p>]</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8></a><a href=#__codelineno-4-8><span class=linenos data-linenos=" 8 "></span></a>    <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=n>char</span> <span class=ow>in</span> <span class=n>description</span> <span class=k>for</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>dangerous_chars</span><span class=p>):</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9></a><a href=#__codelineno-4-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Invalid characters in description&quot;</span><span class=p>)</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10></a><a href=#__codelineno-4-10><span class=linenos data-linenos="10 "></span></a>    
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11></a><a href=#__codelineno-4-11><span class=linenos data-linenos="11 "></span></a>    <span class=k>return</span> <span class=kc>True</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12></a><a href=#__codelineno-4-12><span class=linenos data-linenos="12 "></span></a>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13></a><a href=#__codelineno-4-13><span class=linenos data-linenos="13 "></span></a><span class=k>def</span> <span class=nf>validate_tdd_command</span><span class=p>(</span><span class=n>command</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>story_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>cycle</span><span class=p>:</span> <span class=n>TDDCycle</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14></a><a href=#__codelineno-4-14><span class=linenos data-linenos="14 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate TDD command input with cycle context&quot;&quot;&quot;</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15></a><a href=#__codelineno-4-15><span class=linenos data-linenos="15 "></span></a>    <span class=c1># Validate story ID format</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16></a><a href=#__codelineno-4-16><span class=linenos data-linenos="16 "></span></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^[A-Z0-9-]+$&#39;</span><span class=p>,</span> <span class=n>story_id</span><span class=p>):</span>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17></a><a href=#__codelineno-4-17><span class=linenos data-linenos="17 "></span></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Invalid story ID format&quot;</span><span class=p>)</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18></a><a href=#__codelineno-4-18><span class=linenos data-linenos="18 "></span></a>    
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19></a><a href=#__codelineno-4-19><span class=linenos data-linenos="19 "></span></a>    <span class=c1># Validate TDD command format</span>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20></a><a href=#__codelineno-4-20><span class=linenos data-linenos="20 "></span></a>    <span class=n>valid_tdd_commands</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;/tdd test&#39;</span><span class=p>,</span> <span class=s1>&#39;/tdd code&#39;</span><span class=p>,</span> <span class=s1>&#39;/tdd refactor&#39;</span><span class=p>,</span> <span class=s1>&#39;/tdd commit&#39;</span><span class=p>]</span>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21></a><a href=#__codelineno-4-21><span class=linenos data-linenos="21 "></span></a>    <span class=k>if</span> <span class=n>command</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>valid_tdd_commands</span><span class=p>:</span>
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22></a><a href=#__codelineno-4-22><span class=linenos data-linenos="22 "></span></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Invalid TDD command: </span><span class=si>{</span><span class=n>command</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23></a><a href=#__codelineno-4-23><span class=linenos data-linenos="23 "></span></a>    
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24></a><a href=#__codelineno-4-24><span class=linenos data-linenos="24 "></span></a>    <span class=c1># Validate against TDD state machine</span>
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25></a><a href=#__codelineno-4-25><span class=linenos data-linenos="25 "></span></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>cycle</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>cycle</span><span class=o>.</span><span class=n>current_state</span><span class=p>:</span>
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26></a><a href=#__codelineno-4-26><span class=linenos data-linenos="26 "></span></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Invalid TDD cycle state&quot;</span><span class=p>)</span>
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27></a><a href=#__codelineno-4-27><span class=linenos data-linenos="27 "></span></a>    
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28></a><a href=#__codelineno-4-28><span class=linenos data-linenos="28 "></span></a>    <span class=k>return</span> <span class=kc>True</span>
</span></code></pre></div><h3 id=2-dual-state-machine-validation>2. Dual State Machine Validation<a class=headerlink href=#2-dual-state-machine-validation title="Permanent link">&para;</a></h3><ul><li><strong>Workflow Command Sequencing</strong>: Only valid workflow commands allowed per state</li><li><strong>TDD Command Sequencing</strong>: TDD commands validated against TDD state and conditions</li><li><strong>Cross-State Validation</strong>: Workflow and TDD states validated for consistency</li><li><strong>Parameter Validation</strong>: All inputs validated before processing (workflow + TDD)</li><li><strong>Error Handling</strong>: Graceful failure with helpful error messages for both systems</li><li><strong>Test File Validation</strong>: Test file paths and contents validated for security</li></ul><h2 id=audit-monitoring>Audit &amp; Monitoring<a class=headerlink href=#audit-monitoring title="Permanent link">&para;</a></h2><h3 id=1-security-logging>1. Security Logging<a class=headerlink href=#1-security-logging title="Permanent link">&para;</a></h3><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a><a href=#__codelineno-5-1><span class=linenos data-linenos="1 "></span></a><span class=c1># Security-relevant events logged</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2></a><a href=#__codelineno-5-2><span class=linenos data-linenos="2 "></span></a><span class=n>logger</span><span class=o>.</span><span class=n>security</span><span class=p>(</span><span class=s2>&quot;Agent access granted&quot;</span><span class=p>,</span> <span class=n>extra</span><span class=o>=</span><span class=p>{</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3></a><a href=#__codelineno-5-3><span class=linenos data-linenos="3 "></span></a>    <span class=s2>&quot;agent_type&quot;</span><span class=p>:</span> <span class=s2>&quot;CodeAgent&quot;</span><span class=p>,</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4></a><a href=#__codelineno-5-4><span class=linenos data-linenos="4 "></span></a>    <span class=s2>&quot;tool&quot;</span><span class=p>:</span> <span class=s2>&quot;git commit&quot;</span><span class=p>,</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5></a><a href=#__codelineno-5-5><span class=linenos data-linenos="5 "></span></a>    <span class=s2>&quot;user&quot;</span><span class=p>:</span> <span class=n>interaction</span><span class=o>.</span><span class=n>user</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6></a><a href=#__codelineno-5-6><span class=linenos data-linenos="6 "></span></a>    <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_name</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7></a><a href=#__codelineno-5-7><span class=linenos data-linenos="7 "></span></a><span class=p>})</span>
</span></code></pre></div><h3 id=2-access-monitoring>2. Access Monitoring<a class=headerlink href=#2-access-monitoring title="Permanent link">&para;</a></h3><ul><li><strong>Tool Usage Tracking</strong>: All agent tool usage logged</li><li><strong>Failed Access Attempts</strong>: Blocked commands logged</li><li><strong>User Activity</strong>: Discord command usage tracked</li><li><strong>Anomaly Detection</strong>: Unusual usage patterns flagged</li></ul><h2 id=threat-model-mitigations>Threat Model &amp; Mitigations<a class=headerlink href=#threat-model-mitigations title="Permanent link">&para;</a></h2><h3 id=1-enhanced-threat-model-with-tdd-considerations>1. Enhanced Threat Model (with TDD Considerations)<a class=headerlink href=#1-enhanced-threat-model-with-tdd-considerations title="Permanent link">&para;</a></h3><table><thead><tr><th>Threat</th><th>Impact</th><th>Likelihood</th><th>Mitigation</th></tr></thead><tbody><tr><td><strong>Malicious Agent Commands</strong></td><td>High</td><td>Medium</td><td>Enhanced tool access restrictions + TDD phase controls</td></tr><tr><td><strong>TDD Test Tampering</strong></td><td>High</td><td>Medium</td><td>Test file access controls + preservation workflow</td></tr><tr><td><strong>Privilege Escalation</strong></td><td>High</td><td>Low</td><td>Command filtering + TDD phase validation</td></tr><tr><td><strong>Code Injection via Tests</strong></td><td>Medium</td><td>Medium</td><td>Test content validation + sandboxed execution</td></tr><tr><td><strong>Cross-Story Test Contamination</strong></td><td>Medium</td><td>Medium</td><td>Story-level TDD isolation</td></tr><tr><td><strong>Test File Exfiltration</strong></td><td>Medium</td><td>Low</td><td>Network restrictions + test file access controls</td></tr><tr><td><strong>Unauthorized TDD State Access</strong></td><td>Medium</td><td>Low</td><td>TDD state access controls + Discord role permissions</td></tr><tr><td><strong>TDD Cycle Disruption</strong></td><td>Low</td><td>Medium</td><td>TDD state validation + recovery mechanisms</td></tr></tbody></table><h3 id=2-security-controls>2. Security Controls<a class=headerlink href=#2-security-controls title="Permanent link">&para;</a></h3><h4 id=preventive-controls>Preventive Controls<a class=headerlink href=#preventive-controls title="Permanent link">&para;</a></h4><ul><li>Enhanced agent tool restrictions (including TDD-specific controls)</li><li>Input validation (workflow + TDD commands)</li><li>Role-based access control (including TDD command permissions)</li><li>Environment isolation (including TDD workspace isolation)</li><li><strong>TDD-Specific Controls</strong>:</li><li>Test file access restrictions per TDD phase</li><li>Story-level TDD cycle isolation</li><li>Test preservation workflow validation</li><li>TDD state transition controls</li></ul><h4 id=detective-controls>Detective Controls<a class=headerlink href=#detective-controls title="Permanent link">&para;</a></h4><ul><li>Comprehensive audit logging (workflow + TDD activities)</li><li>Access monitoring (including test file access)</li><li>Anomaly detection (including TDD cycle anomalies)</li><li>Failed attempt tracking (workflow + TDD command failures)</li><li><strong>TDD-Specific Detection</strong>:</li><li>Test file modification monitoring</li><li>TDD phase transition tracking</li><li>Test preservation validation logging</li><li>Cross-story contamination detection</li></ul><h4 id=corrective-controls>Corrective Controls<a class=headerlink href=#corrective-controls title="Permanent link">&para;</a></h4><ul><li>Automatic command blocking (workflow + TDD commands)</li><li>Error recovery procedures (including TDD cycle recovery)</li><li>State rollback capabilities (dual state machine rollback)</li><li>Alert escalation (workflow + TDD security events)</li><li><strong>TDD-Specific Corrections</strong>:</li><li>Test file restoration from git history</li><li>TDD cycle state recovery</li><li>Test preservation workflow repair</li><li>Cross-story isolation enforcement</li></ul><h2 id=security-testing>Security Testing<a class=headerlink href=#security-testing title="Permanent link">&para;</a></h2><h3 id=1-enhanced-automated-security-tests>1. Enhanced Automated Security Tests<a class=headerlink href=#1-enhanced-automated-security-tests title="Permanent link">&para;</a></h3><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1></a><a href=#__codelineno-6-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># Example security test for TDD workflow</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2></a><a href=#__codelineno-6-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>def</span> <span class=nf>test_code_agent_cannot_delete_files</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3></a><a href=#__codelineno-6-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Verify code agent cannot use rm command&quot;&quot;&quot;</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4></a><a href=#__codelineno-6-4><span class=linenos data-linenos=" 4 "></span></a>    <span class=n>access_granted</span> <span class=o>=</span> <span class=n>validate_agent_access</span><span class=p>(</span><span class=n>AgentType</span><span class=o>.</span><span class=n>CODE</span><span class=p>,</span> <span class=s2>&quot;Bash(rm)&quot;</span><span class=p>)</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5></a><a href=#__codelineno-6-5><span class=linenos data-linenos=" 5 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>assertFalse</span><span class=p>(</span><span class=n>access_granted</span><span class=p>)</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6></a><a href=#__codelineno-6-6><span class=linenos data-linenos=" 6 "></span></a>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7></a><a href=#__codelineno-6-7><span class=linenos data-linenos=" 7 "></span></a><span class=k>def</span> <span class=nf>test_qa_agent_cannot_edit_code_during_test_red</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8></a><a href=#__codelineno-6-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Verify QA agent cannot edit source code during TEST_RED phase&quot;&quot;&quot;</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9></a><a href=#__codelineno-6-9><span class=linenos data-linenos=" 9 "></span></a>    <span class=n>cycle</span> <span class=o>=</span> <span class=n>create_test_tdd_cycle</span><span class=p>(</span><span class=n>state</span><span class=o>=</span><span class=n>TDDState</span><span class=o>.</span><span class=n>TEST_RED</span><span class=p>)</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10></a><a href=#__codelineno-6-10><span class=linenos data-linenos="10 "></span></a>    <span class=n>access_granted</span> <span class=o>=</span> <span class=n>validate_tdd_phase_access</span><span class=p>(</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11></a><a href=#__codelineno-6-11><span class=linenos data-linenos="11 "></span></a>        <span class=n>AgentType</span><span class=o>.</span><span class=n>QA</span><span class=p>,</span> <span class=s2>&quot;Edit(src/main.py)&quot;</span><span class=p>,</span> <span class=n>cycle</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12></a><a href=#__codelineno-6-12><span class=linenos data-linenos="12 "></span></a>    <span class=p>)</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13></a><a href=#__codelineno-6-13><span class=linenos data-linenos="13 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>assertFalse</span><span class=p>(</span><span class=n>access_granted</span><span class=p>)</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14></a><a href=#__codelineno-6-14><span class=linenos data-linenos="14 "></span></a>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15></a><a href=#__codelineno-6-15><span class=linenos data-linenos="15 "></span></a><span class=k>def</span> <span class=nf>test_code_agent_cannot_modify_tests_during_refactor</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16></a><a href=#__codelineno-6-16><span class=linenos data-linenos="16 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Verify code agent cannot modify test files during REFACTOR phase&quot;&quot;&quot;</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17></a><a href=#__codelineno-6-17><span class=linenos data-linenos="17 "></span></a>    <span class=n>cycle</span> <span class=o>=</span> <span class=n>create_test_tdd_cycle</span><span class=p>(</span><span class=n>state</span><span class=o>=</span><span class=n>TDDState</span><span class=o>.</span><span class=n>REFACTOR</span><span class=p>)</span>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18></a><a href=#__codelineno-6-18><span class=linenos data-linenos="18 "></span></a>    <span class=n>access_granted</span> <span class=o>=</span> <span class=n>validate_tdd_phase_access</span><span class=p>(</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19></a><a href=#__codelineno-6-19><span class=linenos data-linenos="19 "></span></a>        <span class=n>AgentType</span><span class=o>.</span><span class=n>CODE</span><span class=p>,</span> <span class=s2>&quot;Edit(tests/tdd/story-1/test_feature.py)&quot;</span><span class=p>,</span> <span class=n>cycle</span>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20></a><a href=#__codelineno-6-20><span class=linenos data-linenos="20 "></span></a>    <span class=p>)</span>
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21></a><a href=#__codelineno-6-21><span class=linenos data-linenos="21 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>assertFalse</span><span class=p>(</span><span class=n>access_granted</span><span class=p>)</span>
</span><span id=__span-6-22><a id=__codelineno-6-22 name=__codelineno-6-22></a><a href=#__codelineno-6-22><span class=linenos data-linenos="22 "></span></a>
</span><span id=__span-6-23><a id=__codelineno-6-23 name=__codelineno-6-23></a><a href=#__codelineno-6-23><span class=linenos data-linenos="23 "></span></a><span class=k>def</span> <span class=nf>test_cross_story_tdd_isolation</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-6-24><a id=__codelineno-6-24 name=__codelineno-6-24></a><a href=#__codelineno-6-24><span class=linenos data-linenos="24 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Verify agents cannot access other story&#39;s TDD cycles&quot;&quot;&quot;</span>
</span><span id=__span-6-25><a id=__codelineno-6-25 name=__codelineno-6-25></a><a href=#__codelineno-6-25><span class=linenos data-linenos="25 "></span></a>    <span class=n>story1_cycle</span> <span class=o>=</span> <span class=n>create_test_tdd_cycle</span><span class=p>(</span><span class=n>story_id</span><span class=o>=</span><span class=s2>&quot;STORY-1&quot;</span><span class=p>)</span>
</span><span id=__span-6-26><a id=__codelineno-6-26 name=__codelineno-6-26></a><a href=#__codelineno-6-26><span class=linenos data-linenos="26 "></span></a>    <span class=n>story2_cycle</span> <span class=o>=</span> <span class=n>create_test_tdd_cycle</span><span class=p>(</span><span class=n>story_id</span><span class=o>=</span><span class=s2>&quot;STORY-2&quot;</span><span class=p>)</span>
</span><span id=__span-6-27><a id=__codelineno-6-27 name=__codelineno-6-27></a><a href=#__codelineno-6-27><span class=linenos data-linenos="27 "></span></a>    
</span><span id=__span-6-28><a id=__codelineno-6-28 name=__codelineno-6-28></a><a href=#__codelineno-6-28><span class=linenos data-linenos="28 "></span></a>    <span class=n>access_granted</span> <span class=o>=</span> <span class=n>validate_cross_story_access</span><span class=p>(</span>
</span><span id=__span-6-29><a id=__codelineno-6-29 name=__codelineno-6-29></a><a href=#__codelineno-6-29><span class=linenos data-linenos="29 "></span></a>        <span class=n>AgentType</span><span class=o>.</span><span class=n>QA</span><span class=p>,</span> <span class=n>story1_cycle</span><span class=p>,</span> <span class=n>story2_cycle</span>
</span><span id=__span-6-30><a id=__codelineno-6-30 name=__codelineno-6-30></a><a href=#__codelineno-6-30><span class=linenos data-linenos="30 "></span></a>    <span class=p>)</span>
</span><span id=__span-6-31><a id=__codelineno-6-31 name=__codelineno-6-31></a><a href=#__codelineno-6-31><span class=linenos data-linenos="31 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>assertFalse</span><span class=p>(</span><span class=n>access_granted</span><span class=p>)</span>
</span></code></pre></div><h3 id=2-enhanced-security-test-categories>2. Enhanced Security Test Categories<a class=headerlink href=#2-enhanced-security-test-categories title="Permanent link">&para;</a></h3><ul><li><strong>Access Control Tests</strong>: Verify agent restrictions work (including TDD phase restrictions)</li><li><strong>Input Validation Tests</strong>: Test command injection prevention (workflow + TDD commands)</li><li><strong>Authentication Tests</strong>: Verify Discord role enforcement (including TDD command permissions)</li><li><strong>State Security Tests</strong>: Ensure state tampering protection (dual state machine)</li><li><strong>TDD-Specific Security Tests</strong>:</li><li>TDD phase access control validation</li><li>Test file modification restrictions</li><li>Story-level TDD isolation verification</li><li>Test preservation workflow security</li><li>Cross-phase contamination prevention</li></ul><h2 id=security-configuration>Security Configuration<a class=headerlink href=#security-configuration title="Permanent link">&para;</a></h2><h3 id=1-enhanced-agent-security-profiles-with-tdd-support>1. Enhanced Agent Security Profiles (with TDD Support)<a class=headerlink href=#1-enhanced-agent-security-profiles-with-tdd-support title="Permanent link">&para;</a></h3><p>Create custom security profiles by modifying <code class="language-text highlight">AGENT_TOOL_CONFIG</code> with TDD phase awareness:</p><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a><a href=#__codelineno-7-1><span class=linenos data-linenos=" 1 "></span></a><span class=n>TDD_ENHANCED_AGENT_CONFIG</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2></a><a href=#__codelineno-7-2><span class=linenos data-linenos=" 2 "></span></a>    <span class=n>AgentType</span><span class=o>.</span><span class=n>QA_TDD</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3></a><a href=#__codelineno-7-3><span class=linenos data-linenos=" 3 "></span></a>        <span class=s2>&quot;allowed_tools&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4></a><a href=#__codelineno-7-4><span class=linenos data-linenos=" 4 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>TEST_RED</span><span class=p>:</span> <span class=p>[</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5></a><a href=#__codelineno-7-5><span class=linenos data-linenos=" 5 "></span></a>                <span class=s2>&quot;Read&quot;</span><span class=p>,</span> <span class=s2>&quot;Write&quot;</span><span class=p>,</span> <span class=s2>&quot;Bash(pytest)&quot;</span><span class=p>,</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6></a><a href=#__codelineno-7-6><span class=linenos data-linenos=" 6 "></span></a>                <span class=s2>&quot;TestFileCreate&quot;</span><span class=p>,</span> <span class=s2>&quot;TestFileEdit&quot;</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7></a><a href=#__codelineno-7-7><span class=linenos data-linenos=" 7 "></span></a>            <span class=p>],</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8></a><a href=#__codelineno-7-8><span class=linenos data-linenos=" 8 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>CODE_GREEN</span><span class=p>:</span> <span class=p>[</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9></a><a href=#__codelineno-7-9><span class=linenos data-linenos=" 9 "></span></a>                <span class=s2>&quot;Read&quot;</span><span class=p>,</span> <span class=s2>&quot;Bash(pytest)&quot;</span><span class=p>,</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10></a><a href=#__codelineno-7-10><span class=linenos data-linenos="10 "></span></a>                <span class=s2>&quot;TestFileValidate&quot;</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11></a><a href=#__codelineno-7-11><span class=linenos data-linenos="11 "></span></a>            <span class=p>],</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12></a><a href=#__codelineno-7-12><span class=linenos data-linenos="12 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>REFACTOR</span><span class=p>:</span> <span class=p>[</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13></a><a href=#__codelineno-7-13><span class=linenos data-linenos="13 "></span></a>                <span class=s2>&quot;Read&quot;</span><span class=p>,</span> <span class=s2>&quot;Bash(pytest)&quot;</span><span class=p>,</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14></a><a href=#__codelineno-7-14><span class=linenos data-linenos="14 "></span></a>                <span class=s2>&quot;TestFileValidate&quot;</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15></a><a href=#__codelineno-7-15><span class=linenos data-linenos="15 "></span></a>            <span class=p>]</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16></a><a href=#__codelineno-7-16><span class=linenos data-linenos="16 "></span></a>        <span class=p>},</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17></a><a href=#__codelineno-7-17><span class=linenos data-linenos="17 "></span></a>        <span class=s2>&quot;disallowed_tools&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18></a><a href=#__codelineno-7-18><span class=linenos data-linenos="18 "></span></a>            <span class=s2>&quot;*&quot;</span><span class=p>:</span> <span class=p>[</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19></a><a href=#__codelineno-7-19><span class=linenos data-linenos="19 "></span></a>                <span class=s2>&quot;Edit(src/*)&quot;</span><span class=p>,</span> <span class=s2>&quot;Bash(rm)&quot;</span><span class=p>,</span> <span class=s2>&quot;TestFileDelete&quot;</span>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20></a><a href=#__codelineno-7-20><span class=linenos data-linenos="20 "></span></a>            <span class=p>],</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21></a><a href=#__codelineno-7-21><span class=linenos data-linenos="21 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>CODE_GREEN</span><span class=p>:</span> <span class=p>[</span>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22></a><a href=#__codelineno-7-22><span class=linenos data-linenos="22 "></span></a>                <span class=s2>&quot;TestFileEdit&quot;</span><span class=p>,</span> <span class=s2>&quot;TestFileCreate&quot;</span>
</span><span id=__span-7-23><a id=__codelineno-7-23 name=__codelineno-7-23></a><a href=#__codelineno-7-23><span class=linenos data-linenos="23 "></span></a>            <span class=p>]</span>
</span><span id=__span-7-24><a id=__codelineno-7-24 name=__codelineno-7-24></a><a href=#__codelineno-7-24><span class=linenos data-linenos="24 "></span></a>        <span class=p>},</span>
</span><span id=__span-7-25><a id=__codelineno-7-25 name=__codelineno-7-25></a><a href=#__codelineno-7-25><span class=linenos data-linenos="25 "></span></a>        <span class=s2>&quot;tdd_restrictions&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-7-26><a id=__codelineno-7-26 name=__codelineno-7-26></a><a href=#__codelineno-7-26><span class=linenos data-linenos="26 "></span></a>            <span class=s2>&quot;story_isolation&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span><span id=__span-7-27><a id=__codelineno-7-27 name=__codelineno-7-27></a><a href=#__codelineno-7-27><span class=linenos data-linenos="27 "></span></a>            <span class=s2>&quot;test_preservation&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span><span id=__span-7-28><a id=__codelineno-7-28 name=__codelineno-7-28></a><a href=#__codelineno-7-28><span class=linenos data-linenos="28 "></span></a>            <span class=s2>&quot;cross_phase_validation&quot;</span><span class=p>:</span> <span class=kc>True</span>
</span><span id=__span-7-29><a id=__codelineno-7-29 name=__codelineno-7-29></a><a href=#__codelineno-7-29><span class=linenos data-linenos="29 "></span></a>        <span class=p>}</span>
</span><span id=__span-7-30><a id=__codelineno-7-30 name=__codelineno-7-30></a><a href=#__codelineno-7-30><span class=linenos data-linenos="30 "></span></a>    <span class=p>},</span>
</span><span id=__span-7-31><a id=__codelineno-7-31 name=__codelineno-7-31></a><a href=#__codelineno-7-31><span class=linenos data-linenos="31 "></span></a>    <span class=n>AgentType</span><span class=o>.</span><span class=n>CODE_TDD</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-7-32><a id=__codelineno-7-32 name=__codelineno-7-32></a><a href=#__codelineno-7-32><span class=linenos data-linenos="32 "></span></a>        <span class=s2>&quot;allowed_tools&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-7-33><a id=__codelineno-7-33 name=__codelineno-7-33></a><a href=#__codelineno-7-33><span class=linenos data-linenos="33 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>CODE_GREEN</span><span class=p>:</span> <span class=p>[</span>
</span><span id=__span-7-34><a id=__codelineno-7-34 name=__codelineno-7-34></a><a href=#__codelineno-7-34><span class=linenos data-linenos="34 "></span></a>                <span class=s2>&quot;Read&quot;</span><span class=p>,</span> <span class=s2>&quot;Edit(src/*)&quot;</span><span class=p>,</span> <span class=s2>&quot;Write(src/*)&quot;</span><span class=p>,</span>
</span><span id=__span-7-35><a id=__codelineno-7-35 name=__codelineno-7-35></a><a href=#__codelineno-7-35><span class=linenos data-linenos="35 "></span></a>                <span class=s2>&quot;Bash(pytest)&quot;</span><span class=p>,</span> <span class=s2>&quot;TestFileValidate&quot;</span>
</span><span id=__span-7-36><a id=__codelineno-7-36 name=__codelineno-7-36></a><a href=#__codelineno-7-36><span class=linenos data-linenos="36 "></span></a>            <span class=p>],</span>
</span><span id=__span-7-37><a id=__codelineno-7-37 name=__codelineno-7-37></a><a href=#__codelineno-7-37><span class=linenos data-linenos="37 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>REFACTOR</span><span class=p>:</span> <span class=p>[</span>
</span><span id=__span-7-38><a id=__codelineno-7-38 name=__codelineno-7-38></a><a href=#__codelineno-7-38><span class=linenos data-linenos="38 "></span></a>                <span class=s2>&quot;Read&quot;</span><span class=p>,</span> <span class=s2>&quot;Edit(src/*)&quot;</span><span class=p>,</span> <span class=s2>&quot;Refactor&quot;</span><span class=p>,</span>
</span><span id=__span-7-39><a id=__codelineno-7-39 name=__codelineno-7-39></a><a href=#__codelineno-7-39><span class=linenos data-linenos="39 "></span></a>                <span class=s2>&quot;Bash(pytest)&quot;</span><span class=p>,</span> <span class=s2>&quot;TestFileValidate&quot;</span>
</span><span id=__span-7-40><a id=__codelineno-7-40 name=__codelineno-7-40></a><a href=#__codelineno-7-40><span class=linenos data-linenos="40 "></span></a>            <span class=p>]</span>
</span><span id=__span-7-41><a id=__codelineno-7-41 name=__codelineno-7-41></a><a href=#__codelineno-7-41><span class=linenos data-linenos="41 "></span></a>        <span class=p>},</span>
</span><span id=__span-7-42><a id=__codelineno-7-42 name=__codelineno-7-42></a><a href=#__codelineno-7-42><span class=linenos data-linenos="42 "></span></a>        <span class=s2>&quot;disallowed_tools&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-7-43><a id=__codelineno-7-43 name=__codelineno-7-43></a><a href=#__codelineno-7-43><span class=linenos data-linenos="43 "></span></a>            <span class=s2>&quot;*&quot;</span><span class=p>:</span> <span class=p>[</span>
</span><span id=__span-7-44><a id=__codelineno-7-44 name=__codelineno-7-44></a><a href=#__codelineno-7-44><span class=linenos data-linenos="44 "></span></a>                <span class=s2>&quot;TestFileEdit&quot;</span><span class=p>,</span> <span class=s2>&quot;TestFileCreate&quot;</span><span class=p>,</span> <span class=s2>&quot;Bash(rm)&quot;</span>
</span><span id=__span-7-45><a id=__codelineno-7-45 name=__codelineno-7-45></a><a href=#__codelineno-7-45><span class=linenos data-linenos="45 "></span></a>            <span class=p>],</span>
</span><span id=__span-7-46><a id=__codelineno-7-46 name=__codelineno-7-46></a><a href=#__codelineno-7-46><span class=linenos data-linenos="46 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>TEST_RED</span><span class=p>:</span> <span class=p>[</span>
</span><span id=__span-7-47><a id=__codelineno-7-47 name=__codelineno-7-47></a><a href=#__codelineno-7-47><span class=linenos data-linenos="47 "></span></a>                <span class=s2>&quot;Edit(src/*)&quot;</span><span class=p>,</span> <span class=s2>&quot;Write(src/*)&quot;</span>
</span><span id=__span-7-48><a id=__codelineno-7-48 name=__codelineno-7-48></a><a href=#__codelineno-7-48><span class=linenos data-linenos="48 "></span></a>            <span class=p>]</span>
</span><span id=__span-7-49><a id=__codelineno-7-49 name=__codelineno-7-49></a><a href=#__codelineno-7-49><span class=linenos data-linenos="49 "></span></a>        <span class=p>}</span>
</span><span id=__span-7-50><a id=__codelineno-7-50 name=__codelineno-7-50></a><a href=#__codelineno-7-50><span class=linenos data-linenos="50 "></span></a>    <span class=p>}</span>
</span><span id=__span-7-51><a id=__codelineno-7-51 name=__codelineno-7-51></a><a href=#__codelineno-7-51><span class=linenos data-linenos="51 "></span></a><span class=p>}</span>
</span></code></pre></div><h3 id=2-enhanced-environment-security-settings-with-tdd-support>2. Enhanced Environment Security Settings (with TDD Support)<a class=headerlink href=#2-enhanced-environment-security-settings-with-tdd-support title="Permanent link">&para;</a></h3><div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1></a><a href=#__codelineno-8-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># Restrict Claude Code to specific directories</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2></a><a href=#__codelineno-8-2><span class=linenos data-linenos=" 2 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>CLAUDE_ALLOWED_DIRS</span><span class=o>=</span><span class=s2>&quot;/workspace/safe-dir&quot;</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3></a><a href=#__codelineno-8-3><span class=linenos data-linenos=" 3 "></span></a>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4></a><a href=#__codelineno-8-4><span class=linenos data-linenos=" 4 "></span></a><span class=c1># Enable additional security logging</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5></a><a href=#__codelineno-8-5><span class=linenos data-linenos=" 5 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>SECURITY_LOG_LEVEL</span><span class=o>=</span><span class=s2>&quot;DEBUG&quot;</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6></a><a href=#__codelineno-8-6><span class=linenos data-linenos=" 6 "></span></a>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7></a><a href=#__codelineno-8-7><span class=linenos data-linenos=" 7 "></span></a><span class=c1># Require explicit permission for network access</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8></a><a href=#__codelineno-8-8><span class=linenos data-linenos=" 8 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>REQUIRE_NETWORK_APPROVAL</span><span class=o>=</span><span class=s2>&quot;true&quot;</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9></a><a href=#__codelineno-8-9><span class=linenos data-linenos=" 9 "></span></a>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10></a><a href=#__codelineno-8-10><span class=linenos data-linenos="10 "></span></a><span class=c1># TDD-specific security settings</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11></a><a href=#__codelineno-8-11><span class=linenos data-linenos="11 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>TDD_ISOLATION_ENABLED</span><span class=o>=</span><span class=s2>&quot;true&quot;</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12></a><a href=#__codelineno-8-12><span class=linenos data-linenos="12 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>TDD_TEST_FILE_VALIDATION</span><span class=o>=</span><span class=s2>&quot;strict&quot;</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13></a><a href=#__codelineno-8-13><span class=linenos data-linenos="13 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>TDD_CROSS_STORY_ACCESS</span><span class=o>=</span><span class=s2>&quot;deny&quot;</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14></a><a href=#__codelineno-8-14><span class=linenos data-linenos="14 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>TDD_PHASE_ENFORCEMENT</span><span class=o>=</span><span class=s2>&quot;strict&quot;</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15></a><a href=#__codelineno-8-15><span class=linenos data-linenos="15 "></span></a>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16></a><a href=#__codelineno-8-16><span class=linenos data-linenos="16 "></span></a><span class=c1># Test file security settings</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17></a><a href=#__codelineno-8-17><span class=linenos data-linenos="17 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>TEST_FILE_BACKUP_ENABLED</span><span class=o>=</span><span class=s2>&quot;true&quot;</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18></a><a href=#__codelineno-8-18><span class=linenos data-linenos="18 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>TEST_PRESERVATION_VALIDATION</span><span class=o>=</span><span class=s2>&quot;enabled&quot;</span>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19></a><a href=#__codelineno-8-19><span class=linenos data-linenos="19 "></span></a><span class=nb>export</span><span class=w> </span><span class=nv>TEST_FILE_PROMOTION_APPROVAL</span><span class=o>=</span><span class=s2>&quot;required&quot;</span>
</span></code></pre></div><h2 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">&para;</a></h2><h3 id=1-development-security>1. Development Security<a class=headerlink href=#1-development-security title="Permanent link">&para;</a></h3><ul><li><strong>Code Review</strong>: All security-related changes require review</li><li><strong>Principle of Least Privilege</strong>: Grant minimal necessary permissions</li><li><strong>Defense in Depth</strong>: Multiple security layers</li><li><strong>Fail Secure</strong>: Default to deny for unknown operations</li></ul><h3 id=2-operational-security>2. Operational Security<a class=headerlink href=#2-operational-security title="Permanent link">&para;</a></h3><ul><li><strong>Regular Audits</strong>: Periodic review of agent permissions</li><li><strong>Security Updates</strong>: Keep dependencies updated</li><li><strong>Incident Response</strong>: Clear procedures for security events</li><li><strong>Backup &amp; Recovery</strong>: Secure backup of critical data</li></ul><h3 id=3-monitoring-alerting>3. Monitoring &amp; Alerting<a class=headerlink href=#3-monitoring-alerting title="Permanent link">&para;</a></h3><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1></a><a href=#__codelineno-9-1><span class=linenos data-linenos="1 "></span></a><span class=c1># Security alert example</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2></a><a href=#__codelineno-9-2><span class=linenos data-linenos="2 "></span></a><span class=k>if</span> <span class=n>failed_access_attempts</span> <span class=o>&gt;</span> <span class=mi>5</span><span class=p>:</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3></a><a href=#__codelineno-9-3><span class=linenos data-linenos="3 "></span></a>    <span class=n>alert_security_team</span><span class=p>(</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4></a><a href=#__codelineno-9-4><span class=linenos data-linenos="4 "></span></a>        <span class=s2>&quot;Multiple failed access attempts&quot;</span><span class=p>,</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5></a><a href=#__codelineno-9-5><span class=linenos data-linenos="5 "></span></a>        <span class=n>agent_type</span><span class=o>=</span><span class=n>agent</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6></a><a href=#__codelineno-9-6><span class=linenos data-linenos="6 "></span></a>        <span class=n>user</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7></a><a href=#__codelineno-9-7><span class=linenos data-linenos="7 "></span></a>        <span class=n>timestamp</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8></a><a href=#__codelineno-9-8><span class=linenos data-linenos="8 "></span></a>    <span class=p>)</span>
</span></code></pre></div><h2 id=compliance-considerations>Compliance Considerations<a class=headerlink href=#compliance-considerations title="Permanent link">&para;</a></h2><h3 id=1-data-privacy>1. Data Privacy<a class=headerlink href=#1-data-privacy title="Permanent link">&para;</a></h3><ul><li><strong>No PII Storage</strong>: System avoids storing personal information</li><li><strong>Data Minimization</strong>: Only necessary data collected</li><li><strong>Retention Policies</strong>: Automatic log rotation and cleanup</li></ul><h3 id=2-access-controls>2. Access Controls<a class=headerlink href=#2-access-controls title="Permanent link">&para;</a></h3><ul><li><strong>Role Separation</strong>: Clear separation of duties</li><li><strong>Audit Trail</strong>: Complete audit trail of all actions</li><li><strong>Access Reviews</strong>: Regular review of user permissions</li></ul><hr><div class="admonition warning"><p class=admonition-title>Security Updates</p><p>Security configurations should be reviewed regularly and updated as new threats emerge. Monitor security advisories for all dependencies.</p></div><div class="admonition info"><p class=admonition-title>Incident Response</p><p>In case of suspected security incident, immediately disable affected agents and review audit logs. Contact security team for investigation procedures.</p></div><aside class=md-source-file><span class=md-source-file__fact><span class=md-icon title="Last update"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="June 18, 2025 00:47:19 UTC">June 18, 2025 00:47:19</span></span><span class=md-source-file__fact><span class=md-icon title=Created><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="June 17, 2025 05:49:14 UTC">June 17, 2025 05:49:14</span></span></aside><form class=md-feedback name=feedback hidden><fieldset><legend class=md-feedback__title> Was this page helpful? </legend><div class=md-feedback__inner><div class=md-feedback__list><button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg></button><button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg></button></div><div class=md-feedback__note><div data-md-value=1 hidden> Thanks for your feedback! </div><div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by <a href="https://github.com/jmontp/agent-workflow/issues/new/?title=[Feedback]+Security%20Implementation+-+/advanced/security-implementation/" target=_blank rel=noopener>telling us what you found confusing</a>. </div></div></div></fieldset></form></article></div><script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type=button class="md-top md-icon" data-md-component=top hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a href=../project-repo/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Project Repository"><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg></div><div class=md-footer__title><span class=md-footer__direction> Previous </span><div class=md-ellipsis> Project Repository </div></div></a><a href=../testing/ class="md-footer__link md-footer__link--next" aria-label="Next: Testing Strategy"><div class=md-footer__title><span class=md-footer__direction> Next </span><div class=md-ellipsis> Testing Strategy </div></div><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></div></a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright></div><div class=md-social><a href=https://github.com/jmontp/agent-workflow target=_blank rel=noopener title="GitHub Repository" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></a><a href=https://jmontp.github.io/agent-workflow/ target=_blank rel=noopener title="Documentation Site" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a><a href=https://discord.gg/your-discord-server target=_blank rel=noopener title="Discord Community" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8"/></svg></a><a href=https://github.com/sponsors/jmontp target=_blank rel=noopener title=Sponsor class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53z"/></svg></a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><div class=md-progress data-md-component=progress role=progressbar></div><div class=md-consent data-md-component=consent id=__consent hidden><div class=md-consent__overlay></div><aside class=md-consent__inner><form class="md-consent__form md-grid md-typeset" name=consent><h4>Cookie consent</h4><p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p><input class=md-toggle type=checkbox id=__settings><div class=md-consent__settings><ul class=task-list><li class=task-list-item><label class=task-list-control><input type=checkbox name=analytics checked><span class=task-list-indicator></span> Google Analytics </label></li><li class=task-list-item><label class=task-list-control><input type=checkbox name=github checked><span class=task-list-indicator></span> GitHub </label></li></ul></div><div class=md-consent__controls><button class="md-button md-button--primary">Accept</button><button type=reset class="md-button md-button--primary">Reject</button><label class=md-button for=__settings>Manage settings</label></div></form></aside></div><script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script><script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": {"API": "api", "Architecture": "architecture", "CSS": "css", "Discord": "discord", "HTML5": "html", "JavaScript": "js", "Python": "python", "Scrum": "scrum", "TDD": "tdd"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script><script src=../../assets/javascripts/bundle.13a4f30d.min.js></script><script src=https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mtml-chtml.js></script><script src=../../js/mermaid-zoom.js></script><script src=../../js/universal-search.js></script><script src=../../js/enhanced-navigation.js></script><script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body></html>