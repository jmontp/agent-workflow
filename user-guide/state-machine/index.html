<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Complete AI agent orchestration framework with Discord integration, Test-Driven Development, and human-in-the-loop control for automated software development"><meta name=author content="AI Agent Workflow Team"><link href=https://jmontp.github.io/agent-workflow/user-guide/state-machine/ rel=canonical><link href=../hitl-commands/ rel=prev><link href=../tdd-workflow/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>🔄 State Machine - AI Agent TDD-Scrum Workflow - Complete Guide</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><style>:root{.md-tag{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M5.5%207A1.5%201.5%200%200%201%204%205.5%201.5%201.5%200%200%201%205.5%204%201.5%201.5%200%200%201%207%205.5%201.5%201.5%200%200%201%205.5%207m15.91%204.58-9-9C12.05%202.22%2011.55%202%2011%202H4c-1.11%200-2%20.89-2%202v7c0%20.55.22%201.05.59%201.41l8.99%209c.37.36.87.59%201.42.59s1.05-.23%201.41-.59l7-7c.37-.36.59-.86.59-1.41%200-.56-.23-1.06-.59-1.42%22/%3E%3C/svg%3E');}.md-tag.md-tag--html{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m12%2017.56%204.07-1.13.55-6.1H9.38L9.2%208.3h7.6l.2-1.99H7l.56%206.01h6.89l-.23%202.58-2.22.6-2.22-.6-.14-1.66h-2l.29%203.19zM4.07%203h15.86L18.5%2019.2%2012%2021l-6.5-1.8z%22/%3E%3C/svg%3E');}.md-tag.md-tag--js{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M3%203h18v18H3zm4.73%2015.04c.4.85%201.19%201.55%202.54%201.55%201.5%200%202.53-.8%202.53-2.55v-5.78h-1.7V17c0%20.86-.35%201.08-.9%201.08-.58%200-.82-.4-1.09-.87zm5.98-.18c.5.98%201.51%201.73%203.09%201.73%201.6%200%202.8-.83%202.8-2.36%200-1.41-.81-2.04-2.25-2.66l-.42-.18c-.73-.31-1.04-.52-1.04-1.02%200-.41.31-.73.81-.73.48%200%20.8.21%201.09.73l1.31-.87c-.55-.96-1.33-1.33-2.4-1.33-1.51%200-2.48.96-2.48%202.23%200%201.38.81%202.03%202.03%202.55l.42.18c.78.34%201.24.55%201.24%201.13%200%20.48-.45.83-1.15.83-.83%200-1.31-.43-1.67-1.03z%22/%3E%3C/svg%3E');}.md-tag.md-tag--css{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m5%203-.65%203.34h13.59L17.5%208.5H3.92l-.66%203.33h13.59l-.76%203.81-5.48%201.81-4.75-1.81.33-1.64H2.85l-.79%204%207.85%203%209.05-3%201.2-6.03.24-1.21L21.94%203z%22/%3E%3C/svg%3E');}.md-tag.md-tag--python{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M19.14%207.5A2.86%202.86%200%200%201%2022%2010.36v3.78A2.86%202.86%200%200%201%2019.14%2017H12c0%20.39.32.96.71.96H17v1.68a2.86%202.86%200%200%201-2.86%202.86H9.86A2.86%202.86%200%200%201%207%2019.64v-3.75a2.85%202.85%200%200%201%202.86-2.85h5.25a2.85%202.85%200%200%200%202.85-2.86V7.5zm-4.28%2011.79c-.4%200-.72.3-.72.89s.32.71.72.71a.71.71%200%200%200%20.71-.71c0-.59-.32-.89-.71-.89m-10-1.79A2.86%202.86%200%200%201%202%2014.64v-3.78A2.86%202.86%200%200%201%204.86%208H12c0-.39-.32-.96-.71-.96H7V5.36A2.86%202.86%200%200%201%209.86%202.5h4.28A2.86%202.86%200%200%201%2017%205.36v3.75a2.85%202.85%200%200%201-2.86%202.85H8.89a2.85%202.85%200%200%200-2.85%202.86v2.68zM9.14%205.71c.4%200%20.72-.3.72-.89s-.32-.71-.72-.71c-.39%200-.71.12-.71.71s.32.89.71.89%22/%3E%3C/svg%3E');}}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><link rel=stylesheet href=../../stylesheets/enhanced-navigation.css><link rel=stylesheet href=../../stylesheets/color-schemes.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head><body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=black><input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off><input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off><label class=md-overlay for=__drawer></label><div data-md-component=skip><a href=#dual-state-machine-architecture class=md-skip> Skip to content </a></div><div data-md-component=announce></div><div data-md-color-scheme=default data-md-component=outdated hidden></div><header class="md-header md-header--shadow md-header--lifted" data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a href=../.. title="AI Agent TDD-Scrum Workflow - Complete Guide" class="md-header__button md-logo" aria-label="AI Agent TDD-Scrum Workflow - Complete Guide" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a><label class="md-header__button md-icon" for=__drawer><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> AI Agent TDD-Scrum Workflow - Complete Guide </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> 🔄 State Machine </span></div></div></div><div class=md-header__option><div class=md-select><button class="md-header__button md-icon" aria-label="Select language"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg></button><div class=md-select__inner><ul class=md-select__list><li class=md-select__item><a href=../../ hreflang=en class=md-select__link> English </a></li></ul></div></div></div><label class="md-header__button md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required><label class="md-search__icon md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg></label><nav class=md-search__options aria-label=Search><a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg></a><button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap tabindex=0 data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta> Initializing search </div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a href=https://github.com/jmontp/agent-workflow title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></div><div class=md-source__repository> jmontp/agent-workflow </div></a></div></nav><nav class=md-tabs aria-label=Tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a href=../.. class=md-tabs__link> 🏠 Home </a></li><li class=md-tabs__item><a href=../../getting-started/ class=md-tabs__link> ⚡ Getting Started </a></li><li class="md-tabs__item md-tabs__item--active"><a href=../ class=md-tabs__link> 📚 User Guide </a></li><li class=md-tabs__item><a href=../../concepts/ class=md-tabs__link> 🎯 Core Concepts </a></li><li class=md-tabs__item><a href=../../architecture/ class=md-tabs__link> 🏗️ Architecture </a></li><li class=md-tabs__item><a href=../../advanced/ class=md-tabs__link> 🔬 Advanced Topics </a></li><li class=md-tabs__item><a href=../../planning/ class=md-tabs__link> 🎨 Planning & Design </a></li><li class=md-tabs__item><a href=../../development/ class=md-tabs__link> 🛠️ Development </a></li><li class=md-tabs__item><a href=../../deployment/ class=md-tabs__link> 🚀 Deployment </a></li><li class=md-tabs__item><a href=../../templates/ class=md-tabs__link> 📋 Templates </a></li><li class=md-tabs__item><a href=../../theme-integration-guide/ class=md-tabs__link> 🎨 Theme Integration </a></li><li class=md-tabs__item><a href=../../archive/compliance/ class=md-tabs__link> 📁 Archive </a></li></ul></div></nav></header><div class=md-container data-md-component=container><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a href=../.. title="AI Agent TDD-Scrum Workflow - Complete Guide" class="md-nav__button md-logo" aria-label="AI Agent TDD-Scrum Workflow - Complete Guide" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a> AI Agent TDD-Scrum Workflow - Complete Guide </label><div class=md-nav__source><a href=https://github.com/jmontp/agent-workflow title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></div><div class=md-source__repository> jmontp/agent-workflow </div></a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../.. class=md-nav__link><span class=md-ellipsis> 🏠 Home </span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../getting-started/ class=md-nav__link><span class=md-ellipsis> ⚡ Getting Started </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked><div class="md-nav__link md-nav__container"><a href=../ class="md-nav__link "><span class=md-ellipsis> 📚 User Guide </span></a><label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true><label class=md-nav__title for=__nav_3><span class="md-nav__icon md-icon"></span> 📚 User Guide </label><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2 checked><label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex><span class=md-ellipsis> 🚀 Core Workflows </span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=true><label class=md-nav__title for=__nav_3_2><span class="md-nav__icon md-icon"></span> 🚀 Core Workflows </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../hitl-commands/ class=md-nav__link><span class=md-ellipsis> 🎮 HITL Commands </span></a></li><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type=checkbox id=__toc><label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> 🔄 State Machine </span><span class="md-nav__icon md-icon"></span></label><a href=./ class="md-nav__link md-nav__link--active"><span class=md-ellipsis> 🔄 State Machine </span></a><nav class="md-nav md-nav--secondary" aria-label="On this page"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> On this page </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#1-primary-workflow-state-machine class=md-nav__link><span class=md-ellipsis> 1. Primary Workflow State Machine </span></a><nav class=md-nav aria-label="1. Primary Workflow State Machine"><ul class=md-nav__list><li class=md-nav__item><a href=#top-level-states class=md-nav__link><span class=md-ellipsis> Top-Level States </span></a></li><li class=md-nav__item><a href=#workflow-command-state-matrix class=md-nav__link><span class=md-ellipsis> Workflow Command → State Matrix </span></a></li><li class=md-nav__item><a href=#primary-workflow-state-diagram class=md-nav__link><span class=md-ellipsis> Primary Workflow State Diagram </span></a></li></ul></nav></li><li class=md-nav__item><a href=#2-secondary-tdd-state-machines class=md-nav__link><span class=md-ellipsis> 2. Secondary TDD State Machines </span></a><nav class=md-nav aria-label="2. Secondary TDD State Machines"><ul class=md-nav__list><li class=md-nav__item><a href=#tdd-states-per-story class=md-nav__link><span class=md-ellipsis> TDD States per Story </span></a></li><li class=md-nav__item><a href=#tdd-command-state-matrix class=md-nav__link><span class=md-ellipsis> TDD Command → State Matrix </span></a></li><li class=md-nav__item><a href=#tdd-state-diagram class=md-nav__link><span class=md-ellipsis> TDD State Diagram </span></a></li><li class=md-nav__item><a href=#parallel-tdd-execution class=md-nav__link><span class=md-ellipsis> Parallel TDD Execution </span></a></li></ul></nav></li><li class=md-nav__item><a href=#3-state-machine-interactions class=md-nav__link><span class=md-ellipsis> 3. State Machine Interactions </span></a><nav class=md-nav aria-label="3. State Machine Interactions"><ul class=md-nav__list><li class=md-nav__item><a href=#primary-to-secondary-activation class=md-nav__link><span class=md-ellipsis> Primary to Secondary Activation </span></a></li><li class=md-nav__item><a href=#cross-state-machine-commands class=md-nav__link><span class=md-ellipsis> Cross-State Machine Commands </span></a></li></ul></nav></li><li class=md-nav__item><a href=#4-standardised-error-hint-response class=md-nav__link><span class=md-ellipsis> 4. Standardised Error &amp; Hint Response </span></a></li><li class=md-nav__item><a href=#5-real-time-state-broadcasting-and-visualization class=md-nav__link><span class=md-ellipsis> 5. Real-time State Broadcasting and Visualization </span></a><nav class=md-nav aria-label="5. Real-time State Broadcasting and Visualization"><ul class=md-nav__list><li class=md-nav__item><a href=#websocket-integration class=md-nav__link><span class=md-ellipsis> WebSocket Integration </span></a></li><li class=md-nav__item><a href=#real-time-event-types class=md-nav__link><span class=md-ellipsis> Real-time Event Types </span></a></li><li class=md-nav__item><a href=#live-visualization class=md-nav__link><span class=md-ellipsis> Live Visualization </span></a></li></ul></nav></li><li class=md-nav__item><a href=#6-state-transition-history-and-recovery class=md-nav__link><span class=md-ellipsis> 6. State Transition History and Recovery </span></a><nav class=md-nav aria-label="6. State Transition History and Recovery"><ul class=md-nav__list><li class=md-nav__item><a href=#transition-history-tracking class=md-nav__link><span class=md-ellipsis> Transition History Tracking </span></a></li><li class=md-nav__item><a href=#recovery-mechanisms class=md-nav__link><span class=md-ellipsis> Recovery Mechanisms </span></a></li><li class=md-nav__item><a href=#state-audit-trail class=md-nav__link><span class=md-ellipsis> State Audit Trail </span></a></li></ul></nav></li><li class=md-nav__item><a href=#7-context-aware-validation-and-tdd-constraints class=md-nav__link><span class=md-ellipsis> 7. Context-Aware Validation and TDD Constraints </span></a><nav class=md-nav aria-label="7. Context-Aware Validation and TDD Constraints"><ul class=md-nav__list><li class=md-nav__item><a href=#context-aware-state-transitions class=md-nav__link><span class=md-ellipsis> Context-Aware State Transitions </span></a></li><li class=md-nav__item><a href=#tdd-integration-constraints class=md-nav__link><span class=md-ellipsis> TDD Integration Constraints </span></a></li></ul></nav></li><li class=md-nav__item><a href=#8-enhanced-state-machine-features class=md-nav__link><span class=md-ellipsis> 8. Enhanced State Machine Features </span></a><nav class=md-nav aria-label="8. Enhanced State Machine Features"><ul class=md-nav__list><li class=md-nav__item><a href=#tdd-cycle-management-integration class=md-nav__link><span class=md-ellipsis> TDD Cycle Management Integration </span></a></li><li class=md-nav__item><a href=#advanced-state-information class=md-nav__link><span class=md-ellipsis> Advanced State Information </span></a></li><li class=md-nav__item><a href=#terminal-state-detection class=md-nav__link><span class=md-ellipsis> Terminal State Detection </span></a></li></ul></nav></li><li class=md-nav__item><a href=#9-performance-and-monitoring class=md-nav__link><span class=md-ellipsis> 9. Performance and Monitoring </span></a><nav class=md-nav aria-label="9. Performance and Monitoring"><ul class=md-nav__list><li class=md-nav__item><a href=#state-transition-metrics class=md-nav__link><span class=md-ellipsis> State Transition Metrics </span></a></li><li class=md-nav__item><a href=#real-time-dashboard-integration class=md-nav__link><span class=md-ellipsis> Real-time Dashboard Integration </span></a></li></ul></nav></li><li class=md-nav__item><a href=#10-implementation-notes class=md-nav__link><span class=md-ellipsis> 10. Implementation Notes </span></a><nav class=md-nav aria-label="10. Implementation Notes"><ul class=md-nav__list><li class=md-nav__item><a href=#core-implementation class=md-nav__link><span class=md-ellipsis> Core Implementation </span></a></li><li class=md-nav__item><a href=#extension-points class=md-nav__link><span class=md-ellipsis> Extension Points </span></a></li><li class=md-nav__item><a href=#integration-patterns class=md-nav__link><span class=md-ellipsis> Integration Patterns </span></a></li></ul></nav></li><li class=md-nav__item><a href=#next-steps class=md-nav__link><span class=md-ellipsis> Next Steps </span></a><nav class=md-nav aria-label="Next Steps"><ul class=md-nav__list><li class=md-nav__item><a href=#use-the-state-machine class=md-nav__link><span class=md-ellipsis> Use the State Machine </span></a></li><li class=md-nav__item><a href=#see-also class=md-nav__link><span class=md-ellipsis> See Also </span></a></li></ul></nav></li></ul></nav></li><li class=md-nav__item><a href=../tdd-workflow/ class=md-nav__link><span class=md-ellipsis> 🧪 TDD Workflow </span></a></li><li class=md-nav__item><a href=../workflow-sequences/ class=md-nav__link><span class=md-ellipsis> 🔗 Workflow Sequences </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_3><label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex><span class=md-ellipsis> 🛠️ System Management </span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false><label class=md-nav__title for=__nav_3_3><span class="md-nav__icon md-icon"></span> 🛠️ System Management </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../cli-reference/ class=md-nav__link><span class=md-ellipsis> 💻 CLI Reference </span></a></li><li class=md-nav__item><a href=../project-setup/ class=md-nav__link><span class=md-ellipsis> 📂 Project Setup </span></a></li><li class=md-nav__item><a href=../multi-project-orchestration/ class=md-nav__link><span class=md-ellipsis> 🎯 Multi-Project Orchestration </span></a></li><li class=md-nav__item><a href=../agent-interface-management/ class=md-nav__link><span class=md-ellipsis> 🤖 Agent Interface Management </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_4><label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex><span class=md-ellipsis> 🔧 Advanced Features </span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false><label class=md-nav__title for=__nav_3_4><span class="md-nav__icon md-icon"></span> 🔧 Advanced Features </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../context-management/ class=md-nav__link><span class=md-ellipsis> 🧠 Context Management </span></a></li><li class=md-nav__item><a href=../testing/ class=md-nav__link><span class=md-ellipsis> ✅ Testing </span></a></li><li class=md-nav__item><a href=../performance-monitoring/ class=md-nav__link><span class=md-ellipsis> 📊 Performance Monitoring </span></a></li><li class=md-nav__item><a href=../performance-optimization/ class=md-nav__link><span class=md-ellipsis> ⚡ Performance Optimization </span></a></li><li class=md-nav__item><a href=../health-monitoring/ class=md-nav__link><span class=md-ellipsis> 🏥 Health Monitoring </span></a></li><li class=md-nav__item><a href=../integration-examples/ class=md-nav__link><span class=md-ellipsis> 🔌 Integration Examples </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_5><label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex><span class=md-ellipsis> 🎨 Interface & Support </span><span class="md-nav__icon md-icon"></span></label><nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false><label class=md-nav__title for=__nav_3_5><span class="md-nav__icon md-icon"></span> 🎨 Interface & Support </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../ui-portal-guide/ class=md-nav__link><span class=md-ellipsis> 🎨 UI Portal Guide </span></a></li><li class=md-nav__item><a href=../user-profile/ class=md-nav__link><span class=md-ellipsis> 👤 User Profile </span></a></li><li class=md-nav__item><a href=../troubleshooting/ class=md-nav__link><span class=md-ellipsis> 🔧 Troubleshooting </span></a></li><li class=md-nav__item><a href=../faq/ class=md-nav__link><span class=md-ellipsis> ❓ FAQ </span></a></li></ul></nav></li></ul></nav></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../concepts/ class=md-nav__link><span class=md-ellipsis> 🎯 Core Concepts </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../architecture/ class=md-nav__link><span class=md-ellipsis> 🏗️ Architecture </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../advanced/ class=md-nav__link><span class=md-ellipsis> 🔬 Advanced Topics </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../planning/ class=md-nav__link><span class=md-ellipsis> 🎨 Planning & Design </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../development/ class=md-nav__link><span class=md-ellipsis> 🛠️ Development </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../deployment/ class=md-nav__link><span class=md-ellipsis> 🚀 Deployment </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../templates/ class=md-nav__link><span class=md-ellipsis> 📋 Templates </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../theme-integration-guide/ class=md-nav__link><span class=md-ellipsis> 🎨 Theme Integration </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../archive/compliance/ class=md-nav__link><span class=md-ellipsis> 📁 Archive </span><span class="md-nav__icon md-icon"></span></a></li></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><a href=https://github.com/jmontp/agent-workflow/edit/master/docs/user-guide/state-machine.md title="Edit this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg></a><a href=https://github.com/jmontp/agent-workflow/raw/master/docs/user-guide/state-machine.md title="View source of this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg></a><h1 id=dual-state-machine-architecture>Dual State Machine Architecture<a class=headerlink href=#dual-state-machine-architecture title="Permanent link">&para;</a></h1><p><em>This document formalizes the dual state machine system: the primary Workflow State Machine for Scrum coordination and the secondary TDD State Machines for individual story implementation.</em></p><hr><h2 id=1-primary-workflow-state-machine>1. Primary Workflow State Machine<a class=headerlink href=#1-primary-workflow-state-machine title="Permanent link">&para;</a></h2><h3 id=top-level-states>Top-Level States<a class=headerlink href=#top-level-states title="Permanent link">&para;</a></h3><table><thead><tr><th>Key</th><th>State Name</th><th>Description</th></tr></thead><tbody><tr><td><strong>IDLE</strong></td><td>Idle / Awaiting Vision</td><td>No epic defined; waiting for <code class="language-text highlight">/epic</code> or backlog grooming.</td></tr><tr><td><strong>BACKLOG_READY</strong></td><td>Backlog Ready</td><td>Stories exist in the product backlog, none selected for sprint.</td></tr><tr><td><strong>SPRINT_PLANNED</strong></td><td>Sprint Planned</td><td>A sprint backlog has been drafted but not started.</td></tr><tr><td><strong>SPRINT_ACTIVE</strong></td><td>Sprint Active</td><td>Agents are working on tasks.</td></tr><tr><td><strong>SPRINT_PAUSED</strong></td><td>Sprint Paused</td><td>Active sprint is temporarily halted.</td></tr><tr><td><strong>SPRINT_REVIEW</strong></td><td>Sprint Review</td><td>Sprint tasks done; PR awaiting user review.</td></tr><tr><td><strong>BLOCKED</strong></td><td>Blocked Task</td><td>Sprint task failed CI 3× and awaits user input. (<em>Sub-state of <code class="language-text highlight">SPRINT_ACTIVE</code></em>.)</td></tr></tbody></table><hr><h3 id=workflow-command-state-matrix>Workflow Command → State Matrix<a class=headerlink href=#workflow-command-state-matrix title="Permanent link">&para;</a></h3><table><thead><tr><th>Command</th><th>Allowed in States</th><th>Resulting State</th></tr></thead><tbody><tr><td><code class="language-text highlight">/epic</code></td><td>IDLE, BACKLOG_READY</td><td>BACKLOG_READY</td></tr><tr><td><code class="language-text highlight">/approve</code></td><td>BACKLOG_READY</td><td>BACKLOG_READY</td></tr><tr><td><code class="language-text highlight">/backlog *</code></td><td>Any (except SPRINT_REVIEW locked)</td><td>(no change)</td></tr><tr><td><code class="language-text highlight">/sprint plan</code></td><td>BACKLOG_READY</td><td>SPRINT_PLANNED</td></tr><tr><td><code class="language-text highlight">/sprint start</code></td><td>SPRINT_PLANNED</td><td>SPRINT_ACTIVE</td></tr><tr><td><code class="language-text highlight">/sprint status</code></td><td>SPRINT_ACTIVE, SPRINT_PAUSED, BLOCKED</td><td>(no change)</td></tr><tr><td><code class="language-text highlight">/sprint pause</code></td><td>SPRINT_ACTIVE</td><td>SPRINT_PAUSED</td></tr><tr><td><code class="language-text highlight">/sprint resume</code></td><td>SPRINT_PAUSED</td><td>SPRINT_ACTIVE</td></tr><tr><td><code class="language-text highlight">/request_changes</code></td><td>SPRINT_REVIEW</td><td>BACKLOG_READY</td></tr><tr><td><code class="language-text highlight">/suggest_fix</code></td><td>BLOCKED</td><td>SPRINT_ACTIVE</td></tr><tr><td><code class="language-text highlight">/skip_task</code></td><td>BLOCKED</td><td>SPRINT_ACTIVE (next task)</td></tr><tr><td><code class="language-text highlight">/feedback</code></td><td>SPRINT_REVIEW</td><td>IDLE</td></tr></tbody></table><p><em>Commands issued outside their <strong>Allowed States</strong> trigger an error response (see §4).</em><br><em><code class="language-text highlight">/backlog</code> commands are always safe but may show different context (product vs sprint).</em><br><em><code class="language-text highlight">BLOCKED</code> is transient: once the user responds the orchestrator returns to <code class="language-text highlight">SPRINT_ACTIVE</code> or skips forward.</em></p><hr><h3 id=primary-workflow-state-diagram>Primary Workflow State Diagram<a class=headerlink href=#primary-workflow-state-diagram title="Permanent link">&para;</a></h3><pre class=mermaid><code>%%{init: {'theme': 'dark'}}%%
stateDiagram-v2
    [*] --&gt; IDLE
    IDLE --&gt; BACKLOG_READY : /epic
    BACKLOG_READY --&gt; BACKLOG_READY : /approve
    BACKLOG_READY --&gt; SPRINT_PLANNED : /sprint plan
    SPRINT_PLANNED --&gt; SPRINT_ACTIVE : /sprint start
    SPRINT_ACTIVE --&gt; SPRINT_PAUSED : /sprint pause
    SPRINT_PAUSED --&gt; SPRINT_ACTIVE : /sprint resume
    SPRINT_ACTIVE --&gt; BLOCKED : CI fails 3×
    BLOCKED --&gt; SPRINT_ACTIVE : /suggest_fix | /skip_task
    SPRINT_ACTIVE --&gt; SPRINT_REVIEW : all tasks done (TDD complete)
    SPRINT_REVIEW --&gt; BACKLOG_READY : /request_changes
    SPRINT_REVIEW --&gt; IDLE : /feedback (retrospective complete)
    
    note right of SPRINT_ACTIVE : TDD cycles coordination
    note right of SPRINT_REVIEW : Requires TDD completion</code></pre><hr><h2 id=2-secondary-tdd-state-machines>2. Secondary TDD State Machines<a class=headerlink href=#2-secondary-tdd-state-machines title="Permanent link">&para;</a></h2><h3 id=tdd-states-per-story>TDD States per Story<a class=headerlink href=#tdd-states-per-story title="Permanent link">&para;</a></h3><p>When the primary state machine enters <code class="language-text highlight">SPRINT_ACTIVE</code>, individual TDD state machines are created for each story in the sprint.</p><table><thead><tr><th>Key</th><th>State Name</th><th>Description</th></tr></thead><tbody><tr><td><strong>DESIGN</strong></td><td>Design Phase</td><td>Design Agent creates technical specifications and architecture.</td></tr><tr><td><strong>TEST_RED</strong></td><td>Test Red Phase</td><td>QA Agent writes failing tests based on design specifications.</td></tr><tr><td><strong>CODE_GREEN</strong></td><td>Code Green Phase</td><td>Code Agent implements minimal code to make all tests pass.</td></tr><tr><td><strong>REFACTOR</strong></td><td>Refactor Phase</td><td>Code Agent improves code quality while maintaining green tests.</td></tr><tr><td><strong>COMMIT</strong></td><td>Commit Phase</td><td>Code Agent commits changes and completes the story.</td></tr></tbody></table><h3 id=tdd-command-state-matrix>TDD Command → State Matrix<a class=headerlink href=#tdd-command-state-matrix title="Permanent link">&para;</a></h3><table><thead><tr><th>Command</th><th>Allowed in States</th><th>Resulting State</th></tr></thead><tbody><tr><td><code class="language-text highlight">/tdd start &lt;ID&gt;</code></td><td>Any (auto-started from SPRINT_ACTIVE)</td><td>DESIGN</td></tr><tr><td><code class="language-text highlight">/tdd status [ID]</code></td><td>Any TDD state</td><td>(no change)</td></tr><tr><td><code class="language-text highlight">/tdd design_complete &lt;ID&gt;</code></td><td>DESIGN</td><td>TEST_RED</td></tr><tr><td><code class="language-text highlight">/tdd tests_ready &lt;ID&gt;</code></td><td>TEST_RED</td><td>CODE_GREEN</td></tr><tr><td><code class="language-text highlight">/tdd code_green &lt;ID&gt;</code></td><td>CODE_GREEN</td><td>REFACTOR</td></tr><tr><td><code class="language-text highlight">/tdd refactor_done &lt;ID&gt;</code></td><td>REFACTOR</td><td>COMMIT</td></tr><tr><td><code class="language-text highlight">/tdd review_cycle &lt;ID&gt;</code></td><td>Any TDD state</td><td>(pause for review)</td></tr><tr><td><code class="language-text highlight">/tdd skip_phase &lt;ID&gt;</code></td><td>Any TDD state</td><td>(next phase)</td></tr><tr><td><code class="language-text highlight">/tdd pause &lt;ID&gt;</code></td><td>Any active TDD state</td><td>(paused)</td></tr><tr><td><code class="language-text highlight">/tdd resume &lt;ID&gt;</code></td><td>Paused TDD state</td><td>(previous state)</td></tr></tbody></table><h3 id=tdd-state-diagram>TDD State Diagram<a class=headerlink href=#tdd-state-diagram title="Permanent link">&para;</a></h3><pre class=mermaid><code>%%{init: {'theme': 'dark'}}%%
stateDiagram-v2
    [*] --&gt; DESIGN
    DESIGN --&gt; TEST_RED : design complete
    TEST_RED --&gt; CODE_GREEN : tests failing properly
    CODE_GREEN --&gt; REFACTOR : all tests passing
    REFACTOR --&gt; COMMIT : quality gates met
    COMMIT --&gt; [*] : story complete
    
    note right of DESIGN
        Design Agent creates
        technical specifications
    end note
    
    note right of TEST_RED
        QA Agent writes
        failing tests
    end note
    
    note right of CODE_GREEN
        Code Agent makes
        tests pass
    end note
    
    note right of REFACTOR
        Code Agent improves
        code quality
    end note
    
    note right of COMMIT
        Code Agent commits
        and closes story
    end note
    
    %% Error transitions
    REFACTOR --&gt; CODE_GREEN : tests broken
    CODE_GREEN --&gt; TEST_RED : need more tests
    TEST_RED --&gt; DESIGN : requirements unclear</code></pre><h3 id=parallel-tdd-execution>Parallel TDD Execution<a class=headerlink href=#parallel-tdd-execution title="Permanent link">&para;</a></h3><p>Multiple TDD state machines run simultaneously during an active sprint:</p><pre class=mermaid><code>%%{init: {'theme': 'dark'}}%%
stateDiagram-v2
    state "Workflow State Machine" as WSM
    state "Sprint Active" as ACTIVE
    
    state "Story AUTH-1 TDD" as TDD1 {
        state "DESIGN" as D1
        state "TEST_RED" as T1
        state "CODE_GREEN" as C1
        state "REFACTOR" as R1
        state "COMMIT" as CM1
        
        [*] --&gt; D1
        D1 --&gt; T1
        T1 --&gt; C1
        C1 --&gt; R1
        R1 --&gt; CM1
        CM1 --&gt; [*]
    }
    
    state "Story AUTH-2 TDD" as TDD2 {
        state "DESIGN" as D2
        state "TEST_RED" as T2
        state "CODE_GREEN" as C2
        state "REFACTOR" as R2
        state "COMMIT" as CM2
        
        [*] --&gt; D2
        D2 --&gt; T2
        T2 --&gt; C2
        C2 --&gt; R2
        R2 --&gt; CM2
        CM2 --&gt; [*]
    }
    
    state "Story AUTH-3 TDD" as TDD3 {
        state "DESIGN" as D3
        state "TEST_RED" as T3
        state "CODE_GREEN" as C3
        state "REFACTOR" as R3
        state "COMMIT" as CM3
        
        [*] --&gt; D3
        D3 --&gt; T3
        T3 --&gt; C3
        C3 --&gt; R3
        R3 --&gt; CM3
        CM3 --&gt; [*]
    }
    
    WSM --&gt; ACTIVE
    ACTIVE --&gt; TDD1 : spawn
    ACTIVE --&gt; TDD2 : spawn
    ACTIVE --&gt; TDD3 : spawn</code></pre><h2 id=3-state-machine-interactions>3. State Machine Interactions<a class=headerlink href=#3-state-machine-interactions title="Permanent link">&para;</a></h2><h3 id=primary-to-secondary-activation>Primary to Secondary Activation<a class=headerlink href=#primary-to-secondary-activation title="Permanent link">&para;</a></h3><p>When the primary state machine transitions to <code class="language-text highlight">SPRINT_ACTIVE</code>, it triggers the creation of TDD state machines:</p><pre class=mermaid><code>sequenceDiagram
    participant U as User
    participant WSM as Workflow State Machine
    participant Coord as Multi-Task Coordinator
    participant TDD as TDD State Machine
    
    U-&gt;&gt;WSM: /sprint start
    WSM-&gt;&gt;WSM: SPRINT_PLANNED → SPRINT_ACTIVE
    WSM-&gt;&gt;Coord: Create TDD cycles
    
    loop For each story in sprint
        Coord-&gt;&gt;TDD: Create TDD instance
        TDD-&gt;&gt;TDD: Initialize DESIGN phase
        Note over TDD: Story-specific TDD cycle begins
    end
    
    TDD-&gt;&gt;Coord: Progress updates
    Coord-&gt;&gt;WSM: Sprint progress
    WSM-&gt;&gt;U: Status updates</code></pre><h3 id=cross-state-machine-commands>Cross-State Machine Commands<a class=headerlink href=#cross-state-machine-commands title="Permanent link">&para;</a></h3><p>Some commands affect both state machines:</p><table><thead><tr><th>Command</th><th>Primary Effect</th><th>Secondary Effect</th></tr></thead><tbody><tr><td><code class="language-text highlight">/sprint pause</code></td><td>SPRINT_ACTIVE → SPRINT_PAUSED</td><td>Pause all TDD cycles</td></tr><tr><td><code class="language-text highlight">/sprint resume</code></td><td>SPRINT_PAUSED → SPRINT_ACTIVE</td><td>Resume all TDD cycles</td></tr><tr><td><code class="language-text highlight">/sprint status</code></td><td>Show sprint progress</td><td>Show TDD cycle status</td></tr><tr><td><code class="language-text highlight">/state</code></td><td>Show workflow state</td><td>Show active TDD states</td></tr></tbody></table><hr><h2 id=4-standardised-error-hint-response>4. Standardised Error &amp; Hint Response<a class=headerlink href=#4-standardised-error-hint-response title="Permanent link">&para;</a></h2><p>When a user issues an invalid command for the current state, the orchestrator must reply with:</p><div class="language-json highlight"><span class=filename>JSON</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><a href=#__codelineno-0-1><span class=linenos data-linenos="1 "></span></a><span class=p>{</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><a href=#__codelineno-0-2><span class=linenos data-linenos="2 "></span></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;error&quot;</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><a href=#__codelineno-0-3><span class=linenos data-linenos="3 "></span></a><span class=w>  </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;INVALID_STATE&quot;</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><a href=#__codelineno-0-4><span class=linenos data-linenos="4 "></span></a><span class=w>  </span><span class=nt>&quot;current_state&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SPRINT_ACTIVE&quot;</span><span class=p>,</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><a href=#__codelineno-0-5><span class=linenos data-linenos="5 "></span></a><span class=w>  </span><span class=nt>&quot;command&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;/sprint plan&quot;</span><span class=p>,</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6></a><a href=#__codelineno-0-6><span class=linenos data-linenos="6 "></span></a><span class=w>  </span><span class=nt>&quot;allowed_in&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;BACKLOG_READY&quot;</span><span class=p>],</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7></a><a href=#__codelineno-0-7><span class=linenos data-linenos="7 "></span></a><span class=w>  </span><span class=nt>&quot;hint&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Sprint already active. Use /sprint status or /sprint pause instead.&quot;</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8></a><a href=#__codelineno-0-8><span class=linenos data-linenos="8 "></span></a><span class=p>}</span>
</span></code></pre></div><p>In Discord this is rendered as:</p><blockquote><p>⚠️ Command <code class="language-text highlight">/sprint plan</code> is not allowed now (state: <strong>SPRINT_ACTIVE</strong>). Try <code class="language-text highlight">/sprint status</code> or <code class="language-text highlight">/sprint pause</code>.</p></blockquote><hr><h2 id=5-real-time-state-broadcasting-and-visualization>5. Real-time State Broadcasting and Visualization<a class=headerlink href=#5-real-time-state-broadcasting-and-visualization title="Permanent link">&para;</a></h2><h3 id=websocket-integration>WebSocket Integration<a class=headerlink href=#websocket-integration title="Permanent link">&para;</a></h3><p>The enhanced state machine provides real-time updates through WebSocket broadcasting:</p><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a><a href=#__codelineno-1-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># Automatic state transition broadcasting</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a><a href=#__codelineno-1-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>transition</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>command</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>project_name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;default&quot;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CommandResult</span><span class=p>:</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a><a href=#__codelineno-1-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>validate_command</span><span class=p>(</span><span class=n>command</span><span class=p>)</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a><a href=#__codelineno-1-4><span class=linenos data-linenos=" 4 "></span></a>    
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><a href=#__codelineno-1-5><span class=linenos data-linenos=" 5 "></span></a>    <span class=k>if</span> <span class=n>result</span><span class=o>.</span><span class=n>success</span> <span class=ow>and</span> <span class=n>result</span><span class=o>.</span><span class=n>new_state</span><span class=p>:</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6></a><a href=#__codelineno-1-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=n>old_state</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_state</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7></a><a href=#__codelineno-1-7><span class=linenos data-linenos=" 7 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>current_state</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>new_state</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8></a><a href=#__codelineno-1-8><span class=linenos data-linenos=" 8 "></span></a>        
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9></a><a href=#__codelineno-1-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=c1># Emit real-time transition for visualization</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10></a><a href=#__codelineno-1-10><span class=linenos data-linenos="10 "></span></a>        <span class=n>emit_workflow_transition</span><span class=p>(</span><span class=n>old_state</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_state</span><span class=p>,</span> <span class=n>project_name</span><span class=p>)</span>
</span></code></pre></div><h3 id=real-time-event-types>Real-time Event Types<a class=headerlink href=#real-time-event-types title="Permanent link">&para;</a></h3><table><thead><tr><th>Event Type</th><th>Description</th><th>Payload</th></tr></thead><tbody><tr><td><code class="language-text highlight">workflow_transition</code></td><td>Primary state machine transitions</td><td><code class="language-text highlight">{old_state, new_state, project_name, timestamp}</code></td></tr><tr><td><code class="language-text highlight">tdd_transition</code></td><td>TDD cycle state changes</td><td><code class="language-text highlight">{cycle_id, story_id, old_state, new_state, agent_type}</code></td></tr><tr><td><code class="language-text highlight">agent_activity</code></td><td>Agent execution events</td><td><code class="language-text highlight">{agent_type, action, status, duration}</code></td></tr><tr><td><code class="language-text highlight">state_update</code></td><td>Full state synchronization</td><td><code class="language-text highlight">{workflow_state, active_cycles, system_status}</code></td></tr></tbody></table><h3 id=live-visualization>Live Visualization<a class=headerlink href=#live-visualization title="Permanent link">&para;</a></h3><p>Access the real-time state visualizer at: <strong><a href=http://localhost:5000>http://localhost:5000</a></strong></p><div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a><a href=#__codelineno-2-1><span class=linenos data-linenos="1 "></span></a><span class=c1># Start the state visualizer</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a><a href=#__codelineno-2-2><span class=linenos data-linenos="2 "></span></a><span class=nb>cd</span><span class=w> </span>tools/visualizer
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a><a href=#__codelineno-2-3><span class=linenos data-linenos="3 "></span></a>python<span class=w> </span>app.py<span class=w> </span>--host<span class=w> </span><span class=m>0</span>.0.0.0<span class=w> </span>--port<span class=w> </span><span class=m>5000</span>
</span></code></pre></div><p>The visualizer provides: - <strong>Live State Diagrams</strong>: Real-time highlighting of current states - <strong>TDD Cycle Tracking</strong>: Visual representation of parallel TDD execution - <strong>Activity Log</strong>: Chronological event stream with filtering - <strong>Connection Status</strong>: WebSocket connection monitoring</p><hr><h2 id=6-state-transition-history-and-recovery>6. State Transition History and Recovery<a class=headerlink href=#6-state-transition-history-and-recovery title="Permanent link">&para;</a></h2><h3 id=transition-history-tracking>Transition History Tracking<a class=headerlink href=#transition-history-tracking title="Permanent link">&para;</a></h3><p>The state machine maintains a comprehensive audit trail:</p><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a><a href=#__codelineno-3-1><span class=linenos data-linenos="1 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>_track_transition_minimal</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>old_state</span><span class=p>:</span> <span class=n>State</span><span class=p>,</span> <span class=n>new_state</span><span class=p>:</span> <span class=n>State</span><span class=p>,</span> <span class=n>command</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2></a><a href=#__codelineno-3-2><span class=linenos data-linenos="2 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_transition_history</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3></a><a href=#__codelineno-3-3><span class=linenos data-linenos="3 "></span></a>        <span class=s2>&quot;timestamp&quot;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4></a><a href=#__codelineno-3-4><span class=linenos data-linenos="4 "></span></a>        <span class=s2>&quot;from&quot;</span><span class=p>:</span> <span class=n>old_state</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5></a><a href=#__codelineno-3-5><span class=linenos data-linenos="5 "></span></a>        <span class=s2>&quot;to&quot;</span><span class=p>:</span> <span class=n>new_state</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6></a><a href=#__codelineno-3-6><span class=linenos data-linenos="6 "></span></a>        <span class=s2>&quot;command&quot;</span><span class=p>:</span> <span class=n>command</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7></a><a href=#__codelineno-3-7><span class=linenos data-linenos="7 "></span></a>    <span class=p>})</span>
</span></code></pre></div><h3 id=recovery-mechanisms>Recovery Mechanisms<a class=headerlink href=#recovery-mechanisms title="Permanent link">&para;</a></h3><h4 id=automatic-recovery-options>Automatic Recovery Options<a class=headerlink href=#automatic-recovery-options title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1></a><a href=#__codelineno-4-1><span class=linenos data-linenos="1 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>get_recovery_options</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>]:</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2></a><a href=#__codelineno-4-2><span class=linenos data-linenos="2 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get available recovery options based on state history&quot;&quot;&quot;</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3></a><a href=#__codelineno-4-3><span class=linenos data-linenos="3 "></span></a>    <span class=c1># Returns unique recent states as recovery options</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4></a><a href=#__codelineno-4-4><span class=linenos data-linenos="4 "></span></a>    <span class=k>return</span> <span class=p>[</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5></a><a href=#__codelineno-4-5><span class=linenos data-linenos="5 "></span></a>        <span class=p>{</span><span class=s2>&quot;state&quot;</span><span class=p>:</span> <span class=s2>&quot;SPRINT_ACTIVE&quot;</span><span class=p>,</span> <span class=s2>&quot;timestamp&quot;</span><span class=p>:</span> <span class=s2>&quot;2024-01-15T10:30:00&quot;</span><span class=p>,</span> <span class=s2>&quot;reason&quot;</span><span class=p>:</span> <span class=s2>&quot;recover_from_/sprint_pause&quot;</span><span class=p>},</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6></a><a href=#__codelineno-4-6><span class=linenos data-linenos="6 "></span></a>        <span class=p>{</span><span class=s2>&quot;state&quot;</span><span class=p>:</span> <span class=s2>&quot;BACKLOG_READY&quot;</span><span class=p>,</span> <span class=s2>&quot;timestamp&quot;</span><span class=p>:</span> <span class=s2>&quot;2024-01-15T09:15:00&quot;</span><span class=p>,</span> <span class=s2>&quot;reason&quot;</span><span class=p>:</span> <span class=s2>&quot;recover_from_/epic&quot;</span><span class=p>}</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7></a><a href=#__codelineno-4-7><span class=linenos data-linenos="7 "></span></a>    <span class=p>]</span>
</span></code></pre></div><h4 id=manual-state-recovery>Manual State Recovery<a class=headerlink href=#manual-state-recovery title="Permanent link">&para;</a></h4><p>For emergency situations, manual state recovery is available:</p><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a><a href=#__codelineno-5-1><span class=linenos data-linenos="1 "></span></a><span class=c1># Force state transition with audit trail</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2></a><a href=#__codelineno-5-2><span class=linenos data-linenos="2 "></span></a><span class=n>state_machine</span><span class=o>.</span><span class=n>force_state</span><span class=p>(</span><span class=n>State</span><span class=o>.</span><span class=n>SPRINT_ACTIVE</span><span class=p>,</span> <span class=n>reason</span><span class=o>=</span><span class=s2>&quot;ci_recovery&quot;</span><span class=p>)</span>
</span></code></pre></div><h3 id=state-audit-trail>State Audit Trail<a class=headerlink href=#state-audit-trail title="Permanent link">&para;</a></h3><p>Access transition history via the <code class="language-text highlight">/state</code> command:</p><div class="language-json highlight"><span class=filename>JSON</span><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1></a><a href=#__codelineno-6-1><span class=linenos data-linenos="1 "></span></a><span class=p>{</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2></a><a href=#__codelineno-6-2><span class=linenos data-linenos="2 "></span></a><span class=w>  </span><span class=nt>&quot;current_state&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SPRINT_ACTIVE&quot;</span><span class=p>,</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3></a><a href=#__codelineno-6-3><span class=linenos data-linenos="3 "></span></a><span class=w>  </span><span class=nt>&quot;recent_transitions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4></a><a href=#__codelineno-6-4><span class=linenos data-linenos="4 "></span></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;timestamp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-15T10:30:00&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;from&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SPRINT_PLANNED&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;to&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SPRINT_ACTIVE&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;command&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;/sprint start&quot;</span><span class=p>},</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5></a><a href=#__codelineno-6-5><span class=linenos data-linenos="5 "></span></a><span class=w>    </span><span class=p>{</span><span class=nt>&quot;timestamp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-15T10:25:00&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;from&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;BACKLOG_READY&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;to&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SPRINT_PLANNED&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;command&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;/sprint plan&quot;</span><span class=p>}</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6></a><a href=#__codelineno-6-6><span class=linenos data-linenos="6 "></span></a><span class=w>  </span><span class=p>],</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7></a><a href=#__codelineno-6-7><span class=linenos data-linenos="7 "></span></a><span class=w>  </span><span class=nt>&quot;recovery_options&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=err>...</span><span class=p>]</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8></a><a href=#__codelineno-6-8><span class=linenos data-linenos="8 "></span></a><span class=p>}</span>
</span></code></pre></div><hr><h2 id=7-context-aware-validation-and-tdd-constraints>7. Context-Aware Validation and TDD Constraints<a class=headerlink href=#7-context-aware-validation-and-tdd-constraints title="Permanent link">&para;</a></h2><h3 id=context-aware-state-transitions>Context-Aware State Transitions<a class=headerlink href=#context-aware-state-transitions title="Permanent link">&para;</a></h3><p>The state machine now validates transitions based on contextual information:</p><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a><a href=#__codelineno-7-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>_validate_transition_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>command</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>target_state</span><span class=p>:</span> <span class=n>State</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CommandResult</span><span class=p>:</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2></a><a href=#__codelineno-7-2><span class=linenos data-linenos=" 2 "></span></a>    <span class=c1># TDD cycle constraints</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3></a><a href=#__codelineno-7-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>if</span> <span class=n>target_state</span> <span class=ow>in</span> <span class=p>[</span><span class=n>State</span><span class=o>.</span><span class=n>SPRINT_REVIEW</span><span class=p>,</span> <span class=n>State</span><span class=o>.</span><span class=n>IDLE</span><span class=p>]</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>has_active_tdd_cycles</span><span class=p>():</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4></a><a href=#__codelineno-7-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=k>return</span> <span class=n>CommandResult</span><span class=p>(</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5></a><a href=#__codelineno-7-5><span class=linenos data-linenos=" 5 "></span></a>            <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6></a><a href=#__codelineno-7-6><span class=linenos data-linenos=" 6 "></span></a>            <span class=n>error_message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;Cannot transition to </span><span class=si>{</span><span class=n>target_state</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> with active TDD cycles&quot;</span><span class=p>,</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7></a><a href=#__codelineno-7-7><span class=linenos data-linenos=" 7 "></span></a>            <span class=n>hint</span><span class=o>=</span><span class=s2>&quot;Complete active TDD cycles or use force_transition=True&quot;</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8></a><a href=#__codelineno-7-8><span class=linenos data-linenos=" 8 "></span></a>        <span class=p>)</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9></a><a href=#__codelineno-7-9><span class=linenos data-linenos=" 9 "></span></a>    
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10></a><a href=#__codelineno-7-10><span class=linenos data-linenos="10 "></span></a>    <span class=c1># CI status constraints</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11></a><a href=#__codelineno-7-11><span class=linenos data-linenos="11 "></span></a>    <span class=k>if</span> <span class=n>target_state</span> <span class=o>==</span> <span class=n>State</span><span class=o>.</span><span class=n>SPRINT_ACTIVE</span> <span class=ow>and</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ci_status&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;failing&quot;</span><span class=p>:</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12></a><a href=#__codelineno-7-12><span class=linenos data-linenos="12 "></span></a>        <span class=k>return</span> <span class=n>CommandResult</span><span class=p>(</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13></a><a href=#__codelineno-7-13><span class=linenos data-linenos="13 "></span></a>            <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14></a><a href=#__codelineno-7-14><span class=linenos data-linenos="14 "></span></a>            <span class=n>error_message</span><span class=o>=</span><span class=s2>&quot;Cannot start sprint with failing CI&quot;</span><span class=p>,</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15></a><a href=#__codelineno-7-15><span class=linenos data-linenos="15 "></span></a>            <span class=n>hint</span><span class=o>=</span><span class=s2>&quot;Fix CI failures before starting sprint&quot;</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16></a><a href=#__codelineno-7-16><span class=linenos data-linenos="16 "></span></a>        <span class=p>)</span>
</span></code></pre></div><h3 id=tdd-integration-constraints>TDD Integration Constraints<a class=headerlink href=#tdd-integration-constraints title="Permanent link">&para;</a></h3><h4 id=sprint-tdd-lifecycle-coordination>Sprint-TDD Lifecycle Coordination<a class=headerlink href=#sprint-tdd-lifecycle-coordination title="Permanent link">&para;</a></h4><p>The state machine enforces proper coordination between sprint and TDD states:</p><table><thead><tr><th>Sprint State</th><th>TDD Constraint</th><th>Enforcement</th></tr></thead><tbody><tr><td><code class="language-text highlight">SPRINT_ACTIVE</code></td><td>Can have active TDD cycles</td><td>✅ Normal operation</td></tr><tr><td><code class="language-text highlight">SPRINT_PAUSED</code></td><td>TDD cycles paused</td><td>🟡 Automatic pause</td></tr><tr><td><code class="language-text highlight">SPRINT_REVIEW</code></td><td>No active TDD cycles</td><td>❌ Blocks transition</td></tr><tr><td><code class="language-text highlight">IDLE</code></td><td>No active TDD cycles</td><td>❌ Blocks transition</td></tr></tbody></table><h4 id=context-validation-examples>Context Validation Examples<a class=headerlink href=#context-validation-examples title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1></a><a href=#__codelineno-8-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># Uncommitted changes constraint</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2></a><a href=#__codelineno-8-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>if</span> <span class=n>command</span> <span class=o>==</span> <span class=s2>&quot;/sprint start&quot;</span> <span class=ow>and</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;has_uncommitted_changes&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>):</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3></a><a href=#__codelineno-8-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>return</span> <span class=n>CommandResult</span><span class=p>(</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4></a><a href=#__codelineno-8-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5></a><a href=#__codelineno-8-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=n>error_message</span><span class=o>=</span><span class=s2>&quot;Cannot start sprint with uncommitted changes&quot;</span><span class=p>,</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6></a><a href=#__codelineno-8-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=n>hint</span><span class=o>=</span><span class=s2>&quot;Commit or stash pending changes before starting sprint&quot;</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7></a><a href=#__codelineno-8-7><span class=linenos data-linenos=" 7 "></span></a>    <span class=p>)</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8></a><a href=#__codelineno-8-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9></a><a href=#__codelineno-8-9><span class=linenos data-linenos=" 9 "></span></a><span class=c1># Active TDD cycles constraint</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10></a><a href=#__codelineno-8-10><span class=linenos data-linenos="10 "></span></a><span class=k>if</span> <span class=n>target_state</span> <span class=o>==</span> <span class=n>State</span><span class=o>.</span><span class=n>SPRINT_REVIEW</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>has_active_tdd_cycles</span><span class=p>():</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11></a><a href=#__codelineno-8-11><span class=linenos data-linenos="11 "></span></a>    <span class=n>active_cycles</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>active_tdd_cycles</span><span class=o>.</span><span class=n>values</span><span class=p>())</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12></a><a href=#__codelineno-8-12><span class=linenos data-linenos="12 "></span></a>    <span class=k>return</span> <span class=n>CommandResult</span><span class=p>(</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13></a><a href=#__codelineno-8-13><span class=linenos data-linenos="13 "></span></a>        <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14></a><a href=#__codelineno-8-14><span class=linenos data-linenos="14 "></span></a>        <span class=n>error_message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;Cannot transition to SPRINT_REVIEW with active TDD cycles: </span><span class=si>{</span><span class=n>active_cycles</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15></a><a href=#__codelineno-8-15><span class=linenos data-linenos="15 "></span></a>        <span class=n>hint</span><span class=o>=</span><span class=s2>&quot;Complete or abort active TDD cycles before sprint review&quot;</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16></a><a href=#__codelineno-8-16><span class=linenos data-linenos="16 "></span></a>    <span class=p>)</span>
</span></code></pre></div><hr><h2 id=8-enhanced-state-machine-features>8. Enhanced State Machine Features<a class=headerlink href=#8-enhanced-state-machine-features title="Permanent link">&para;</a></h2><h3 id=tdd-cycle-management-integration>TDD Cycle Management Integration<a class=headerlink href=#tdd-cycle-management-integration title="Permanent link">&para;</a></h3><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1></a><a href=#__codelineno-9-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>class</span><span class=w> </span><span class=nc>StateMachine</span><span class=p>:</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2></a><a href=#__codelineno-9-2><span class=linenos data-linenos=" 2 "></span></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>initial_state</span><span class=p>:</span> <span class=n>State</span> <span class=o>=</span> <span class=n>State</span><span class=o>.</span><span class=n>IDLE</span><span class=p>):</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3></a><a href=#__codelineno-9-3><span class=linenos data-linenos=" 3 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>active_tdd_cycles</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># story_id -&gt; cycle_id mapping</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4></a><a href=#__codelineno-9-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>tdd_transition_listeners</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>callable</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5></a><a href=#__codelineno-9-5><span class=linenos data-linenos=" 5 "></span></a>    
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6></a><a href=#__codelineno-9-6><span class=linenos data-linenos=" 6 "></span></a>    <span class=k>def</span><span class=w> </span><span class=nf>register_tdd_cycle</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>story_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7></a><a href=#__codelineno-9-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Register an active TDD cycle for a story&quot;&quot;&quot;</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8></a><a href=#__codelineno-9-8><span class=linenos data-linenos=" 8 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>active_tdd_cycles</span><span class=p>[</span><span class=n>story_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>cycle_id</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9></a><a href=#__codelineno-9-9><span class=linenos data-linenos=" 9 "></span></a>    
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10></a><a href=#__codelineno-9-10><span class=linenos data-linenos="10 "></span></a>    <span class=k>def</span><span class=w> </span><span class=nf>unregister_tdd_cycle</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>story_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11></a><a href=#__codelineno-9-11><span class=linenos data-linenos="11 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Unregister a TDD cycle when complete&quot;&quot;&quot;</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12></a><a href=#__codelineno-9-12><span class=linenos data-linenos="12 "></span></a>        <span class=k>if</span> <span class=n>story_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>active_tdd_cycles</span><span class=p>:</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13></a><a href=#__codelineno-9-13><span class=linenos data-linenos="13 "></span></a>            <span class=n>cycle_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>active_tdd_cycles</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>story_id</span><span class=p>)</span>
</span></code></pre></div><h3 id=advanced-state-information>Advanced State Information<a class=headerlink href=#advanced-state-information title="Permanent link">&para;</a></h3><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1></a><a href=#__codelineno-10-1><span class=linenos data-linenos=" 1 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>get_state_info</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>include_matrix</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2></a><a href=#__codelineno-10-2><span class=linenos data-linenos=" 2 "></span></a>    <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3></a><a href=#__codelineno-10-3><span class=linenos data-linenos=" 3 "></span></a>        <span class=s2>&quot;current_state&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_state</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4></a><a href=#__codelineno-10-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=s2>&quot;allowed_commands&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_allowed_commands</span><span class=p>(),</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5></a><a href=#__codelineno-10-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=s2>&quot;tdd_integration&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6></a><a href=#__codelineno-10-6><span class=linenos data-linenos=" 6 "></span></a>            <span class=s2>&quot;active_cycles&quot;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>active_tdd_cycles</span><span class=p>),</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7></a><a href=#__codelineno-10-7><span class=linenos data-linenos=" 7 "></span></a>            <span class=s2>&quot;cycle_ids&quot;</span><span class=p>:</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>active_tdd_cycles</span><span class=o>.</span><span class=n>keys</span><span class=p>()),</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8></a><a href=#__codelineno-10-8><span class=linenos data-linenos=" 8 "></span></a>            <span class=s2>&quot;can_transition_to_review&quot;</span><span class=p>:</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>has_active_tdd_cycles</span><span class=p>()</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9></a><a href=#__codelineno-10-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=p>},</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10></a><a href=#__codelineno-10-10><span class=linenos data-linenos="10 "></span></a>        <span class=s2>&quot;state_flags&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11></a><a href=#__codelineno-10-11><span class=linenos data-linenos="11 "></span></a>            <span class=s2>&quot;is_terminal&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_terminal_state</span><span class=p>(),</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12></a><a href=#__codelineno-10-12><span class=linenos data-linenos="12 "></span></a>            <span class=s2>&quot;can_auto_progress&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>can_auto_progress</span><span class=p>(),</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13></a><a href=#__codelineno-10-13><span class=linenos data-linenos="13 "></span></a>            <span class=s2>&quot;has_active_work&quot;</span><span class=p>:</span> <span class=nb>bool</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>active_tdd_cycles</span><span class=p>)</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14></a><a href=#__codelineno-10-14><span class=linenos data-linenos="14 "></span></a>        <span class=p>}</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15></a><a href=#__codelineno-10-15><span class=linenos data-linenos="15 "></span></a>    <span class=p>}</span>
</span></code></pre></div><h3 id=terminal-state-detection>Terminal State Detection<a class=headerlink href=#terminal-state-detection title="Permanent link">&para;</a></h3><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1></a><a href=#__codelineno-11-1><span class=linenos data-linenos="1 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>is_terminal_state</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2></a><a href=#__codelineno-11-2><span class=linenos data-linenos="2 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if current state requires external input to progress&quot;&quot;&quot;</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3></a><a href=#__codelineno-11-3><span class=linenos data-linenos="3 "></span></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_state</span> <span class=ow>in</span> <span class=p>[</span><span class=n>State</span><span class=o>.</span><span class=n>BLOCKED</span><span class=p>,</span> <span class=n>State</span><span class=o>.</span><span class=n>SPRINT_REVIEW</span><span class=p>]</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4></a><a href=#__codelineno-11-4><span class=linenos data-linenos="4 "></span></a>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5></a><a href=#__codelineno-11-5><span class=linenos data-linenos="5 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>can_auto_progress</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6></a><a href=#__codelineno-11-6><span class=linenos data-linenos="6 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if state machine can automatically progress&quot;&quot;&quot;</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7></a><a href=#__codelineno-11-7><span class=linenos data-linenos="7 "></span></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_state</span> <span class=ow>in</span> <span class=p>[</span><span class=n>State</span><span class=o>.</span><span class=n>SPRINT_ACTIVE</span><span class=p>]</span>
</span></code></pre></div><hr><h2 id=9-performance-and-monitoring>9. Performance and Monitoring<a class=headerlink href=#9-performance-and-monitoring title="Permanent link">&para;</a></h2><h3 id=state-transition-metrics>State Transition Metrics<a class=headerlink href=#state-transition-metrics title="Permanent link">&para;</a></h3><p>The enhanced state machine tracks performance metrics:</p><ul><li><strong>Transition Latency</strong>: Time between command and state change</li><li><strong>TDD Cycle Duration</strong>: Time spent in each TDD phase</li><li><strong>Error Rate</strong>: Frequency of invalid command attempts</li><li><strong>Recovery Usage</strong>: How often state recovery is needed</li></ul><h3 id=real-time-dashboard-integration>Real-time Dashboard Integration<a class=headerlink href=#real-time-dashboard-integration title="Permanent link">&para;</a></h3><p>State metrics are available through the visualizer dashboard:</p><div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1></a><a href=#__codelineno-12-1><span class=linenos data-linenos="1 "></span></a><span class=c1># Access metrics endpoint</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2></a><a href=#__codelineno-12-2><span class=linenos data-linenos="2 "></span></a>curl<span class=w> </span>http://localhost:5000/api/state
</span></code></pre></div><p><strong>Response:</strong><div class="language-json highlight"><span class=filename>JSON</span><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1></a><a href=#__codelineno-13-1><span class=linenos data-linenos=" 1 "></span></a><span class=p>{</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2></a><a href=#__codelineno-13-2><span class=linenos data-linenos=" 2 "></span></a><span class=w>  </span><span class=nt>&quot;workflow_state&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SPRINT_ACTIVE&quot;</span><span class=p>,</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3></a><a href=#__codelineno-13-3><span class=linenos data-linenos=" 3 "></span></a><span class=w>  </span><span class=nt>&quot;active_tdd_cycles&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4></a><a href=#__codelineno-13-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>  </span><span class=nt>&quot;state_metrics&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5></a><a href=#__codelineno-13-5><span class=linenos data-linenos=" 5 "></span></a><span class=w>    </span><span class=nt>&quot;total_transitions&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>42</span><span class=p>,</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6></a><a href=#__codelineno-13-6><span class=linenos data-linenos=" 6 "></span></a><span class=w>    </span><span class=nt>&quot;error_rate&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7></a><a href=#__codelineno-13-7><span class=linenos data-linenos=" 7 "></span></a><span class=w>    </span><span class=nt>&quot;avg_transition_time&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.15s&quot;</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8></a><a href=#__codelineno-13-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9></a><a href=#__codelineno-13-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>  </span><span class=nt>&quot;system_health&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;healthy&quot;</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10></a><a href=#__codelineno-13-10><span class=linenos data-linenos="10 "></span></a><span class=p>}</span>
</span></code></pre></div></p><hr><h2 id=10-implementation-notes>10. Implementation Notes<a class=headerlink href=#10-implementation-notes title="Permanent link">&para;</a></h2><h3 id=core-implementation>Core Implementation<a class=headerlink href=#core-implementation title="Permanent link">&para;</a></h3><ol><li><strong>State Persistence</strong>: Maintain state in <code class="language-text highlight">.orch-state/status.json</code> with version control integration</li><li><strong>Real-time Broadcasting</strong>: WebSocket integration for live visualization and monitoring</li><li><strong>Context Integration</strong>: Intelligent validation using project context and CI status</li><li><strong>Error Recovery</strong>: Comprehensive error handling with automatic retry and manual recovery</li><li><strong>Testing</strong>: Table-driven tests with context scenarios: <code class="language-text highlight">(state, command, context) → expected</code></li></ol><h3 id=extension-points>Extension Points<a class=headerlink href=#extension-points title="Permanent link">&para;</a></h3><ol><li><strong>Custom Validators</strong>: Add context-aware validation rules</li><li><strong>State Listeners</strong>: Register callbacks for state change events </li><li><strong>Recovery Strategies</strong>: Implement custom recovery mechanisms</li><li><strong>Metrics Collection</strong>: Add custom performance tracking</li></ol><h3 id=integration-patterns>Integration Patterns<a class=headerlink href=#integration-patterns title="Permanent link">&para;</a></h3><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1></a><a href=#__codelineno-14-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># State machine with context awareness</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2></a><a href=#__codelineno-14-2><span class=linenos data-linenos=" 2 "></span></a><span class=n>state_machine</span> <span class=o>=</span> <span class=n>StateMachine</span><span class=p>()</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3></a><a href=#__codelineno-14-3><span class=linenos data-linenos=" 3 "></span></a><span class=n>context</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;ci_status&quot;</span><span class=p>:</span> <span class=s2>&quot;passing&quot;</span><span class=p>,</span> <span class=s2>&quot;has_uncommitted_changes&quot;</span><span class=p>:</span> <span class=kc>False</span><span class=p>}</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4></a><a href=#__codelineno-14-4><span class=linenos data-linenos=" 4 "></span></a><span class=n>result</span> <span class=o>=</span> <span class=n>state_machine</span><span class=o>.</span><span class=n>validate_command</span><span class=p>(</span><span class=s2>&quot;/sprint start&quot;</span><span class=p>,</span> <span class=n>context</span><span class=p>)</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5></a><a href=#__codelineno-14-5><span class=linenos data-linenos=" 5 "></span></a>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6></a><a href=#__codelineno-14-6><span class=linenos data-linenos=" 6 "></span></a><span class=c1># Real-time visualization integration</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7></a><a href=#__codelineno-14-7><span class=linenos data-linenos=" 7 "></span></a><span class=n>emit_workflow_transition</span><span class=p>(</span><span class=n>old_state</span><span class=p>,</span> <span class=n>new_state</span><span class=p>,</span> <span class=n>project_name</span><span class=p>)</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8></a><a href=#__codelineno-14-8><span class=linenos data-linenos=" 8 "></span></a>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9></a><a href=#__codelineno-14-9><span class=linenos data-linenos=" 9 "></span></a><span class=c1># TDD cycle coordination</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10></a><a href=#__codelineno-14-10><span class=linenos data-linenos="10 "></span></a><span class=n>state_machine</span><span class=o>.</span><span class=n>register_tdd_cycle</span><span class=p>(</span><span class=s2>&quot;AUTH-1&quot;</span><span class=p>,</span> <span class=s2>&quot;cycle-abc123&quot;</span><span class=p>)</span>
</span></code></pre></div><p><em>The enhanced state machine provides predictable user interactions, real-time monitoring, intelligent context validation, and comprehensive audit trails for robust workflow management.</em></p><h2 id=next-steps>Next Steps<a class=headerlink href=#next-steps title="Permanent link">&para;</a></h2><h3 id=use-the-state-machine>Use the State Machine<a class=headerlink href=#use-the-state-machine title="Permanent link">&para;</a></h3><ul><li><strong>Start orchestrating</strong>: Apply these concepts with <a href=../cli-reference/ >CLI Reference</a> commands</li><li><strong>See it in action</strong>: Try <a href=../integration-examples/ >Integration Examples</a> with real projects</li><li><strong>Handle issues</strong>: Use the <a href=../troubleshooting/ >Troubleshooting Guide</a> when workflows get stuck</li></ul><h3 id=see-also>See Also<a class=headerlink href=#see-also title="Permanent link">&para;</a></h3><ul><li><strong>New to the system?</strong> Start with <a href=../../getting-started/quick-start/ >Quick Start</a> for setup guidance</li><li><strong>Advanced orchestration</strong>: Learn <a href=../multi-project-orchestration/ >Multi-project Orchestration</a> for complex workflows</li><li><strong>Monitor performance</strong>: Set up <a href=../performance-monitoring/ >Performance Monitoring</a> to track state transitions </li></ul><aside class=md-source-file><span class=md-source-file__fact><span class=md-icon title="Last update"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="June 20, 2025 03:29:02 UTC">June 20, 2025 03:29:02</span></span><span class=md-source-file__fact><span class=md-icon title=Created><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="June 17, 2025 04:40:47 UTC">June 17, 2025 04:40:47</span></span></aside><form class=md-feedback name=feedback hidden><fieldset><legend class=md-feedback__title> Was this page helpful? </legend><div class=md-feedback__inner><div class=md-feedback__list><button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg></button><button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg></button></div><div class=md-feedback__note><div data-md-value=1 hidden> Thanks for your feedback! </div><div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by <a href="https://github.com/jmontp/agent-workflow/issues/new/?title=[Feedback]+%F0%9F%94%84%20State%20Machine+-+/user-guide/state-machine/" target=_blank rel=noopener>telling us what you found confusing</a>. </div></div></div></fieldset></form></article></div><script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type=button class="md-top md-icon" data-md-component=top hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a href=../hitl-commands/ class="md-footer__link md-footer__link--prev" aria-label="Previous: 🎮 HITL Commands"><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg></div><div class=md-footer__title><span class=md-footer__direction> Previous </span><div class=md-ellipsis> 🎮 HITL Commands </div></div></a><a href=../tdd-workflow/ class="md-footer__link md-footer__link--next" aria-label="Next: 🧪 TDD Workflow"><div class=md-footer__title><span class=md-footer__direction> Next </span><div class=md-ellipsis> 🧪 TDD Workflow </div></div><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></div></a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright></div><div class=md-social><a href=https://github.com/jmontp/agent-workflow target=_blank rel=noopener title="GitHub Repository" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></a><a href=https://jmontp.github.io/agent-workflow/ target=_blank rel=noopener title="Documentation Site" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a><a href=https://discord.gg/your-discord-server target=_blank rel=noopener title="Discord Community" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8"/></svg></a><a href=https://github.com/sponsors/jmontp target=_blank rel=noopener title=Sponsor class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53z"/></svg></a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><div class=md-progress data-md-component=progress role=progressbar></div><div class=md-consent data-md-component=consent id=__consent hidden><div class=md-consent__overlay></div><aside class=md-consent__inner><form class="md-consent__form md-grid md-typeset" name=consent><h4>Cookie consent</h4><p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p><input class=md-toggle type=checkbox id=__settings><div class=md-consent__settings><ul class=task-list><li class=task-list-item><label class=task-list-control><input type=checkbox name=analytics checked><span class=task-list-indicator></span> Google Analytics </label></li><li class=task-list-item><label class=task-list-control><input type=checkbox name=github checked><span class=task-list-indicator></span> GitHub </label></li></ul></div><div class=md-consent__controls><button class="md-button md-button--primary">Accept</button><button type=reset class="md-button md-button--primary">Reject</button><label class=md-button for=__settings>Manage settings</label></div></form></aside></div><script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script><script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": {"API": "api", "Architecture": "architecture", "CSS": "css", "Discord": "discord", "HTML5": "html", "JavaScript": "js", "Python": "python", "Scrum": "scrum", "TDD": "tdd"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script><script src=../../assets/javascripts/bundle.13a4f30d.min.js></script><script src=https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mtml-chtml.js></script><script src=../../js/mermaid-zoom.js></script><script src=../../js/universal-search.js></script><script src=../../js/enhanced-navigation.js></script><script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body></html>