<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Human-In-The-Loop orchestration framework for AI-assisted software development"><meta name=author content="AI Agent Workflow Team"><link href=https://jmontp.github.io/agent-workflow/architecture/parallel-tdd-implementation-strategy/ rel=canonical><link href=../parallel-tdd-technical-specification/ rel=prev><link href=../parallel-tdd-comprehensive-implementation-plan/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>Parallel TDD Implementation Strategy - AI Agent TDD-Scrum Workflow</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><style>:root{.md-tag{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M5.5%207A1.5%201.5%200%200%201%204%205.5%201.5%201.5%200%200%201%205.5%204%201.5%201.5%200%200%201%207%205.5%201.5%201.5%200%200%201%205.5%207m15.91%204.58-9-9C12.05%202.22%2011.55%202%2011%202H4c-1.11%200-2%20.89-2%202v7c0%20.55.22%201.05.59%201.41l8.99%209c.37.36.87.59%201.42.59s1.05-.23%201.41-.59l7-7c.37-.36.59-.86.59-1.41%200-.56-.23-1.06-.59-1.42%22/%3E%3C/svg%3E');}.md-tag.md-tag--html{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m12%2017.56%204.07-1.13.55-6.1H9.38L9.2%208.3h7.6l.2-1.99H7l.56%206.01h6.89l-.23%202.58-2.22.6-2.22-.6-.14-1.66h-2l.29%203.19zM4.07%203h15.86L18.5%2019.2%2012%2021l-6.5-1.8z%22/%3E%3C/svg%3E');}.md-tag.md-tag--js{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M3%203h18v18H3zm4.73%2015.04c.4.85%201.19%201.55%202.54%201.55%201.5%200%202.53-.8%202.53-2.55v-5.78h-1.7V17c0%20.86-.35%201.08-.9%201.08-.58%200-.82-.4-1.09-.87zm5.98-.18c.5.98%201.51%201.73%203.09%201.73%201.6%200%202.8-.83%202.8-2.36%200-1.41-.81-2.04-2.25-2.66l-.42-.18c-.73-.31-1.04-.52-1.04-1.02%200-.41.31-.73.81-.73.48%200%20.8.21%201.09.73l1.31-.87c-.55-.96-1.33-1.33-2.4-1.33-1.51%200-2.48.96-2.48%202.23%200%201.38.81%202.03%202.03%202.55l.42.18c.78.34%201.24.55%201.24%201.13%200%20.48-.45.83-1.15.83-.83%200-1.31-.43-1.67-1.03z%22/%3E%3C/svg%3E');}.md-tag.md-tag--css{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22m5%203-.65%203.34h13.59L17.5%208.5H3.92l-.66%203.33h13.59l-.76%203.81-5.48%201.81-4.75-1.81.33-1.64H2.85l-.79%204%207.85%203%209.05-3%201.2-6.03.24-1.21L21.94%203z%22/%3E%3C/svg%3E');}.md-tag.md-tag--python{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M19.14%207.5A2.86%202.86%200%200%201%2022%2010.36v3.78A2.86%202.86%200%200%201%2019.14%2017H12c0%20.39.32.96.71.96H17v1.68a2.86%202.86%200%200%201-2.86%202.86H9.86A2.86%202.86%200%200%201%207%2019.64v-3.75a2.85%202.85%200%200%201%202.86-2.85h5.25a2.85%202.85%200%200%200%202.85-2.86V7.5zm-4.28%2011.79c-.4%200-.72.3-.72.89s.32.71.72.71a.71.71%200%200%200%20.71-.71c0-.59-.32-.89-.71-.89m-10-1.79A2.86%202.86%200%200%201%202%2014.64v-3.78A2.86%202.86%200%200%201%204.86%208H12c0-.39-.32-.96-.71-.96H7V5.36A2.86%202.86%200%200%201%209.86%202.5h4.28A2.86%202.86%200%200%201%2017%205.36v3.75a2.85%202.85%200%200%201-2.86%202.85H8.89a2.85%202.85%200%200%200-2.85%202.86v2.68zM9.14%205.71c.4%200%20.72-.3.72-.89s-.32-.71-.72-.71c-.39%200-.71.12-.71.71s.32.89.71.89%22/%3E%3C/svg%3E');}}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><link rel=stylesheet href=../../stylesheets/enhanced-navigation.css><link rel=stylesheet href=../../stylesheets/color-schemes.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head><body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=black><input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off><input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off><label class=md-overlay for=__drawer></label><div data-md-component=skip><a href=#parallel-tdd-implementation-strategy class=md-skip> Skip to content </a></div><div data-md-component=announce></div><div data-md-color-scheme=default data-md-component=outdated hidden></div><header class="md-header md-header--shadow md-header--lifted" data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a href=../.. title="AI Agent TDD-Scrum Workflow" class="md-header__button md-logo" aria-label="AI Agent TDD-Scrum Workflow" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a><label class="md-header__button md-icon" for=__drawer><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> AI Agent TDD-Scrum Workflow </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> Parallel TDD Implementation Strategy </span></div></div></div><div class=md-header__option><div class=md-select><button class="md-header__button md-icon" aria-label="Select language"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg></button><div class=md-select__inner><ul class=md-select__list><li class=md-select__item><a href=../../ hreflang=en class=md-select__link> English </a></li></ul></div></div></div><label class="md-header__button md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required><label class="md-search__icon md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg></label><nav class=md-search__options aria-label=Search><a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg></a><button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap tabindex=0 data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta> Initializing search </div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a href=https://github.com/jmontp/agent-workflow title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></div><div class=md-source__repository> jmontp/agent-workflow </div></a></div></nav><nav class=md-tabs aria-label=Tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a href=../.. class=md-tabs__link> üè† Home </a></li><li class=md-tabs__item><a href=../../getting-started/ class=md-tabs__link> ‚ö° Getting Started </a></li><li class=md-tabs__item><a href=../../user-guide/ class=md-tabs__link> üìä User Guide </a></li><li class=md-tabs__item><a href=../../concepts/ class=md-tabs__link> üéØ Core Concepts </a></li><li class="md-tabs__item md-tabs__item--active"><a href=../ class=md-tabs__link> üî• Architecture </a></li><li class=md-tabs__item><a href=../../advanced/ class=md-tabs__link> ‚ö° Advanced Topics </a></li><li class=md-tabs__item><a href=../../planning/ class=md-tabs__link> üé® Planning & Design </a></li><li class=md-tabs__item><a href=../../development/ class=md-tabs__link> üìä Development </a></li><li class=md-tabs__item><a href=../../deployment/ class=md-tabs__link> üî• Deployment </a></li><li class=md-tabs__item><a href=../../templates/ class=md-tabs__link> üìã Templates </a></li><li class=md-tabs__item><a href=../../theme-integration-guide/ class=md-tabs__link> üé® Theme Integration </a></li><li class=md-tabs__item><a href=../../archive/compliance/ class=md-tabs__link> üìÅ Archive </a></li></ul></div></nav></header><div class=md-container data-md-component=container><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a href=../.. title="AI Agent TDD-Scrum Workflow" class="md-nav__button md-logo" aria-label="AI Agent TDD-Scrum Workflow" data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a> AI Agent TDD-Scrum Workflow </label><div class=md-nav__source><a href=https://github.com/jmontp/agent-workflow title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></div><div class=md-source__repository> jmontp/agent-workflow </div></a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../.. class=md-nav__link><span class=md-ellipsis> üè† Home </span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../getting-started/ class=md-nav__link><span class=md-ellipsis> ‚ö° Getting Started </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../user-guide/ class=md-nav__link><span class=md-ellipsis> üìä User Guide </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../concepts/ class=md-nav__link><span class=md-ellipsis> üéØ Core Concepts </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked><div class="md-nav__link md-nav__container"><a href=../ class="md-nav__link "><span class=md-ellipsis> üî• Architecture </span></a><label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true><label class=md-nav__title for=__nav_5><span class="md-nav__icon md-icon"></span> üî• Architecture </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../system-overview/ class=md-nav__link><span class=md-ellipsis> üèóÔ∏è System Overview </span></a></li><li class=md-nav__item><a href=../component-architecture/ class=md-nav__link><span class=md-ellipsis> üîß Component Architecture </span></a></li><li class=md-nav__item><a href=../context-management-system/ class=md-nav__link><span class=md-ellipsis> üß† Context Management </span></a></li><li class=md-nav__item><a href=../context-api-specification/ class=md-nav__link><span class=md-ellipsis> Context API Specification </span></a></li><li class=md-nav__item><a href=../context-algorithms/ class=md-nav__link><span class=md-ellipsis> Context Algorithms </span></a></li><li class=md-nav__item><a href=../context-evaluation-framework/ class=md-nav__link><span class=md-ellipsis> Context Evaluation Framework </span></a></li><li class=md-nav__item><a href=../context-implementation-plan/ class=md-nav__link><span class=md-ellipsis> Context Implementation Plan </span></a></li><li class=md-nav__item><a href=../parallel-tdd-architecture/ class=md-nav__link><span class=md-ellipsis> Parallel TDD Design </span></a></li><li class=md-nav__item><a href=../parallel-tdd-technical-specification/ class=md-nav__link><span class=md-ellipsis> Parallel TDD Implementation </span></a></li><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type=checkbox id=__toc><label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> Parallel TDD Implementation Strategy </span><span class="md-nav__icon md-icon"></span></label><a href=./ class="md-nav__link md-nav__link--active"><span class=md-ellipsis> Parallel TDD Implementation Strategy </span></a><nav class="md-nav md-nav--secondary" aria-label="On this page"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> On this page </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#executive-summary class=md-nav__link><span class=md-ellipsis> Executive Summary </span></a></li><li class=md-nav__item><a href=#implementation-timeline class=md-nav__link><span class=md-ellipsis> Implementation Timeline </span></a><nav class=md-nav aria-label="Implementation Timeline"><ul class=md-nav__list><li class=md-nav__item><a href=#overview class=md-nav__link><span class=md-ellipsis> Overview </span></a></li></ul></nav></li><li class=md-nav__item><a href=#phase-1-basic-parallel-execution-weeks-1-2 class=md-nav__link><span class=md-ellipsis> Phase 1: Basic Parallel Execution (Weeks 1-2) </span></a><nav class=md-nav aria-label="Phase 1: Basic Parallel Execution (Weeks 1-2)"><ul class=md-nav__list><li class=md-nav__item><a href=#goals class=md-nav__link><span class=md-ellipsis> Goals </span></a></li><li class=md-nav__item><a href=#week-1-core-infrastructure class=md-nav__link><span class=md-ellipsis> Week 1: Core Infrastructure </span></a></li><li class=md-nav__item><a href=#week-2-integration-and-testing class=md-nav__link><span class=md-ellipsis> Week 2: Integration and Testing </span></a></li><li class=md-nav__item><a href=#deliverables class=md-nav__link><span class=md-ellipsis> Deliverables </span></a></li></ul></nav></li><li class=md-nav__item><a href=#phase-2-intelligent-scheduling-weeks-3-4 class=md-nav__link><span class=md-ellipsis> Phase 2: Intelligent Scheduling (Weeks 3-4) </span></a><nav class=md-nav aria-label="Phase 2: Intelligent Scheduling (Weeks 3-4)"><ul class=md-nav__list><li class=md-nav__item><a href=#goals_1 class=md-nav__link><span class=md-ellipsis> Goals </span></a></li><li class=md-nav__item><a href=#week-3-advanced-scheduling class=md-nav__link><span class=md-ellipsis> Week 3: Advanced Scheduling </span></a></li><li class=md-nav__item><a href=#week-4-test-isolation-and-integration class=md-nav__link><span class=md-ellipsis> Week 4: Test Isolation and Integration </span></a></li><li class=md-nav__item><a href=#deliverables_1 class=md-nav__link><span class=md-ellipsis> Deliverables </span></a></li></ul></nav></li><li class=md-nav__item><a href=#phase-3-advanced-parallelism-weeks-5-6 class=md-nav__link><span class=md-ellipsis> Phase 3: Advanced Parallelism (Weeks 5-6) </span></a><nav class=md-nav aria-label="Phase 3: Advanced Parallelism (Weeks 5-6)"><ul class=md-nav__list><li class=md-nav__item><a href=#goals_2 class=md-nav__link><span class=md-ellipsis> Goals </span></a></li><li class=md-nav__item><a href=#week-5-advanced-conflict-management class=md-nav__link><span class=md-ellipsis> Week 5: Advanced Conflict Management </span></a></li><li class=md-nav__item><a href=#week-6-context-integration-and-optimization class=md-nav__link><span class=md-ellipsis> Week 6: Context Integration and Optimization </span></a></li><li class=md-nav__item><a href=#deliverables_2 class=md-nav__link><span class=md-ellipsis> Deliverables </span></a></li></ul></nav></li><li class=md-nav__item><a href=#phase-4-production-optimization-weeks-7-8 class=md-nav__link><span class=md-ellipsis> Phase 4: Production Optimization (Weeks 7-8) </span></a><nav class=md-nav aria-label="Phase 4: Production Optimization (Weeks 7-8)"><ul class=md-nav__list><li class=md-nav__item><a href=#goals_3 class=md-nav__link><span class=md-ellipsis> Goals </span></a></li><li class=md-nav__item><a href=#week-7-production-hardening class=md-nav__link><span class=md-ellipsis> Week 7: Production Hardening </span></a></li><li class=md-nav__item><a href=#week-8-final-integration-and-testing class=md-nav__link><span class=md-ellipsis> Week 8: Final Integration and Testing </span></a></li><li class=md-nav__item><a href=#deliverables_3 class=md-nav__link><span class=md-ellipsis> Deliverables </span></a></li></ul></nav></li><li class=md-nav__item><a href=#risk-mitigation-matrix class=md-nav__link><span class=md-ellipsis> Risk Mitigation Matrix </span></a></li><li class=md-nav__item><a href=#success-metrics class=md-nav__link><span class=md-ellipsis> Success Metrics </span></a><nav class=md-nav aria-label="Success Metrics"><ul class=md-nav__list><li class=md-nav__item><a href=#phase-1-basic-parallel class=md-nav__link><span class=md-ellipsis> Phase 1 (Basic Parallel) </span></a></li><li class=md-nav__item><a href=#phase-2-intelligent-scheduling class=md-nav__link><span class=md-ellipsis> Phase 2 (Intelligent Scheduling) </span></a></li><li class=md-nav__item><a href=#phase-3-advanced-parallelism class=md-nav__link><span class=md-ellipsis> Phase 3 (Advanced Parallelism) </span></a></li><li class=md-nav__item><a href=#phase-4-production-optimization class=md-nav__link><span class=md-ellipsis> Phase 4 (Production Optimization) </span></a></li></ul></nav></li><li class=md-nav__item><a href=#conclusion class=md-nav__link><span class=md-ellipsis> Conclusion </span></a></li></ul></nav></li><li class=md-nav__item><a href=../parallel-tdd-comprehensive-implementation-plan/ class=md-nav__link><span class=md-ellipsis> Parallel TDD Comprehensive Plan </span></a></li><li class=md-nav__item><a href=../parallel-tdd-testing-strategy/ class=md-nav__link><span class=md-ellipsis> Parallel TDD Testing Strategy </span></a></li><li class=md-nav__item><a href=../parallel-context-integration/ class=md-nav__link><span class=md-ellipsis> Parallel Context Integration </span></a></li><li class=md-nav__item><a href=../parallel-agent-pool-management/ class=md-nav__link><span class=md-ellipsis> Parallel Agent Pool Management </span></a></li><li class=md-nav__item><a href=../parallel-conflict-algorithms/ class=md-nav__link><span class=md-ellipsis> Parallel Conflict Resolution </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../advanced/ class=md-nav__link><span class=md-ellipsis> ‚ö° Advanced Topics </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../planning/ class=md-nav__link><span class=md-ellipsis> üé® Planning & Design </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../development/ class=md-nav__link><span class=md-ellipsis> üìä Development </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../deployment/ class=md-nav__link><span class=md-ellipsis> üî• Deployment </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../templates/ class=md-nav__link><span class=md-ellipsis> üìã Templates </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../theme-integration-guide/ class=md-nav__link><span class=md-ellipsis> üé® Theme Integration </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../archive/compliance/ class=md-nav__link><span class=md-ellipsis> üìÅ Archive </span><span class="md-nav__icon md-icon"></span></a></li></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><a href=https://github.com/jmontp/agent-workflow/edit/master/docs/architecture/parallel-tdd-implementation-strategy.md title="Edit this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg></a><a href=https://github.com/jmontp/agent-workflow/raw/master/docs/architecture/parallel-tdd-implementation-strategy.md title="View source of this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg></a><h1 id=parallel-tdd-implementation-strategy>Parallel TDD Implementation Strategy<a class=headerlink href=#parallel-tdd-implementation-strategy title="Permanent link">&para;</a></h1><h2 id=executive-summary>Executive Summary<a class=headerlink href=#executive-summary title="Permanent link">&para;</a></h2><p>This document outlines a comprehensive 4-phase implementation strategy for the Parallel TDD Execution system. The strategy emphasizes incremental delivery, risk mitigation, and maintaining backward compatibility with the existing sequential TDD system.</p><h2 id=implementation-timeline>Implementation Timeline<a class=headerlink href=#implementation-timeline title="Permanent link">&para;</a></h2><h3 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h3><ul><li><strong>Total Duration</strong>: 8 weeks</li><li><strong>Phase 1</strong>: Basic Parallel (Weeks 1-2)</li><li><strong>Phase 2</strong>: Intelligent Scheduling (Weeks 3-4)</li><li><strong>Phase 3</strong>: Advanced Parallelism (Weeks 5-6)</li><li><strong>Phase 4</strong>: Production Optimization (Weeks 7-8)</li></ul><h2 id=phase-1-basic-parallel-execution-weeks-1-2>Phase 1: Basic Parallel Execution (Weeks 1-2)<a class=headerlink href=#phase-1-basic-parallel-execution-weeks-1-2 title="Permanent link">&para;</a></h2><h3 id=goals>Goals<a class=headerlink href=#goals title="Permanent link">&para;</a></h3><ul><li>Enable 2 concurrent TDD cycles with basic coordination</li><li>Implement file-level conflict detection</li><li>Create static agent pools</li><li>Establish monitoring foundation</li></ul><h3 id=week-1-core-infrastructure>Week 1: Core Infrastructure<a class=headerlink href=#week-1-core-infrastructure title="Permanent link">&para;</a></h3><h4 id=day-1-2-parallel-coordinator>Day 1-2: Parallel Coordinator<a class=headerlink href=#day-1-2-parallel-coordinator title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1></a><a href=#__codelineno-0-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/parallel_coordinator.py</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2></a><a href=#__codelineno-0-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>ParallelCoordinator</span><span class=p>:</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3></a><a href=#__codelineno-0-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>max_parallel</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>2</span><span class=p>):</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4></a><a href=#__codelineno-0-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>max_parallel</span> <span class=o>=</span> <span class=n>max_parallel</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5></a><a href=#__codelineno-0-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>active_cycles</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>TDDCycle</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6></a><a href=#__codelineno-0-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>cycle_locks</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>Lock</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7></a><a href=#__codelineno-0-7><span class=linenos data-linenos=" 7 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>file_locks</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># file_path -&gt; cycle_id</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8></a><a href=#__codelineno-0-8><span class=linenos data-linenos=" 8 "></span></a>        
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9></a><a href=#__codelineno-0-9><span class=linenos data-linenos=" 9 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>can_start_cycle</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>story</span><span class=p>:</span> <span class=n>Story</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>bool</span><span class=p>,</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]]:</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10></a><a href=#__codelineno-0-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if a new cycle can be started&quot;&quot;&quot;</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11></a><a href=#__codelineno-0-11><span class=linenos data-linenos="11 "></span></a>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>active_cycles</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_parallel</span><span class=p>:</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12></a><a href=#__codelineno-0-12><span class=linenos data-linenos="12 "></span></a>            <span class=k>return</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&quot;Max parallel cycles reached&quot;</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13></a><a href=#__codelineno-0-13><span class=linenos data-linenos="13 "></span></a>            
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14></a><a href=#__codelineno-0-14><span class=linenos data-linenos="14 "></span></a>        <span class=c1># Check for file conflicts</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15></a><a href=#__codelineno-0-15><span class=linenos data-linenos="15 "></span></a>        <span class=n>story_files</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>analyze_story_files</span><span class=p>(</span><span class=n>story</span><span class=p>)</span>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16></a><a href=#__codelineno-0-16><span class=linenos data-linenos="16 "></span></a>        <span class=k>for</span> <span class=n>file_path</span> <span class=ow>in</span> <span class=n>story_files</span><span class=p>:</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17></a><a href=#__codelineno-0-17><span class=linenos data-linenos="17 "></span></a>            <span class=k>if</span> <span class=n>file_path</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>file_locks</span><span class=p>:</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18></a><a href=#__codelineno-0-18><span class=linenos data-linenos="18 "></span></a>                <span class=n>blocking_cycle</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>file_locks</span><span class=p>[</span><span class=n>file_path</span><span class=p>]</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19></a><a href=#__codelineno-0-19><span class=linenos data-linenos="19 "></span></a>                <span class=k>return</span> <span class=kc>False</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;File </span><span class=si>{</span><span class=n>file_path</span><span class=si>}</span><span class=s2> locked by cycle </span><span class=si>{</span><span class=n>blocking_cycle</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20></a><a href=#__codelineno-0-20><span class=linenos data-linenos="20 "></span></a>                
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21></a><a href=#__codelineno-0-21><span class=linenos data-linenos="21 "></span></a>        <span class=k>return</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>None</span>
</span></code></pre></div><h4 id=day-3-4-basic-agent-pool>Day 3-4: Basic Agent Pool<a class=headerlink href=#day-3-4-basic-agent-pool title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a><a href=#__codelineno-1-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/agent_pool.py</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a><a href=#__codelineno-1-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>BasicAgentPool</span><span class=p>:</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a><a href=#__codelineno-1-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>agent_type</span><span class=p>:</span> <span class=n>AgentType</span><span class=p>,</span> <span class=n>pool_size</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>2</span><span class=p>):</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a><a href=#__codelineno-1-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>agent_type</span> <span class=o>=</span> <span class=n>agent_type</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><a href=#__codelineno-1-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=o>=</span> <span class=n>Queue</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=n>pool_size</span><span class=p>)</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6></a><a href=#__codelineno-1-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>active_agents</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Agent</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7></a><a href=#__codelineno-1-7><span class=linenos data-linenos=" 7 "></span></a>        
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8></a><a href=#__codelineno-1-8><span class=linenos data-linenos=" 8 "></span></a>        <span class=c1># Pre-create agents</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9></a><a href=#__codelineno-1-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>pool_size</span><span class=p>):</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10></a><a href=#__codelineno-1-10><span class=linenos data-linenos="10 "></span></a>            <span class=n>agent</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_agent</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>agent_type</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11></a><a href=#__codelineno-1-11><span class=linenos data-linenos="11 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>put_nowait</span><span class=p>(</span><span class=n>agent</span><span class=p>)</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12></a><a href=#__codelineno-1-12><span class=linenos data-linenos="12 "></span></a>            
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13></a><a href=#__codelineno-1-13><span class=linenos data-linenos="13 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>acquire</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>timeout</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>30</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Agent</span><span class=p>:</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14></a><a href=#__codelineno-1-14><span class=linenos data-linenos="14 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Acquire agent from pool&quot;&quot;&quot;</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15></a><a href=#__codelineno-1-15><span class=linenos data-linenos="15 "></span></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16></a><a href=#__codelineno-1-16><span class=linenos data-linenos="16 "></span></a>            <span class=n>agent</span> <span class=o>=</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>wait_for</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>get</span><span class=p>(),</span> <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17></a><a href=#__codelineno-1-17><span class=linenos data-linenos="17 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>active_agents</span><span class=p>[</span><span class=n>cycle_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>agent</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18></a><a href=#__codelineno-1-18><span class=linenos data-linenos="18 "></span></a>            <span class=k>return</span> <span class=n>agent</span>
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19></a><a href=#__codelineno-1-19><span class=linenos data-linenos="19 "></span></a>        <span class=k>except</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>TimeoutError</span><span class=p>:</span>
</span><span id=__span-1-20><a id=__codelineno-1-20 name=__codelineno-1-20></a><a href=#__codelineno-1-20><span class=linenos data-linenos="20 "></span></a>            <span class=k>raise</span> <span class=n>AgentPoolExhausted</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;No </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>agent_type</span><span class=si>}</span><span class=s2> agents available&quot;</span><span class=p>)</span>
</span></code></pre></div><h4 id=day-5-file-lock-manager>Day 5: File Lock Manager<a class=headerlink href=#day-5-file-lock-manager title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a><a href=#__codelineno-2-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/lock_manager.py</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a><a href=#__codelineno-2-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>FileLockManager</span><span class=p>:</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a><a href=#__codelineno-2-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4></a><a href=#__codelineno-2-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>locks</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>FileLock</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5></a><a href=#__codelineno-2-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>lock_holders</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># file -&gt; cycle_id</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6></a><a href=#__codelineno-2-6><span class=linenos data-linenos=" 6 "></span></a>        
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7></a><a href=#__codelineno-2-7><span class=linenos data-linenos=" 7 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>acquire_files</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>files</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8></a><a href=#__codelineno-2-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Acquire locks for multiple files atomically&quot;&quot;&quot;</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9></a><a href=#__codelineno-2-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=n>sorted_files</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>files</span><span class=p>)</span>  <span class=c1># Prevent deadlock</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10></a><a href=#__codelineno-2-10><span class=linenos data-linenos="10 "></span></a>        <span class=n>acquired</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11></a><a href=#__codelineno-2-11><span class=linenos data-linenos="11 "></span></a>        
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12></a><a href=#__codelineno-2-12><span class=linenos data-linenos="12 "></span></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13></a><a href=#__codelineno-2-13><span class=linenos data-linenos="13 "></span></a>            <span class=k>for</span> <span class=n>file_path</span> <span class=ow>in</span> <span class=n>sorted_files</span><span class=p>:</span>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14></a><a href=#__codelineno-2-14><span class=linenos data-linenos="14 "></span></a>                <span class=k>if</span> <span class=n>file_path</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock_holders</span><span class=p>:</span>
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15></a><a href=#__codelineno-2-15><span class=linenos data-linenos="15 "></span></a>                    <span class=c1># Conflict - rollback</span>
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16></a><a href=#__codelineno-2-16><span class=linenos data-linenos="16 "></span></a>                    <span class=k>raise</span> <span class=n>FileAlreadyLocked</span><span class=p>(</span><span class=n>file_path</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock_holders</span><span class=p>[</span><span class=n>file_path</span><span class=p>])</span>
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17></a><a href=#__codelineno-2-17><span class=linenos data-linenos="17 "></span></a>                    
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18></a><a href=#__codelineno-2-18><span class=linenos data-linenos="18 "></span></a>                <span class=n>lock</span> <span class=o>=</span> <span class=n>FileLock</span><span class=p>(</span><span class=n>file_path</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>)</span>
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19></a><a href=#__codelineno-2-19><span class=linenos data-linenos="19 "></span></a>                <span class=bp>self</span><span class=o>.</span><span class=n>locks</span><span class=p>[</span><span class=n>file_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>lock</span>
</span><span id=__span-2-20><a id=__codelineno-2-20 name=__codelineno-2-20></a><a href=#__codelineno-2-20><span class=linenos data-linenos="20 "></span></a>                <span class=bp>self</span><span class=o>.</span><span class=n>lock_holders</span><span class=p>[</span><span class=n>file_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>cycle_id</span>
</span><span id=__span-2-21><a id=__codelineno-2-21 name=__codelineno-2-21></a><a href=#__codelineno-2-21><span class=linenos data-linenos="21 "></span></a>                <span class=n>acquired</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>file_path</span><span class=p>)</span>
</span><span id=__span-2-22><a id=__codelineno-2-22 name=__codelineno-2-22></a><a href=#__codelineno-2-22><span class=linenos data-linenos="22 "></span></a>                
</span><span id=__span-2-23><a id=__codelineno-2-23 name=__codelineno-2-23></a><a href=#__codelineno-2-23><span class=linenos data-linenos="23 "></span></a>            <span class=k>return</span> <span class=kc>True</span>
</span><span id=__span-2-24><a id=__codelineno-2-24 name=__codelineno-2-24></a><a href=#__codelineno-2-24><span class=linenos data-linenos="24 "></span></a>            
</span><span id=__span-2-25><a id=__codelineno-2-25 name=__codelineno-2-25></a><a href=#__codelineno-2-25><span class=linenos data-linenos="25 "></span></a>        <span class=k>except</span> <span class=n>FileAlreadyLocked</span><span class=p>:</span>
</span><span id=__span-2-26><a id=__codelineno-2-26 name=__codelineno-2-26></a><a href=#__codelineno-2-26><span class=linenos data-linenos="26 "></span></a>            <span class=c1># Rollback acquired locks</span>
</span><span id=__span-2-27><a id=__codelineno-2-27 name=__codelineno-2-27></a><a href=#__codelineno-2-27><span class=linenos data-linenos="27 "></span></a>            <span class=k>for</span> <span class=n>file_path</span> <span class=ow>in</span> <span class=n>acquired</span><span class=p>:</span>
</span><span id=__span-2-28><a id=__codelineno-2-28 name=__codelineno-2-28></a><a href=#__codelineno-2-28><span class=linenos data-linenos="28 "></span></a>                <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>locks</span><span class=p>[</span><span class=n>file_path</span><span class=p>]</span>
</span><span id=__span-2-29><a id=__codelineno-2-29 name=__codelineno-2-29></a><a href=#__codelineno-2-29><span class=linenos data-linenos="29 "></span></a>                <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock_holders</span><span class=p>[</span><span class=n>file_path</span><span class=p>]</span>
</span><span id=__span-2-30><a id=__codelineno-2-30 name=__codelineno-2-30></a><a href=#__codelineno-2-30><span class=linenos data-linenos="30 "></span></a>            <span class=k>return</span> <span class=kc>False</span>
</span></code></pre></div><h3 id=week-2-integration-and-testing>Week 2: Integration and Testing<a class=headerlink href=#week-2-integration-and-testing title="Permanent link">&para;</a></h3><h4 id=day-1-2-state-synchronization>Day 1-2: State Synchronization<a class=headerlink href=#day-1-2-state-synchronization title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1></a><a href=#__codelineno-3-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/state_synchronizer.py</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2></a><a href=#__codelineno-3-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>ParallelStateSynchronizer</span><span class=p>:</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3></a><a href=#__codelineno-3-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>storage</span><span class=p>:</span> <span class=n>ProjectStorage</span><span class=p>):</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4></a><a href=#__codelineno-3-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>storage</span> <span class=o>=</span> <span class=n>storage</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5></a><a href=#__codelineno-3-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>state_locks</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>Lock</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6></a><a href=#__codelineno-3-6><span class=linenos data-linenos=" 6 "></span></a>        
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7></a><a href=#__codelineno-3-7><span class=linenos data-linenos=" 7 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>update_cycle_state</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>updates</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8></a><a href=#__codelineno-3-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Thread-safe state updates&quot;&quot;&quot;</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9></a><a href=#__codelineno-3-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=k>async</span> <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_state_lock</span><span class=p>(</span><span class=n>cycle_id</span><span class=p>):</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10></a><a href=#__codelineno-3-10><span class=linenos data-linenos="10 "></span></a>            <span class=n>cycle</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>storage</span><span class=o>.</span><span class=n>load_tdd_cycle</span><span class=p>(</span><span class=n>cycle_id</span><span class=p>)</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11></a><a href=#__codelineno-3-11><span class=linenos data-linenos="11 "></span></a>            
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12></a><a href=#__codelineno-3-12><span class=linenos data-linenos="12 "></span></a>            <span class=c1># Apply updates</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13></a><a href=#__codelineno-3-13><span class=linenos data-linenos="13 "></span></a>            <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>updates</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14></a><a href=#__codelineno-3-14><span class=linenos data-linenos="14 "></span></a>                <span class=nb>setattr</span><span class=p>(</span><span class=n>cycle</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15></a><a href=#__codelineno-3-15><span class=linenos data-linenos="15 "></span></a>                
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16></a><a href=#__codelineno-3-16><span class=linenos data-linenos="16 "></span></a>            <span class=c1># Save atomically</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17></a><a href=#__codelineno-3-17><span class=linenos data-linenos="17 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>storage</span><span class=o>.</span><span class=n>save_tdd_cycle</span><span class=p>(</span><span class=n>cycle</span><span class=p>)</span>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18></a><a href=#__codelineno-3-18><span class=linenos data-linenos="18 "></span></a>            
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19></a><a href=#__codelineno-3-19><span class=linenos data-linenos="19 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>transition_phase</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>new_phase</span><span class=p>:</span> <span class=n>TDDState</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20></a><a href=#__codelineno-3-20><span class=linenos data-linenos="20 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Coordinate phase transitions&quot;&quot;&quot;</span>
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21></a><a href=#__codelineno-3-21><span class=linenos data-linenos="21 "></span></a>        <span class=k>async</span> <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_state_lock</span><span class=p>(</span><span class=n>cycle_id</span><span class=p>):</span>
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22></a><a href=#__codelineno-3-22><span class=linenos data-linenos="22 "></span></a>            <span class=c1># Notify other components</span>
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23></a><a href=#__codelineno-3-23><span class=linenos data-linenos="23 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>broadcast_transition</span><span class=p>(</span><span class=n>cycle_id</span><span class=p>,</span> <span class=n>new_phase</span><span class=p>)</span>
</span></code></pre></div><h4 id=day-3-4-basic-monitoring>Day 3-4: Basic Monitoring<a class=headerlink href=#day-3-4-basic-monitoring title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1></a><a href=#__codelineno-4-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/parallel_monitor.py</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2></a><a href=#__codelineno-4-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>ParallelExecutionMonitor</span><span class=p>:</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3></a><a href=#__codelineno-4-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4></a><a href=#__codelineno-4-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>metrics</span> <span class=o>=</span> <span class=n>ParallelMetrics</span><span class=p>()</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5></a><a href=#__codelineno-4-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>events</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>ParallelEvent</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6></a><a href=#__codelineno-4-6><span class=linenos data-linenos=" 6 "></span></a>        
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7></a><a href=#__codelineno-4-7><span class=linenos data-linenos=" 7 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>record_cycle_start</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8></a><a href=#__codelineno-4-8><span class=linenos data-linenos=" 8 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>events</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>ParallelEvent</span><span class=p>(</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9></a><a href=#__codelineno-4-9><span class=linenos data-linenos=" 9 "></span></a>            <span class=nb>type</span><span class=o>=</span><span class=n>EventType</span><span class=o>.</span><span class=n>CYCLE_START</span><span class=p>,</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10></a><a href=#__codelineno-4-10><span class=linenos data-linenos="10 "></span></a>            <span class=n>cycle_id</span><span class=o>=</span><span class=n>cycle_id</span><span class=p>,</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11></a><a href=#__codelineno-4-11><span class=linenos data-linenos="11 "></span></a>            <span class=n>timestamp</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12></a><a href=#__codelineno-4-12><span class=linenos data-linenos="12 "></span></a>        <span class=p>))</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13></a><a href=#__codelineno-4-13><span class=linenos data-linenos="13 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>metrics</span><span class=o>.</span><span class=n>active_cycles</span> <span class=o>+=</span> <span class=mi>1</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14></a><a href=#__codelineno-4-14><span class=linenos data-linenos="14 "></span></a>        
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15></a><a href=#__codelineno-4-15><span class=linenos data-linenos="15 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>record_conflict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle1</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>cycle2</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>conflict</span><span class=p>:</span> <span class=n>Conflict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16></a><a href=#__codelineno-4-16><span class=linenos data-linenos="16 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>events</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>ParallelEvent</span><span class=p>(</span>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17></a><a href=#__codelineno-4-17><span class=linenos data-linenos="17 "></span></a>            <span class=nb>type</span><span class=o>=</span><span class=n>EventType</span><span class=o>.</span><span class=n>CONFLICT_DETECTED</span><span class=p>,</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18></a><a href=#__codelineno-4-18><span class=linenos data-linenos="18 "></span></a>            <span class=n>cycle_id</span><span class=o>=</span><span class=n>cycle1</span><span class=p>,</span>
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19></a><a href=#__codelineno-4-19><span class=linenos data-linenos="19 "></span></a>            <span class=n>related_cycle</span><span class=o>=</span><span class=n>cycle2</span><span class=p>,</span>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20></a><a href=#__codelineno-4-20><span class=linenos data-linenos="20 "></span></a>            <span class=n>conflict</span><span class=o>=</span><span class=n>conflict</span><span class=p>,</span>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21></a><a href=#__codelineno-4-21><span class=linenos data-linenos="21 "></span></a>            <span class=n>timestamp</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22></a><a href=#__codelineno-4-22><span class=linenos data-linenos="22 "></span></a>        <span class=p>))</span>
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23></a><a href=#__codelineno-4-23><span class=linenos data-linenos="23 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>metrics</span><span class=o>.</span><span class=n>conflicts_detected</span> <span class=o>+=</span> <span class=mi>1</span>
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24></a><a href=#__codelineno-4-24><span class=linenos data-linenos="24 "></span></a>        
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25></a><a href=#__codelineno-4-25><span class=linenos data-linenos="25 "></span></a>    <span class=k>def</span> <span class=nf>get_dashboard_data</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26></a><a href=#__codelineno-4-26><span class=linenos data-linenos="26 "></span></a>        <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27></a><a href=#__codelineno-4-27><span class=linenos data-linenos="27 "></span></a>            <span class=s2>&quot;active_cycles&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>metrics</span><span class=o>.</span><span class=n>active_cycles</span><span class=p>,</span>
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28></a><a href=#__codelineno-4-28><span class=linenos data-linenos="28 "></span></a>            <span class=s2>&quot;total_cycles_completed&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>metrics</span><span class=o>.</span><span class=n>cycles_completed</span><span class=p>,</span>
</span><span id=__span-4-29><a id=__codelineno-4-29 name=__codelineno-4-29></a><a href=#__codelineno-4-29><span class=linenos data-linenos="29 "></span></a>            <span class=s2>&quot;conflicts_detected&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>metrics</span><span class=o>.</span><span class=n>conflicts_detected</span><span class=p>,</span>
</span><span id=__span-4-30><a id=__codelineno-4-30 name=__codelineno-4-30></a><a href=#__codelineno-4-30><span class=linenos data-linenos="30 "></span></a>            <span class=s2>&quot;average_cycle_time&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>metrics</span><span class=o>.</span><span class=n>get_average_cycle_time</span><span class=p>()</span>
</span><span id=__span-4-31><a id=__codelineno-4-31 name=__codelineno-4-31></a><a href=#__codelineno-4-31><span class=linenos data-linenos="31 "></span></a>        <span class=p>}</span>
</span></code></pre></div><h4 id=day-5-integration-tests>Day 5: Integration Tests<a class=headerlink href=#day-5-integration-tests title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1></a><a href=#__codelineno-5-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># tests/integration/test_parallel_basic.py</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2></a><a href=#__codelineno-5-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>TestBasicParallelExecution</span><span class=p>:</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3></a><a href=#__codelineno-5-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>test_two_independent_cycles</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4></a><a href=#__codelineno-5-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Test two cycles with no conflicts&quot;&quot;&quot;</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5></a><a href=#__codelineno-5-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=n>coordinator</span> <span class=o>=</span> <span class=n>ParallelCoordinator</span><span class=p>(</span><span class=n>max_parallel</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6></a><a href=#__codelineno-5-6><span class=linenos data-linenos=" 6 "></span></a>        
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7></a><a href=#__codelineno-5-7><span class=linenos data-linenos=" 7 "></span></a>        <span class=n>story1</span> <span class=o>=</span> <span class=n>create_story</span><span class=p>(</span><span class=s2>&quot;feature_a&quot;</span><span class=p>,</span> <span class=n>files</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;feature_a.py&quot;</span><span class=p>])</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8></a><a href=#__codelineno-5-8><span class=linenos data-linenos=" 8 "></span></a>        <span class=n>story2</span> <span class=o>=</span> <span class=n>create_story</span><span class=p>(</span><span class=s2>&quot;feature_b&quot;</span><span class=p>,</span> <span class=n>files</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;feature_b.py&quot;</span><span class=p>])</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9></a><a href=#__codelineno-5-9><span class=linenos data-linenos=" 9 "></span></a>        
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10></a><a href=#__codelineno-5-10><span class=linenos data-linenos="10 "></span></a>        <span class=c1># Start both cycles</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11></a><a href=#__codelineno-5-11><span class=linenos data-linenos="11 "></span></a>        <span class=n>cycle1</span> <span class=o>=</span> <span class=k>await</span> <span class=n>coordinator</span><span class=o>.</span><span class=n>start_cycle</span><span class=p>(</span><span class=n>story1</span><span class=p>)</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12></a><a href=#__codelineno-5-12><span class=linenos data-linenos="12 "></span></a>        <span class=n>cycle2</span> <span class=o>=</span> <span class=k>await</span> <span class=n>coordinator</span><span class=o>.</span><span class=n>start_cycle</span><span class=p>(</span><span class=n>story2</span><span class=p>)</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13></a><a href=#__codelineno-5-13><span class=linenos data-linenos="13 "></span></a>        
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14></a><a href=#__codelineno-5-14><span class=linenos data-linenos="14 "></span></a>        <span class=k>assert</span> <span class=nb>len</span><span class=p>(</span><span class=n>coordinator</span><span class=o>.</span><span class=n>active_cycles</span><span class=p>)</span> <span class=o>==</span> <span class=mi>2</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15></a><a href=#__codelineno-5-15><span class=linenos data-linenos="15 "></span></a>        <span class=k>assert</span> <span class=n>cycle1</span><span class=o>.</span><span class=n>id</span> <span class=o>!=</span> <span class=n>cycle2</span><span class=o>.</span><span class=n>id</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16></a><a href=#__codelineno-5-16><span class=linenos data-linenos="16 "></span></a>        
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17></a><a href=#__codelineno-5-17><span class=linenos data-linenos="17 "></span></a>        <span class=c1># Execute both in parallel</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18></a><a href=#__codelineno-5-18><span class=linenos data-linenos="18 "></span></a>        <span class=n>results</span> <span class=o>=</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>gather</span><span class=p>(</span>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19></a><a href=#__codelineno-5-19><span class=linenos data-linenos="19 "></span></a>            <span class=n>coordinator</span><span class=o>.</span><span class=n>execute_cycle</span><span class=p>(</span><span class=n>cycle1</span><span class=p>),</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20></a><a href=#__codelineno-5-20><span class=linenos data-linenos="20 "></span></a>            <span class=n>coordinator</span><span class=o>.</span><span class=n>execute_cycle</span><span class=p>(</span><span class=n>cycle2</span><span class=p>)</span>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21></a><a href=#__codelineno-5-21><span class=linenos data-linenos="21 "></span></a>        <span class=p>)</span>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22></a><a href=#__codelineno-5-22><span class=linenos data-linenos="22 "></span></a>        
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23></a><a href=#__codelineno-5-23><span class=linenos data-linenos="23 "></span></a>        <span class=k>assert</span> <span class=nb>all</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>success</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>results</span><span class=p>)</span>
</span></code></pre></div><h3 id=deliverables>Deliverables<a class=headerlink href=#deliverables title="Permanent link">&para;</a></h3><ol><li>Basic ParallelCoordinator with 2-cycle support</li><li>Static agent pools for each agent type</li><li>File-level locking mechanism</li><li>Basic monitoring dashboard</li><li>Integration test suite</li></ol><h2 id=phase-2-intelligent-scheduling-weeks-3-4>Phase 2: Intelligent Scheduling (Weeks 3-4)<a class=headerlink href=#phase-2-intelligent-scheduling-weeks-3-4 title="Permanent link">&para;</a></h2><h3 id=goals_1>Goals<a class=headerlink href=#goals_1 title="Permanent link">&para;</a></h3><ul><li>Implement dependency-aware scheduling</li><li>Add dynamic agent pool scaling</li><li>Enable simple auto-merge for conflicts</li><li>Create isolated test environments</li></ul><h3 id=week-3-advanced-scheduling>Week 3: Advanced Scheduling<a class=headerlink href=#week-3-advanced-scheduling title="Permanent link">&para;</a></h3><h4 id=day-1-2-dependency-graph>Day 1-2: Dependency Graph<a class=headerlink href=#day-1-2-dependency-graph title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1></a><a href=#__codelineno-6-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/dependency_scheduler.py</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2></a><a href=#__codelineno-6-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>DependencyAwareScheduler</span><span class=p>:</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3></a><a href=#__codelineno-6-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4></a><a href=#__codelineno-6-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>dependency_graph</span> <span class=o>=</span> <span class=n>nx</span><span class=o>.</span><span class=n>DiGraph</span><span class=p>()</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5></a><a href=#__codelineno-6-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>execution_order</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6></a><a href=#__codelineno-6-6><span class=linenos data-linenos=" 6 "></span></a>        
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7></a><a href=#__codelineno-6-7><span class=linenos data-linenos=" 7 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>analyze_dependencies</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>stories</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Story</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>nx</span><span class=o>.</span><span class=n>DiGraph</span><span class=p>:</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8></a><a href=#__codelineno-6-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Build dependency graph from stories&quot;&quot;&quot;</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9></a><a href=#__codelineno-6-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=k>for</span> <span class=n>story</span> <span class=ow>in</span> <span class=n>stories</span><span class=p>:</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10></a><a href=#__codelineno-6-10><span class=linenos data-linenos="10 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>dependency_graph</span><span class=o>.</span><span class=n>add_node</span><span class=p>(</span><span class=n>story</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>story</span><span class=o>=</span><span class=n>story</span><span class=p>)</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11></a><a href=#__codelineno-6-11><span class=linenos data-linenos="11 "></span></a>            
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12></a><a href=#__codelineno-6-12><span class=linenos data-linenos="12 "></span></a>            <span class=c1># Add explicit dependencies</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13></a><a href=#__codelineno-6-13><span class=linenos data-linenos="13 "></span></a>            <span class=k>for</span> <span class=n>dep_id</span> <span class=ow>in</span> <span class=n>story</span><span class=o>.</span><span class=n>depends_on</span><span class=p>:</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14></a><a href=#__codelineno-6-14><span class=linenos data-linenos="14 "></span></a>                <span class=bp>self</span><span class=o>.</span><span class=n>dependency_graph</span><span class=o>.</span><span class=n>add_edge</span><span class=p>(</span><span class=n>dep_id</span><span class=p>,</span> <span class=n>story</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15></a><a href=#__codelineno-6-15><span class=linenos data-linenos="15 "></span></a>                
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16></a><a href=#__codelineno-6-16><span class=linenos data-linenos="16 "></span></a>            <span class=c1># Add implicit dependencies (shared files)</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17></a><a href=#__codelineno-6-17><span class=linenos data-linenos="17 "></span></a>            <span class=k>for</span> <span class=n>other_story</span> <span class=ow>in</span> <span class=n>stories</span><span class=p>:</span>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18></a><a href=#__codelineno-6-18><span class=linenos data-linenos="18 "></span></a>                <span class=k>if</span> <span class=n>other_story</span><span class=o>.</span><span class=n>id</span> <span class=o>!=</span> <span class=n>story</span><span class=o>.</span><span class=n>id</span><span class=p>:</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19></a><a href=#__codelineno-6-19><span class=linenos data-linenos="19 "></span></a>                    <span class=n>shared_files</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>story</span><span class=o>.</span><span class=n>files</span><span class=p>)</span> <span class=o>&amp;</span> <span class=nb>set</span><span class=p>(</span><span class=n>other_story</span><span class=o>.</span><span class=n>files</span><span class=p>)</span>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20></a><a href=#__codelineno-6-20><span class=linenos data-linenos="20 "></span></a>                    <span class=k>if</span> <span class=n>shared_files</span><span class=p>:</span>
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21></a><a href=#__codelineno-6-21><span class=linenos data-linenos="21 "></span></a>                        <span class=c1># Earlier story ID gets priority</span>
</span><span id=__span-6-22><a id=__codelineno-6-22 name=__codelineno-6-22></a><a href=#__codelineno-6-22><span class=linenos data-linenos="22 "></span></a>                        <span class=k>if</span> <span class=n>story</span><span class=o>.</span><span class=n>id</span> <span class=o>&lt;</span> <span class=n>other_story</span><span class=o>.</span><span class=n>id</span><span class=p>:</span>
</span><span id=__span-6-23><a id=__codelineno-6-23 name=__codelineno-6-23></a><a href=#__codelineno-6-23><span class=linenos data-linenos="23 "></span></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>dependency_graph</span><span class=o>.</span><span class=n>add_edge</span><span class=p>(</span><span class=n>story</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>other_story</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span><span id=__span-6-24><a id=__codelineno-6-24 name=__codelineno-6-24></a><a href=#__codelineno-6-24><span class=linenos data-linenos="24 "></span></a>                        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-6-25><a id=__codelineno-6-25 name=__codelineno-6-25></a><a href=#__codelineno-6-25><span class=linenos data-linenos="25 "></span></a>                            <span class=bp>self</span><span class=o>.</span><span class=n>dependency_graph</span><span class=o>.</span><span class=n>add_edge</span><span class=p>(</span><span class=n>other_story</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>story</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span><span id=__span-6-26><a id=__codelineno-6-26 name=__codelineno-6-26></a><a href=#__codelineno-6-26><span class=linenos data-linenos="26 "></span></a>                            
</span><span id=__span-6-27><a id=__codelineno-6-27 name=__codelineno-6-27></a><a href=#__codelineno-6-27><span class=linenos data-linenos="27 "></span></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>dependency_graph</span>
</span><span id=__span-6-28><a id=__codelineno-6-28 name=__codelineno-6-28></a><a href=#__codelineno-6-28><span class=linenos data-linenos="28 "></span></a>        
</span><span id=__span-6-29><a id=__codelineno-6-29 name=__codelineno-6-29></a><a href=#__codelineno-6-29><span class=linenos data-linenos="29 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>get_next_schedulable</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-6-30><a id=__codelineno-6-30 name=__codelineno-6-30></a><a href=#__codelineno-6-30><span class=linenos data-linenos="30 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Get stories that can be scheduled now&quot;&quot;&quot;</span>
</span><span id=__span-6-31><a id=__codelineno-6-31 name=__codelineno-6-31></a><a href=#__codelineno-6-31><span class=linenos data-linenos="31 "></span></a>        <span class=n>schedulable</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-6-32><a id=__codelineno-6-32 name=__codelineno-6-32></a><a href=#__codelineno-6-32><span class=linenos data-linenos="32 "></span></a>        <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nx</span><span class=o>.</span><span class=n>topological_sort</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>dependency_graph</span><span class=p>):</span>
</span><span id=__span-6-33><a id=__codelineno-6-33 name=__codelineno-6-33></a><a href=#__codelineno-6-33><span class=linenos data-linenos="33 "></span></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>can_schedule_now</span><span class=p>(</span><span class=n>node</span><span class=p>):</span>
</span><span id=__span-6-34><a id=__codelineno-6-34 name=__codelineno-6-34></a><a href=#__codelineno-6-34><span class=linenos data-linenos="34 "></span></a>                <span class=n>schedulable</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
</span><span id=__span-6-35><a id=__codelineno-6-35 name=__codelineno-6-35></a><a href=#__codelineno-6-35><span class=linenos data-linenos="35 "></span></a>        <span class=k>return</span> <span class=n>schedulable</span>
</span></code></pre></div><h4 id=day-3-4-dynamic-agent-scaling>Day 3-4: Dynamic Agent Scaling<a class=headerlink href=#day-3-4-dynamic-agent-scaling title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1></a><a href=#__codelineno-7-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/dynamic_agent_pool.py</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2></a><a href=#__codelineno-7-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>DynamicAgentPool</span><span class=p>(</span><span class=n>BasicAgentPool</span><span class=p>):</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3></a><a href=#__codelineno-7-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>agent_type</span><span class=p>:</span> <span class=n>AgentType</span><span class=p>,</span> <span class=n>min_size</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>max_size</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>):</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4></a><a href=#__codelineno-7-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>agent_type</span><span class=p>,</span> <span class=n>min_size</span><span class=p>)</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5></a><a href=#__codelineno-7-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>min_size</span> <span class=o>=</span> <span class=n>min_size</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6></a><a href=#__codelineno-7-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>max_size</span> <span class=o>=</span> <span class=n>max_size</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7></a><a href=#__codelineno-7-7><span class=linenos data-linenos=" 7 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>scaling_metrics</span> <span class=o>=</span> <span class=n>ScalingMetrics</span><span class=p>()</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8></a><a href=#__codelineno-7-8><span class=linenos data-linenos=" 8 "></span></a>        
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9></a><a href=#__codelineno-7-9><span class=linenos data-linenos=" 9 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>auto_scale</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10></a><a href=#__codelineno-7-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Auto-scale pool based on demand&quot;&quot;&quot;</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11></a><a href=#__codelineno-7-11><span class=linenos data-linenos="11 "></span></a>        <span class=n>current_size</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>qsize</span><span class=p>()</span> <span class=o>+</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>active_agents</span><span class=p>)</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12></a><a href=#__codelineno-7-12><span class=linenos data-linenos="12 "></span></a>        <span class=n>wait_time</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>scaling_metrics</span><span class=o>.</span><span class=n>average_wait_time</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13></a><a href=#__codelineno-7-13><span class=linenos data-linenos="13 "></span></a>        <span class=n>utilization</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>active_agents</span><span class=p>)</span> <span class=o>/</span> <span class=n>current_size</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14></a><a href=#__codelineno-7-14><span class=linenos data-linenos="14 "></span></a>        
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15></a><a href=#__codelineno-7-15><span class=linenos data-linenos="15 "></span></a>        <span class=k>if</span> <span class=n>utilization</span> <span class=o>&gt;</span> <span class=mf>0.8</span> <span class=ow>and</span> <span class=n>wait_time</span> <span class=o>&gt;</span> <span class=mf>5.0</span> <span class=ow>and</span> <span class=n>current_size</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_size</span><span class=p>:</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16></a><a href=#__codelineno-7-16><span class=linenos data-linenos="16 "></span></a>            <span class=c1># Scale up</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17></a><a href=#__codelineno-7-17><span class=linenos data-linenos="17 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>add_agent</span><span class=p>()</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18></a><a href=#__codelineno-7-18><span class=linenos data-linenos="18 "></span></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Scaled up </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>agent_type</span><span class=si>}</span><span class=s2> pool to </span><span class=si>{</span><span class=n>current_size</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19></a><a href=#__codelineno-7-19><span class=linenos data-linenos="19 "></span></a>            
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20></a><a href=#__codelineno-7-20><span class=linenos data-linenos="20 "></span></a>        <span class=k>elif</span> <span class=n>utilization</span> <span class=o>&lt;</span> <span class=mf>0.3</span> <span class=ow>and</span> <span class=n>current_size</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>min_size</span><span class=p>:</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21></a><a href=#__codelineno-7-21><span class=linenos data-linenos="21 "></span></a>            <span class=c1># Scale down</span>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22></a><a href=#__codelineno-7-22><span class=linenos data-linenos="22 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>remove_agent</span><span class=p>()</span>
</span><span id=__span-7-23><a id=__codelineno-7-23 name=__codelineno-7-23></a><a href=#__codelineno-7-23><span class=linenos data-linenos="23 "></span></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Scaled down </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>agent_type</span><span class=si>}</span><span class=s2> pool to </span><span class=si>{</span><span class=n>current_size</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-7-24><a id=__codelineno-7-24 name=__codelineno-7-24></a><a href=#__codelineno-7-24><span class=linenos data-linenos="24 "></span></a>            
</span><span id=__span-7-25><a id=__codelineno-7-25 name=__codelineno-7-25></a><a href=#__codelineno-7-25><span class=linenos data-linenos="25 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>add_agent</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-7-26><a id=__codelineno-7-26 name=__codelineno-7-26></a><a href=#__codelineno-7-26><span class=linenos data-linenos="26 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Add new agent to pool&quot;&quot;&quot;</span>
</span><span id=__span-7-27><a id=__codelineno-7-27 name=__codelineno-7-27></a><a href=#__codelineno-7-27><span class=linenos data-linenos="27 "></span></a>        <span class=n>agent_id</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>agent_type</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>[:</span><span class=mi>8</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-7-28><a id=__codelineno-7-28 name=__codelineno-7-28></a><a href=#__codelineno-7-28><span class=linenos data-linenos="28 "></span></a>        <span class=n>agent</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_agent</span><span class=p>(</span><span class=n>agent_id</span><span class=p>)</span>
</span><span id=__span-7-29><a id=__codelineno-7-29 name=__codelineno-7-29></a><a href=#__codelineno-7-29><span class=linenos data-linenos="29 "></span></a>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>agent</span><span class=p>)</span>
</span><span id=__span-7-30><a id=__codelineno-7-30 name=__codelineno-7-30></a><a href=#__codelineno-7-30><span class=linenos data-linenos="30 "></span></a>        
</span><span id=__span-7-31><a id=__codelineno-7-31 name=__codelineno-7-31></a><a href=#__codelineno-7-31><span class=linenos data-linenos="31 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>remove_agent</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-7-32><a id=__codelineno-7-32 name=__codelineno-7-32></a><a href=#__codelineno-7-32><span class=linenos data-linenos="32 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Remove idle agent from pool&quot;&quot;&quot;</span>
</span><span id=__span-7-33><a id=__codelineno-7-33 name=__codelineno-7-33></a><a href=#__codelineno-7-33><span class=linenos data-linenos="33 "></span></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-7-34><a id=__codelineno-7-34 name=__codelineno-7-34></a><a href=#__codelineno-7-34><span class=linenos data-linenos="34 "></span></a>            <span class=n>agent</span> <span class=o>=</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>wait_for</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>get</span><span class=p>(),</span> <span class=n>timeout</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span><span id=__span-7-35><a id=__codelineno-7-35 name=__codelineno-7-35></a><a href=#__codelineno-7-35><span class=linenos data-linenos="35 "></span></a>            <span class=k>await</span> <span class=n>agent</span><span class=o>.</span><span class=n>shutdown</span><span class=p>()</span>
</span><span id=__span-7-36><a id=__codelineno-7-36 name=__codelineno-7-36></a><a href=#__codelineno-7-36><span class=linenos data-linenos="36 "></span></a>        <span class=k>except</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>TimeoutError</span><span class=p>:</span>
</span><span id=__span-7-37><a id=__codelineno-7-37 name=__codelineno-7-37></a><a href=#__codelineno-7-37><span class=linenos data-linenos="37 "></span></a>            <span class=k>pass</span>  <span class=c1># No idle agents</span>
</span></code></pre></div><h4 id=day-5-auto-merge-capability>Day 5: Auto-merge Capability<a class=headerlink href=#day-5-auto-merge-capability title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1></a><a href=#__codelineno-8-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/conflict_resolver.py</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2></a><a href=#__codelineno-8-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>AutoMergeResolver</span><span class=p>:</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3></a><a href=#__codelineno-8-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4></a><a href=#__codelineno-8-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>merge_strategies</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5></a><a href=#__codelineno-8-5><span class=linenos data-linenos=" 5 "></span></a>            <span class=n>MergeType</span><span class=o>.</span><span class=n>APPEND_ONLY</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>merge_append_only</span><span class=p>,</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6></a><a href=#__codelineno-8-6><span class=linenos data-linenos=" 6 "></span></a>            <span class=n>MergeType</span><span class=o>.</span><span class=n>NON_OVERLAPPING</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>merge_non_overlapping</span><span class=p>,</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7></a><a href=#__codelineno-8-7><span class=linenos data-linenos=" 7 "></span></a>            <span class=n>MergeType</span><span class=o>.</span><span class=n>IMPORT_ADDITIONS</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>merge_imports</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8></a><a href=#__codelineno-8-8><span class=linenos data-linenos=" 8 "></span></a>        <span class=p>}</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9></a><a href=#__codelineno-8-9><span class=linenos data-linenos=" 9 "></span></a>        
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10></a><a href=#__codelineno-8-10><span class=linenos data-linenos="10 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>can_auto_merge</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conflict</span><span class=p>:</span> <span class=n>Conflict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11></a><a href=#__codelineno-8-11><span class=linenos data-linenos="11 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Determine if conflict can be auto-merged&quot;&quot;&quot;</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12></a><a href=#__codelineno-8-12><span class=linenos data-linenos="12 "></span></a>        <span class=k>if</span> <span class=n>conflict</span><span class=o>.</span><span class=n>type</span> <span class=o>==</span> <span class=n>ConflictType</span><span class=o>.</span><span class=n>NEW_FILE</span><span class=p>:</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13></a><a href=#__codelineno-8-13><span class=linenos data-linenos="13 "></span></a>            <span class=k>return</span> <span class=kc>False</span>  <span class=c1># Can&#39;t auto-merge new file conflicts</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14></a><a href=#__codelineno-8-14><span class=linenos data-linenos="14 "></span></a>            
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15></a><a href=#__codelineno-8-15><span class=linenos data-linenos="15 "></span></a>        <span class=k>if</span> <span class=n>conflict</span><span class=o>.</span><span class=n>type</span> <span class=o>==</span> <span class=n>ConflictType</span><span class=o>.</span><span class=n>FILE_MODIFICATION</span><span class=p>:</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16></a><a href=#__codelineno-8-16><span class=linenos data-linenos="16 "></span></a>            <span class=c1># Analyze changes</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17></a><a href=#__codelineno-8-17><span class=linenos data-linenos="17 "></span></a>            <span class=n>changes1</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_changes</span><span class=p>(</span><span class=n>conflict</span><span class=o>.</span><span class=n>cycle1</span><span class=p>,</span> <span class=n>conflict</span><span class=o>.</span><span class=n>file_path</span><span class=p>)</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18></a><a href=#__codelineno-8-18><span class=linenos data-linenos="18 "></span></a>            <span class=n>changes2</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_changes</span><span class=p>(</span><span class=n>conflict</span><span class=o>.</span><span class=n>cycle2</span><span class=p>,</span> <span class=n>conflict</span><span class=o>.</span><span class=n>file_path</span><span class=p>)</span>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19></a><a href=#__codelineno-8-19><span class=linenos data-linenos="19 "></span></a>            
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20></a><a href=#__codelineno-8-20><span class=linenos data-linenos="20 "></span></a>            <span class=c1># Check if changes are in different sections</span>
</span><span id=__span-8-21><a id=__codelineno-8-21 name=__codelineno-8-21></a><a href=#__codelineno-8-21><span class=linenos data-linenos="21 "></span></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>changes_are_independent</span><span class=p>(</span><span class=n>changes1</span><span class=p>,</span> <span class=n>changes2</span><span class=p>):</span>
</span><span id=__span-8-22><a id=__codelineno-8-22 name=__codelineno-8-22></a><a href=#__codelineno-8-22><span class=linenos data-linenos="22 "></span></a>                <span class=k>return</span> <span class=kc>True</span>
</span><span id=__span-8-23><a id=__codelineno-8-23 name=__codelineno-8-23></a><a href=#__codelineno-8-23><span class=linenos data-linenos="23 "></span></a>                
</span><span id=__span-8-24><a id=__codelineno-8-24 name=__codelineno-8-24></a><a href=#__codelineno-8-24><span class=linenos data-linenos="24 "></span></a>        <span class=k>return</span> <span class=kc>False</span>
</span><span id=__span-8-25><a id=__codelineno-8-25 name=__codelineno-8-25></a><a href=#__codelineno-8-25><span class=linenos data-linenos="25 "></span></a>        
</span><span id=__span-8-26><a id=__codelineno-8-26 name=__codelineno-8-26></a><a href=#__codelineno-8-26><span class=linenos data-linenos="26 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>auto_merge</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conflict</span><span class=p>:</span> <span class=n>Conflict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>MergeResult</span><span class=p>:</span>
</span><span id=__span-8-27><a id=__codelineno-8-27 name=__codelineno-8-27></a><a href=#__codelineno-8-27><span class=linenos data-linenos="27 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Attempt automatic merge&quot;&quot;&quot;</span>
</span><span id=__span-8-28><a id=__codelineno-8-28 name=__codelineno-8-28></a><a href=#__codelineno-8-28><span class=linenos data-linenos="28 "></span></a>        <span class=n>merge_type</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>determine_merge_type</span><span class=p>(</span><span class=n>conflict</span><span class=p>)</span>
</span><span id=__span-8-29><a id=__codelineno-8-29 name=__codelineno-8-29></a><a href=#__codelineno-8-29><span class=linenos data-linenos="29 "></span></a>        <span class=n>merge_strategy</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>merge_strategies</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>merge_type</span><span class=p>)</span>
</span><span id=__span-8-30><a id=__codelineno-8-30 name=__codelineno-8-30></a><a href=#__codelineno-8-30><span class=linenos data-linenos="30 "></span></a>        
</span><span id=__span-8-31><a id=__codelineno-8-31 name=__codelineno-8-31></a><a href=#__codelineno-8-31><span class=linenos data-linenos="31 "></span></a>        <span class=k>if</span> <span class=n>merge_strategy</span><span class=p>:</span>
</span><span id=__span-8-32><a id=__codelineno-8-32 name=__codelineno-8-32></a><a href=#__codelineno-8-32><span class=linenos data-linenos="32 "></span></a>            <span class=k>return</span> <span class=k>await</span> <span class=n>merge_strategy</span><span class=p>(</span><span class=n>conflict</span><span class=p>)</span>
</span><span id=__span-8-33><a id=__codelineno-8-33 name=__codelineno-8-33></a><a href=#__codelineno-8-33><span class=linenos data-linenos="33 "></span></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-8-34><a id=__codelineno-8-34 name=__codelineno-8-34></a><a href=#__codelineno-8-34><span class=linenos data-linenos="34 "></span></a>            <span class=k>return</span> <span class=n>MergeResult</span><span class=p>(</span><span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>reason</span><span class=o>=</span><span class=s2>&quot;No suitable merge strategy&quot;</span><span class=p>)</span>
</span></code></pre></div><h3 id=week-4-test-isolation-and-integration>Week 4: Test Isolation and Integration<a class=headerlink href=#week-4-test-isolation-and-integration title="Permanent link">&para;</a></h3><h4 id=day-1-2-test-environment-manager>Day 1-2: Test Environment Manager<a class=headerlink href=#day-1-2-test-environment-manager title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1></a><a href=#__codelineno-9-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/test_environment.py</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2></a><a href=#__codelineno-9-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>TestEnvironmentManager</span><span class=p>:</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3></a><a href=#__codelineno-9-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>max_environments</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>3</span><span class=p>):</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4></a><a href=#__codelineno-9-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>environments</span> <span class=o>=</span> <span class=n>Queue</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=n>max_environments</span><span class=p>)</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5></a><a href=#__codelineno-9-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>active_envs</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>TestEnvironment</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6></a><a href=#__codelineno-9-6><span class=linenos data-linenos=" 6 "></span></a>        
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7></a><a href=#__codelineno-9-7><span class=linenos data-linenos=" 7 "></span></a>        <span class=c1># Pre-create environments</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8></a><a href=#__codelineno-9-8><span class=linenos data-linenos=" 8 "></span></a>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>max_environments</span><span class=p>):</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9></a><a href=#__codelineno-9-9><span class=linenos data-linenos=" 9 "></span></a>            <span class=n>env</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_environment</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;test_env_</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10></a><a href=#__codelineno-9-10><span class=linenos data-linenos="10 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>environments</span><span class=o>.</span><span class=n>put_nowait</span><span class=p>(</span><span class=n>env</span><span class=p>)</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11></a><a href=#__codelineno-9-11><span class=linenos data-linenos="11 "></span></a>            
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12></a><a href=#__codelineno-9-12><span class=linenos data-linenos="12 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>acquire_environment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>TestEnvironment</span><span class=p>:</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13></a><a href=#__codelineno-9-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Acquire isolated test environment&quot;&quot;&quot;</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14></a><a href=#__codelineno-9-14><span class=linenos data-linenos="14 "></span></a>        <span class=n>env</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>environments</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15></a><a href=#__codelineno-9-15><span class=linenos data-linenos="15 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>active_envs</span><span class=p>[</span><span class=n>cycle_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>env</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16></a><a href=#__codelineno-9-16><span class=linenos data-linenos="16 "></span></a>        
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17></a><a href=#__codelineno-9-17><span class=linenos data-linenos="17 "></span></a>        <span class=c1># Set up isolation</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18></a><a href=#__codelineno-9-18><span class=linenos data-linenos="18 "></span></a>        <span class=k>await</span> <span class=n>env</span><span class=o>.</span><span class=n>setup_isolation</span><span class=p>()</span>
</span><span id=__span-9-19><a id=__codelineno-9-19 name=__codelineno-9-19></a><a href=#__codelineno-9-19><span class=linenos data-linenos="19 "></span></a>        <span class=k>return</span> <span class=n>env</span>
</span><span id=__span-9-20><a id=__codelineno-9-20 name=__codelineno-9-20></a><a href=#__codelineno-9-20><span class=linenos data-linenos="20 "></span></a>        
</span><span id=__span-9-21><a id=__codelineno-9-21 name=__codelineno-9-21></a><a href=#__codelineno-9-21><span class=linenos data-linenos="21 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>release_environment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-9-22><a id=__codelineno-9-22 name=__codelineno-9-22></a><a href=#__codelineno-9-22><span class=linenos data-linenos="22 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Release and clean environment&quot;&quot;&quot;</span>
</span><span id=__span-9-23><a id=__codelineno-9-23 name=__codelineno-9-23></a><a href=#__codelineno-9-23><span class=linenos data-linenos="23 "></span></a>        <span class=n>env</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>active_envs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>cycle_id</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span><span id=__span-9-24><a id=__codelineno-9-24 name=__codelineno-9-24></a><a href=#__codelineno-9-24><span class=linenos data-linenos="24 "></span></a>        <span class=k>if</span> <span class=n>env</span><span class=p>:</span>
</span><span id=__span-9-25><a id=__codelineno-9-25 name=__codelineno-9-25></a><a href=#__codelineno-9-25><span class=linenos data-linenos="25 "></span></a>            <span class=k>await</span> <span class=n>env</span><span class=o>.</span><span class=n>cleanup</span><span class=p>()</span>
</span><span id=__span-9-26><a id=__codelineno-9-26 name=__codelineno-9-26></a><a href=#__codelineno-9-26><span class=linenos data-linenos="26 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>environments</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>env</span><span class=p>)</span>
</span><span id=__span-9-27><a id=__codelineno-9-27 name=__codelineno-9-27></a><a href=#__codelineno-9-27><span class=linenos data-linenos="27 "></span></a>            
</span><span id=__span-9-28><a id=__codelineno-9-28 name=__codelineno-9-28></a><a href=#__codelineno-9-28><span class=linenos data-linenos="28 "></span></a><span class=k>class</span> <span class=nc>TestEnvironment</span><span class=p>:</span>
</span><span id=__span-9-29><a id=__codelineno-9-29 name=__codelineno-9-29></a><a href=#__codelineno-9-29><span class=linenos data-linenos="29 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>env_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-9-30><a id=__codelineno-9-30 name=__codelineno-9-30></a><a href=#__codelineno-9-30><span class=linenos data-linenos="30 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>env_id</span> <span class=o>=</span> <span class=n>env_id</span>
</span><span id=__span-9-31><a id=__codelineno-9-31 name=__codelineno-9-31></a><a href=#__codelineno-9-31><span class=linenos data-linenos="31 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>test_db</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-9-32><a id=__codelineno-9-32 name=__codelineno-9-32></a><a href=#__codelineno-9-32><span class=linenos data-linenos="32 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>temp_dir</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-9-33><a id=__codelineno-9-33 name=__codelineno-9-33></a><a href=#__codelineno-9-33><span class=linenos data-linenos="33 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>container</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-9-34><a id=__codelineno-9-34 name=__codelineno-9-34></a><a href=#__codelineno-9-34><span class=linenos data-linenos="34 "></span></a>        
</span><span id=__span-9-35><a id=__codelineno-9-35 name=__codelineno-9-35></a><a href=#__codelineno-9-35><span class=linenos data-linenos="35 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>setup_isolation</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-9-36><a id=__codelineno-9-36 name=__codelineno-9-36></a><a href=#__codelineno-9-36><span class=linenos data-linenos="36 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Set up isolated environment&quot;&quot;&quot;</span>
</span><span id=__span-9-37><a id=__codelineno-9-37 name=__codelineno-9-37></a><a href=#__codelineno-9-37><span class=linenos data-linenos="37 "></span></a>        <span class=c1># Create temporary database</span>
</span><span id=__span-9-38><a id=__codelineno-9-38 name=__codelineno-9-38></a><a href=#__codelineno-9-38><span class=linenos data-linenos="38 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>test_db</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_test_database</span><span class=p>()</span>
</span><span id=__span-9-39><a id=__codelineno-9-39 name=__codelineno-9-39></a><a href=#__codelineno-9-39><span class=linenos data-linenos="39 "></span></a>        
</span><span id=__span-9-40><a id=__codelineno-9-40 name=__codelineno-9-40></a><a href=#__codelineno-9-40><span class=linenos data-linenos="40 "></span></a>        <span class=c1># Create isolated file system</span>
</span><span id=__span-9-41><a id=__codelineno-9-41 name=__codelineno-9-41></a><a href=#__codelineno-9-41><span class=linenos data-linenos="41 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>temp_dir</span> <span class=o>=</span> <span class=n>tempfile</span><span class=o>.</span><span class=n>mkdtemp</span><span class=p>(</span><span class=n>prefix</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;tdd_test_</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>env_id</span><span class=si>}</span><span class=s2>_&quot;</span><span class=p>)</span>
</span><span id=__span-9-42><a id=__codelineno-9-42 name=__codelineno-9-42></a><a href=#__codelineno-9-42><span class=linenos data-linenos="42 "></span></a>        
</span><span id=__span-9-43><a id=__codelineno-9-43 name=__codelineno-9-43></a><a href=#__codelineno-9-43><span class=linenos data-linenos="43 "></span></a>        <span class=c1># Optional: Create Docker container for full isolation</span>
</span><span id=__span-9-44><a id=__codelineno-9-44 name=__codelineno-9-44></a><a href=#__codelineno-9-44><span class=linenos data-linenos="44 "></span></a>        <span class=k>if</span> <span class=n>USE_CONTAINERS</span><span class=p>:</span>
</span><span id=__span-9-45><a id=__codelineno-9-45 name=__codelineno-9-45></a><a href=#__codelineno-9-45><span class=linenos data-linenos="45 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>container</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_test_container</span><span class=p>()</span>
</span></code></pre></div><h4 id=day-3-4-parallel-test-runner>Day 3-4: Parallel Test Runner<a class=headerlink href=#day-3-4-parallel-test-runner title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1></a><a href=#__codelineno-10-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/parallel_test_runner.py</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2></a><a href=#__codelineno-10-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>ParallelTestRunner</span><span class=p>:</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3></a><a href=#__codelineno-10-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>env_manager</span><span class=p>:</span> <span class=n>TestEnvironmentManager</span><span class=p>):</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4></a><a href=#__codelineno-10-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>env_manager</span> <span class=o>=</span> <span class=n>env_manager</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5></a><a href=#__codelineno-10-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>test_results</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>TestResult</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6></a><a href=#__codelineno-10-6><span class=linenos data-linenos=" 6 "></span></a>        
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7></a><a href=#__codelineno-10-7><span class=linenos data-linenos=" 7 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>run_tests_parallel</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>test_suites</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>TestSuite</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>TestResult</span><span class=p>]:</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8></a><a href=#__codelineno-10-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Run multiple test suites in parallel&quot;&quot;&quot;</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9></a><a href=#__codelineno-10-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=n>tasks</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10></a><a href=#__codelineno-10-10><span class=linenos data-linenos="10 "></span></a>        
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11></a><a href=#__codelineno-10-11><span class=linenos data-linenos="11 "></span></a>        <span class=k>for</span> <span class=n>suite</span> <span class=ow>in</span> <span class=n>test_suites</span><span class=p>:</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12></a><a href=#__codelineno-10-12><span class=linenos data-linenos="12 "></span></a>            <span class=n>task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>run_suite_isolated</span><span class=p>(</span><span class=n>suite</span><span class=p>))</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13></a><a href=#__codelineno-10-13><span class=linenos data-linenos="13 "></span></a>            <span class=n>tasks</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>task</span><span class=p>)</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14></a><a href=#__codelineno-10-14><span class=linenos data-linenos="14 "></span></a>            
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15></a><a href=#__codelineno-10-15><span class=linenos data-linenos="15 "></span></a>        <span class=n>results</span> <span class=o>=</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>gather</span><span class=p>(</span><span class=o>*</span><span class=n>tasks</span><span class=p>,</span> <span class=n>return_exceptions</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16></a><a href=#__codelineno-10-16><span class=linenos data-linenos="16 "></span></a>        
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17></a><a href=#__codelineno-10-17><span class=linenos data-linenos="17 "></span></a>        <span class=c1># Process results</span>
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18></a><a href=#__codelineno-10-18><span class=linenos data-linenos="18 "></span></a>        <span class=k>for</span> <span class=n>suite</span><span class=p>,</span> <span class=n>result</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>test_suites</span><span class=p>,</span> <span class=n>results</span><span class=p>):</span>
</span><span id=__span-10-19><a id=__codelineno-10-19 name=__codelineno-10-19></a><a href=#__codelineno-10-19><span class=linenos data-linenos="19 "></span></a>            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=ne>Exception</span><span class=p>):</span>
</span><span id=__span-10-20><a id=__codelineno-10-20 name=__codelineno-10-20></a><a href=#__codelineno-10-20><span class=linenos data-linenos="20 "></span></a>                <span class=bp>self</span><span class=o>.</span><span class=n>test_results</span><span class=p>[</span><span class=n>suite</span><span class=o>.</span><span class=n>cycle_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>TestResult</span><span class=p>(</span>
</span><span id=__span-10-21><a id=__codelineno-10-21 name=__codelineno-10-21></a><a href=#__codelineno-10-21><span class=linenos data-linenos="21 "></span></a>                    <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-10-22><a id=__codelineno-10-22 name=__codelineno-10-22></a><a href=#__codelineno-10-22><span class=linenos data-linenos="22 "></span></a>                    <span class=n>error</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span><span id=__span-10-23><a id=__codelineno-10-23 name=__codelineno-10-23></a><a href=#__codelineno-10-23><span class=linenos data-linenos="23 "></span></a>                <span class=p>)</span>
</span><span id=__span-10-24><a id=__codelineno-10-24 name=__codelineno-10-24></a><a href=#__codelineno-10-24><span class=linenos data-linenos="24 "></span></a>            <span class=k>else</span><span class=p>:</span>
</span><span id=__span-10-25><a id=__codelineno-10-25 name=__codelineno-10-25></a><a href=#__codelineno-10-25><span class=linenos data-linenos="25 "></span></a>                <span class=bp>self</span><span class=o>.</span><span class=n>test_results</span><span class=p>[</span><span class=n>suite</span><span class=o>.</span><span class=n>cycle_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>result</span>
</span><span id=__span-10-26><a id=__codelineno-10-26 name=__codelineno-10-26></a><a href=#__codelineno-10-26><span class=linenos data-linenos="26 "></span></a>                
</span><span id=__span-10-27><a id=__codelineno-10-27 name=__codelineno-10-27></a><a href=#__codelineno-10-27><span class=linenos data-linenos="27 "></span></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>test_results</span>
</span><span id=__span-10-28><a id=__codelineno-10-28 name=__codelineno-10-28></a><a href=#__codelineno-10-28><span class=linenos data-linenos="28 "></span></a>        
</span><span id=__span-10-29><a id=__codelineno-10-29 name=__codelineno-10-29></a><a href=#__codelineno-10-29><span class=linenos data-linenos="29 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>run_suite_isolated</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>suite</span><span class=p>:</span> <span class=n>TestSuite</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>TestResult</span><span class=p>:</span>
</span><span id=__span-10-30><a id=__codelineno-10-30 name=__codelineno-10-30></a><a href=#__codelineno-10-30><span class=linenos data-linenos="30 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Run test suite in isolated environment&quot;&quot;&quot;</span>
</span><span id=__span-10-31><a id=__codelineno-10-31 name=__codelineno-10-31></a><a href=#__codelineno-10-31><span class=linenos data-linenos="31 "></span></a>        <span class=n>env</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>env_manager</span><span class=o>.</span><span class=n>acquire_environment</span><span class=p>(</span><span class=n>suite</span><span class=o>.</span><span class=n>cycle_id</span><span class=p>)</span>
</span><span id=__span-10-32><a id=__codelineno-10-32 name=__codelineno-10-32></a><a href=#__codelineno-10-32><span class=linenos data-linenos="32 "></span></a>        
</span><span id=__span-10-33><a id=__codelineno-10-33 name=__codelineno-10-33></a><a href=#__codelineno-10-33><span class=linenos data-linenos="33 "></span></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-10-34><a id=__codelineno-10-34 name=__codelineno-10-34></a><a href=#__codelineno-10-34><span class=linenos data-linenos="34 "></span></a>            <span class=c1># Configure test runner for isolation</span>
</span><span id=__span-10-35><a id=__codelineno-10-35 name=__codelineno-10-35></a><a href=#__codelineno-10-35><span class=linenos data-linenos="35 "></span></a>            <span class=n>test_config</span> <span class=o>=</span> <span class=n>TestConfig</span><span class=p>(</span>
</span><span id=__span-10-36><a id=__codelineno-10-36 name=__codelineno-10-36></a><a href=#__codelineno-10-36><span class=linenos data-linenos="36 "></span></a>                <span class=n>database_url</span><span class=o>=</span><span class=n>env</span><span class=o>.</span><span class=n>test_db</span><span class=o>.</span><span class=n>url</span><span class=p>,</span>
</span><span id=__span-10-37><a id=__codelineno-10-37 name=__codelineno-10-37></a><a href=#__codelineno-10-37><span class=linenos data-linenos="37 "></span></a>                <span class=n>working_dir</span><span class=o>=</span><span class=n>env</span><span class=o>.</span><span class=n>temp_dir</span><span class=p>,</span>
</span><span id=__span-10-38><a id=__codelineno-10-38 name=__codelineno-10-38></a><a href=#__codelineno-10-38><span class=linenos data-linenos="38 "></span></a>                <span class=n>isolation_level</span><span class=o>=</span><span class=n>IsolationLevel</span><span class=o>.</span><span class=n>FULL</span>
</span><span id=__span-10-39><a id=__codelineno-10-39 name=__codelineno-10-39></a><a href=#__codelineno-10-39><span class=linenos data-linenos="39 "></span></a>            <span class=p>)</span>
</span><span id=__span-10-40><a id=__codelineno-10-40 name=__codelineno-10-40></a><a href=#__codelineno-10-40><span class=linenos data-linenos="40 "></span></a>            
</span><span id=__span-10-41><a id=__codelineno-10-41 name=__codelineno-10-41></a><a href=#__codelineno-10-41><span class=linenos data-linenos="41 "></span></a>            <span class=c1># Run tests</span>
</span><span id=__span-10-42><a id=__codelineno-10-42 name=__codelineno-10-42></a><a href=#__codelineno-10-42><span class=linenos data-linenos="42 "></span></a>            <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>suite</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>test_config</span><span class=p>)</span>
</span><span id=__span-10-43><a id=__codelineno-10-43 name=__codelineno-10-43></a><a href=#__codelineno-10-43><span class=linenos data-linenos="43 "></span></a>            <span class=k>return</span> <span class=n>result</span>
</span><span id=__span-10-44><a id=__codelineno-10-44 name=__codelineno-10-44></a><a href=#__codelineno-10-44><span class=linenos data-linenos="44 "></span></a>            
</span><span id=__span-10-45><a id=__codelineno-10-45 name=__codelineno-10-45></a><a href=#__codelineno-10-45><span class=linenos data-linenos="45 "></span></a>        <span class=k>finally</span><span class=p>:</span>
</span><span id=__span-10-46><a id=__codelineno-10-46 name=__codelineno-10-46></a><a href=#__codelineno-10-46><span class=linenos data-linenos="46 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>env_manager</span><span class=o>.</span><span class=n>release_environment</span><span class=p>(</span><span class=n>suite</span><span class=o>.</span><span class=n>cycle_id</span><span class=p>)</span>
</span></code></pre></div><h4 id=day-5-phase-2-integration>Day 5: Phase 2 Integration<a class=headerlink href=#day-5-phase-2-integration title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1></a><a href=#__codelineno-11-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/phase2_orchestrator.py</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2></a><a href=#__codelineno-11-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>Phase2ParallelOrchestrator</span><span class=p>(</span><span class=n>ParallelCoordinator</span><span class=p>):</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3></a><a href=#__codelineno-11-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4></a><a href=#__codelineno-11-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>max_parallel</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>  <span class=c1># Increase to 3</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5></a><a href=#__codelineno-11-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>scheduler</span> <span class=o>=</span> <span class=n>DependencyAwareScheduler</span><span class=p>()</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6></a><a href=#__codelineno-11-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>agent_pools</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7></a><a href=#__codelineno-11-7><span class=linenos data-linenos=" 7 "></span></a>            <span class=n>AgentType</span><span class=o>.</span><span class=n>DESIGN</span><span class=p>:</span> <span class=n>DynamicAgentPool</span><span class=p>(</span><span class=n>AgentType</span><span class=o>.</span><span class=n>DESIGN</span><span class=p>),</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8></a><a href=#__codelineno-11-8><span class=linenos data-linenos=" 8 "></span></a>            <span class=n>AgentType</span><span class=o>.</span><span class=n>QA</span><span class=p>:</span> <span class=n>DynamicAgentPool</span><span class=p>(</span><span class=n>AgentType</span><span class=o>.</span><span class=n>QA</span><span class=p>),</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9></a><a href=#__codelineno-11-9><span class=linenos data-linenos=" 9 "></span></a>            <span class=n>AgentType</span><span class=o>.</span><span class=n>CODE</span><span class=p>:</span> <span class=n>DynamicAgentPool</span><span class=p>(</span><span class=n>AgentType</span><span class=o>.</span><span class=n>CODE</span><span class=p>),</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10></a><a href=#__codelineno-11-10><span class=linenos data-linenos="10 "></span></a>        <span class=p>}</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11></a><a href=#__codelineno-11-11><span class=linenos data-linenos="11 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>conflict_resolver</span> <span class=o>=</span> <span class=n>AutoMergeResolver</span><span class=p>()</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12></a><a href=#__codelineno-11-12><span class=linenos data-linenos="12 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>test_runner</span> <span class=o>=</span> <span class=n>ParallelTestRunner</span><span class=p>()</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13></a><a href=#__codelineno-11-13><span class=linenos data-linenos="13 "></span></a>        
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14></a><a href=#__codelineno-11-14><span class=linenos data-linenos="14 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>execute_stories_parallel</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>stories</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Story</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>ExecutionResult</span><span class=p>:</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15></a><a href=#__codelineno-11-15><span class=linenos data-linenos="15 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Execute stories with intelligent scheduling&quot;&quot;&quot;</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16></a><a href=#__codelineno-11-16><span class=linenos data-linenos="16 "></span></a>        <span class=c1># Build dependency graph</span>
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17></a><a href=#__codelineno-11-17><span class=linenos data-linenos="17 "></span></a>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>scheduler</span><span class=o>.</span><span class=n>analyze_dependencies</span><span class=p>(</span><span class=n>stories</span><span class=p>)</span>
</span><span id=__span-11-18><a id=__codelineno-11-18 name=__codelineno-11-18></a><a href=#__codelineno-11-18><span class=linenos data-linenos="18 "></span></a>        
</span><span id=__span-11-19><a id=__codelineno-11-19 name=__codelineno-11-19></a><a href=#__codelineno-11-19><span class=linenos data-linenos="19 "></span></a>        <span class=c1># Execute with dependency awareness</span>
</span><span id=__span-11-20><a id=__codelineno-11-20 name=__codelineno-11-20></a><a href=#__codelineno-11-20><span class=linenos data-linenos="20 "></span></a>        <span class=n>completed</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-11-21><a id=__codelineno-11-21 name=__codelineno-11-21></a><a href=#__codelineno-11-21><span class=linenos data-linenos="21 "></span></a>        <span class=k>while</span> <span class=nb>len</span><span class=p>(</span><span class=n>completed</span><span class=p>)</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=n>stories</span><span class=p>):</span>
</span><span id=__span-11-22><a id=__codelineno-11-22 name=__codelineno-11-22></a><a href=#__codelineno-11-22><span class=linenos data-linenos="22 "></span></a>            <span class=c1># Get next schedulable stories</span>
</span><span id=__span-11-23><a id=__codelineno-11-23 name=__codelineno-11-23></a><a href=#__codelineno-11-23><span class=linenos data-linenos="23 "></span></a>            <span class=n>schedulable</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>scheduler</span><span class=o>.</span><span class=n>get_next_schedulable</span><span class=p>()</span>
</span><span id=__span-11-24><a id=__codelineno-11-24 name=__codelineno-11-24></a><a href=#__codelineno-11-24><span class=linenos data-linenos="24 "></span></a>            
</span><span id=__span-11-25><a id=__codelineno-11-25 name=__codelineno-11-25></a><a href=#__codelineno-11-25><span class=linenos data-linenos="25 "></span></a>            <span class=c1># Filter by available capacity</span>
</span><span id=__span-11-26><a id=__codelineno-11-26 name=__codelineno-11-26></a><a href=#__codelineno-11-26><span class=linenos data-linenos="26 "></span></a>            <span class=n>to_execute</span> <span class=o>=</span> <span class=n>schedulable</span><span class=p>[:</span><span class=bp>self</span><span class=o>.</span><span class=n>max_parallel</span> <span class=o>-</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>active_cycles</span><span class=p>)]</span>
</span><span id=__span-11-27><a id=__codelineno-11-27 name=__codelineno-11-27></a><a href=#__codelineno-11-27><span class=linenos data-linenos="27 "></span></a>            
</span><span id=__span-11-28><a id=__codelineno-11-28 name=__codelineno-11-28></a><a href=#__codelineno-11-28><span class=linenos data-linenos="28 "></span></a>            <span class=c1># Start cycles</span>
</span><span id=__span-11-29><a id=__codelineno-11-29 name=__codelineno-11-29></a><a href=#__codelineno-11-29><span class=linenos data-linenos="29 "></span></a>            <span class=n>tasks</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-11-30><a id=__codelineno-11-30 name=__codelineno-11-30></a><a href=#__codelineno-11-30><span class=linenos data-linenos="30 "></span></a>            <span class=k>for</span> <span class=n>story_id</span> <span class=ow>in</span> <span class=n>to_execute</span><span class=p>:</span>
</span><span id=__span-11-31><a id=__codelineno-11-31 name=__codelineno-11-31></a><a href=#__codelineno-11-31><span class=linenos data-linenos="31 "></span></a>                <span class=n>story</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_story</span><span class=p>(</span><span class=n>story_id</span><span class=p>)</span>
</span><span id=__span-11-32><a id=__codelineno-11-32 name=__codelineno-11-32></a><a href=#__codelineno-11-32><span class=linenos data-linenos="32 "></span></a>                <span class=n>task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>execute_story_with_retry</span><span class=p>(</span><span class=n>story</span><span class=p>))</span>
</span><span id=__span-11-33><a id=__codelineno-11-33 name=__codelineno-11-33></a><a href=#__codelineno-11-33><span class=linenos data-linenos="33 "></span></a>                <span class=n>tasks</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>task</span><span class=p>)</span>
</span><span id=__span-11-34><a id=__codelineno-11-34 name=__codelineno-11-34></a><a href=#__codelineno-11-34><span class=linenos data-linenos="34 "></span></a>                
</span><span id=__span-11-35><a id=__codelineno-11-35 name=__codelineno-11-35></a><a href=#__codelineno-11-35><span class=linenos data-linenos="35 "></span></a>            <span class=c1># Wait for completion</span>
</span><span id=__span-11-36><a id=__codelineno-11-36 name=__codelineno-11-36></a><a href=#__codelineno-11-36><span class=linenos data-linenos="36 "></span></a>            <span class=n>results</span> <span class=o>=</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>gather</span><span class=p>(</span><span class=o>*</span><span class=n>tasks</span><span class=p>)</span>
</span><span id=__span-11-37><a id=__codelineno-11-37 name=__codelineno-11-37></a><a href=#__codelineno-11-37><span class=linenos data-linenos="37 "></span></a>            <span class=n>completed</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=n>r</span><span class=o>.</span><span class=n>story_id</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>results</span> <span class=k>if</span> <span class=n>r</span><span class=o>.</span><span class=n>success</span><span class=p>])</span>
</span><span id=__span-11-38><a id=__codelineno-11-38 name=__codelineno-11-38></a><a href=#__codelineno-11-38><span class=linenos data-linenos="38 "></span></a>            
</span><span id=__span-11-39><a id=__codelineno-11-39 name=__codelineno-11-39></a><a href=#__codelineno-11-39><span class=linenos data-linenos="39 "></span></a>        <span class=k>return</span> <span class=n>ExecutionResult</span><span class=p>(</span><span class=n>stories</span><span class=o>=</span><span class=n>completed</span><span class=p>)</span>
</span></code></pre></div><h3 id=deliverables_1>Deliverables<a class=headerlink href=#deliverables_1 title="Permanent link">&para;</a></h3><ol><li>Dependency-aware scheduling system</li><li>Dynamic agent pool with auto-scaling</li><li>Basic auto-merge for simple conflicts</li><li>Isolated test environment system</li><li>3 parallel cycles support</li></ol><h2 id=phase-3-advanced-parallelism-weeks-5-6>Phase 3: Advanced Parallelism (Weeks 5-6)<a class=headerlink href=#phase-3-advanced-parallelism-weeks-5-6 title="Permanent link">&para;</a></h2><h3 id=goals_2>Goals<a class=headerlink href=#goals_2 title="Permanent link">&para;</a></h3><ul><li>Scale to 5+ concurrent cycles</li><li>Implement ML-based conflict prediction</li><li>Add optimistic concurrency control</li><li>Integrate parallel-aware context management</li></ul><h3 id=week-5-advanced-conflict-management>Week 5: Advanced Conflict Management<a class=headerlink href=#week-5-advanced-conflict-management title="Permanent link">&para;</a></h3><h4 id=day-1-2-ml-conflict-predictor>Day 1-2: ML Conflict Predictor<a class=headerlink href=#day-1-2-ml-conflict-predictor title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1></a><a href=#__codelineno-12-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/ml_conflict_predictor.py</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2></a><a href=#__codelineno-12-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>MLConflictPredictor</span><span class=p>:</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3></a><a href=#__codelineno-12-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4></a><a href=#__codelineno-12-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>model</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>load_or_train_model</span><span class=p>()</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5></a><a href=#__codelineno-12-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>feature_extractor</span> <span class=o>=</span> <span class=n>ConflictFeatureExtractor</span><span class=p>()</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6></a><a href=#__codelineno-12-6><span class=linenos data-linenos=" 6 "></span></a>        
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7></a><a href=#__codelineno-12-7><span class=linenos data-linenos=" 7 "></span></a>    <span class=k>def</span> <span class=nf>predict_conflict_probability</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>story1</span><span class=p>:</span> <span class=n>Story</span><span class=p>,</span> <span class=n>story2</span><span class=p>:</span> <span class=n>Story</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8></a><a href=#__codelineno-12-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Predict probability of conflict between two stories&quot;&quot;&quot;</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9></a><a href=#__codelineno-12-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=n>features</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>feature_extractor</span><span class=o>.</span><span class=n>extract</span><span class=p>(</span><span class=n>story1</span><span class=p>,</span> <span class=n>story2</span><span class=p>)</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10></a><a href=#__codelineno-12-10><span class=linenos data-linenos="10 "></span></a>        <span class=n>probability</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>model</span><span class=o>.</span><span class=n>predict_proba</span><span class=p>([</span><span class=n>features</span><span class=p>])[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11></a><a href=#__codelineno-12-11><span class=linenos data-linenos="11 "></span></a>        <span class=k>return</span> <span class=n>probability</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12></a><a href=#__codelineno-12-12><span class=linenos data-linenos="12 "></span></a>        
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13></a><a href=#__codelineno-12-13><span class=linenos data-linenos="13 "></span></a>    <span class=k>def</span> <span class=nf>extract_features</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>story1</span><span class=p>:</span> <span class=n>Story</span><span class=p>,</span> <span class=n>story2</span><span class=p>:</span> <span class=n>Story</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>:</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14></a><a href=#__codelineno-12-14><span class=linenos data-linenos="14 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Extract features for ML model&quot;&quot;&quot;</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15></a><a href=#__codelineno-12-15><span class=linenos data-linenos="15 "></span></a>        <span class=n>features</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16></a><a href=#__codelineno-12-16><span class=linenos data-linenos="16 "></span></a>        
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17></a><a href=#__codelineno-12-17><span class=linenos data-linenos="17 "></span></a>        <span class=c1># File overlap features</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18></a><a href=#__codelineno-12-18><span class=linenos data-linenos="18 "></span></a>        <span class=n>files1</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>analyze_affected_files</span><span class=p>(</span><span class=n>story1</span><span class=p>))</span>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19></a><a href=#__codelineno-12-19><span class=linenos data-linenos="19 "></span></a>        <span class=n>files2</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>analyze_affected_files</span><span class=p>(</span><span class=n>story2</span><span class=p>))</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20></a><a href=#__codelineno-12-20><span class=linenos data-linenos="20 "></span></a>        
</span><span id=__span-12-21><a id=__codelineno-12-21 name=__codelineno-12-21></a><a href=#__codelineno-12-21><span class=linenos data-linenos="21 "></span></a>        <span class=n>features</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>files1</span> <span class=o>&amp;</span> <span class=n>files2</span><span class=p>))</span>  <span class=c1># Shared files</span>
</span><span id=__span-12-22><a id=__codelineno-12-22 name=__codelineno-12-22></a><a href=#__codelineno-12-22><span class=linenos data-linenos="22 "></span></a>        <span class=n>features</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>files1</span> <span class=o>|</span> <span class=n>files2</span><span class=p>))</span>  <span class=c1># Total files</span>
</span><span id=__span-12-23><a id=__codelineno-12-23 name=__codelineno-12-23></a><a href=#__codelineno-12-23><span class=linenos data-linenos="23 "></span></a>        <span class=n>features</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>jaccard_similarity</span><span class=p>(</span><span class=n>files1</span><span class=p>,</span> <span class=n>files2</span><span class=p>))</span>
</span><span id=__span-12-24><a id=__codelineno-12-24 name=__codelineno-12-24></a><a href=#__codelineno-12-24><span class=linenos data-linenos="24 "></span></a>        
</span><span id=__span-12-25><a id=__codelineno-12-25 name=__codelineno-12-25></a><a href=#__codelineno-12-25><span class=linenos data-linenos="25 "></span></a>        <span class=c1># Code similarity features</span>
</span><span id=__span-12-26><a id=__codelineno-12-26 name=__codelineno-12-26></a><a href=#__codelineno-12-26><span class=linenos data-linenos="26 "></span></a>        <span class=n>features</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>code_similarity_score</span><span class=p>(</span><span class=n>story1</span><span class=p>,</span> <span class=n>story2</span><span class=p>))</span>
</span><span id=__span-12-27><a id=__codelineno-12-27 name=__codelineno-12-27></a><a href=#__codelineno-12-27><span class=linenos data-linenos="27 "></span></a>        
</span><span id=__span-12-28><a id=__codelineno-12-28 name=__codelineno-12-28></a><a href=#__codelineno-12-28><span class=linenos data-linenos="28 "></span></a>        <span class=c1># Historical conflict rate</span>
</span><span id=__span-12-29><a id=__codelineno-12-29 name=__codelineno-12-29></a><a href=#__codelineno-12-29><span class=linenos data-linenos="29 "></span></a>        <span class=n>features</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>get_historical_conflict_rate</span><span class=p>(</span>
</span><span id=__span-12-30><a id=__codelineno-12-30 name=__codelineno-12-30></a><a href=#__codelineno-12-30><span class=linenos data-linenos="30 "></span></a>            <span class=n>story1</span><span class=o>.</span><span class=n>epic_id</span><span class=p>,</span> <span class=n>story2</span><span class=o>.</span><span class=n>epic_id</span>
</span><span id=__span-12-31><a id=__codelineno-12-31 name=__codelineno-12-31></a><a href=#__codelineno-12-31><span class=linenos data-linenos="31 "></span></a>        <span class=p>))</span>
</span><span id=__span-12-32><a id=__codelineno-12-32 name=__codelineno-12-32></a><a href=#__codelineno-12-32><span class=linenos data-linenos="32 "></span></a>        
</span><span id=__span-12-33><a id=__codelineno-12-33 name=__codelineno-12-33></a><a href=#__codelineno-12-33><span class=linenos data-linenos="33 "></span></a>        <span class=c1># Developer features</span>
</span><span id=__span-12-34><a id=__codelineno-12-34 name=__codelineno-12-34></a><a href=#__codelineno-12-34><span class=linenos data-linenos="34 "></span></a>        <span class=n>features</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=mi>1</span> <span class=k>if</span> <span class=n>story1</span><span class=o>.</span><span class=n>assignee</span> <span class=o>==</span> <span class=n>story2</span><span class=o>.</span><span class=n>assignee</span> <span class=k>else</span> <span class=mi>0</span><span class=p>)</span>
</span><span id=__span-12-35><a id=__codelineno-12-35 name=__codelineno-12-35></a><a href=#__codelineno-12-35><span class=linenos data-linenos="35 "></span></a>        
</span><span id=__span-12-36><a id=__codelineno-12-36 name=__codelineno-12-36></a><a href=#__codelineno-12-36><span class=linenos data-linenos="36 "></span></a>        <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>features</span><span class=p>)</span>
</span><span id=__span-12-37><a id=__codelineno-12-37 name=__codelineno-12-37></a><a href=#__codelineno-12-37><span class=linenos data-linenos="37 "></span></a>        
</span><span id=__span-12-38><a id=__codelineno-12-38 name=__codelineno-12-38></a><a href=#__codelineno-12-38><span class=linenos data-linenos="38 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>rank_by_conflict_risk</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>stories</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Story</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Tuple</span><span class=p>[</span><span class=n>Story</span><span class=p>,</span> <span class=nb>float</span><span class=p>]]:</span>
</span><span id=__span-12-39><a id=__codelineno-12-39 name=__codelineno-12-39></a><a href=#__codelineno-12-39><span class=linenos data-linenos="39 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Rank stories by conflict risk&quot;&quot;&quot;</span>
</span><span id=__span-12-40><a id=__codelineno-12-40 name=__codelineno-12-40></a><a href=#__codelineno-12-40><span class=linenos data-linenos="40 "></span></a>        <span class=n>risk_scores</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-12-41><a id=__codelineno-12-41 name=__codelineno-12-41></a><a href=#__codelineno-12-41><span class=linenos data-linenos="41 "></span></a>        
</span><span id=__span-12-42><a id=__codelineno-12-42 name=__codelineno-12-42></a><a href=#__codelineno-12-42><span class=linenos data-linenos="42 "></span></a>        <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>story1</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>stories</span><span class=p>):</span>
</span><span id=__span-12-43><a id=__codelineno-12-43 name=__codelineno-12-43></a><a href=#__codelineno-12-43><span class=linenos data-linenos="43 "></span></a>            <span class=n>max_risk</span> <span class=o>=</span> <span class=mf>0.0</span>
</span><span id=__span-12-44><a id=__codelineno-12-44 name=__codelineno-12-44></a><a href=#__codelineno-12-44><span class=linenos data-linenos="44 "></span></a>            <span class=k>for</span> <span class=n>j</span><span class=p>,</span> <span class=n>story2</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>stories</span><span class=p>):</span>
</span><span id=__span-12-45><a id=__codelineno-12-45 name=__codelineno-12-45></a><a href=#__codelineno-12-45><span class=linenos data-linenos="45 "></span></a>                <span class=k>if</span> <span class=n>i</span> <span class=o>!=</span> <span class=n>j</span><span class=p>:</span>
</span><span id=__span-12-46><a id=__codelineno-12-46 name=__codelineno-12-46></a><a href=#__codelineno-12-46><span class=linenos data-linenos="46 "></span></a>                    <span class=n>risk</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>predict_conflict_probability</span><span class=p>(</span><span class=n>story1</span><span class=p>,</span> <span class=n>story2</span><span class=p>)</span>
</span><span id=__span-12-47><a id=__codelineno-12-47 name=__codelineno-12-47></a><a href=#__codelineno-12-47><span class=linenos data-linenos="47 "></span></a>                    <span class=n>max_risk</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>max_risk</span><span class=p>,</span> <span class=n>risk</span><span class=p>)</span>
</span><span id=__span-12-48><a id=__codelineno-12-48 name=__codelineno-12-48></a><a href=#__codelineno-12-48><span class=linenos data-linenos="48 "></span></a>                    
</span><span id=__span-12-49><a id=__codelineno-12-49 name=__codelineno-12-49></a><a href=#__codelineno-12-49><span class=linenos data-linenos="49 "></span></a>            <span class=n>risk_scores</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>story1</span><span class=p>,</span> <span class=n>max_risk</span><span class=p>))</span>
</span><span id=__span-12-50><a id=__codelineno-12-50 name=__codelineno-12-50></a><a href=#__codelineno-12-50><span class=linenos data-linenos="50 "></span></a>            
</span><span id=__span-12-51><a id=__codelineno-12-51 name=__codelineno-12-51></a><a href=#__codelineno-12-51><span class=linenos data-linenos="51 "></span></a>        <span class=k>return</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>risk_scores</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
</span></code></pre></div><h4 id=day-3-4-optimistic-concurrency>Day 3-4: Optimistic Concurrency<a class=headerlink href=#day-3-4-optimistic-concurrency title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1></a><a href=#__codelineno-13-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/optimistic_concurrency.py</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2></a><a href=#__codelineno-13-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>OptimisticConcurrencyController</span><span class=p>:</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3></a><a href=#__codelineno-13-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4></a><a href=#__codelineno-13-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>file_versions</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>FileVersion</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5></a><a href=#__codelineno-13-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>change_log</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>FileChange</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6></a><a href=#__codelineno-13-6><span class=linenos data-linenos=" 6 "></span></a>        
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7></a><a href=#__codelineno-13-7><span class=linenos data-linenos=" 7 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>start_transaction</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>files</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Transaction</span><span class=p>:</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8></a><a href=#__codelineno-13-8><span class=linenos data-linenos=" 8 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Start optimistic transaction&quot;&quot;&quot;</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9></a><a href=#__codelineno-13-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=n>transaction</span> <span class=o>=</span> <span class=n>Transaction</span><span class=p>(</span><span class=n>cycle_id</span><span class=o>=</span><span class=n>cycle_id</span><span class=p>)</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10></a><a href=#__codelineno-13-10><span class=linenos data-linenos="10 "></span></a>        
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11></a><a href=#__codelineno-13-11><span class=linenos data-linenos="11 "></span></a>        <span class=k>for</span> <span class=n>file_path</span> <span class=ow>in</span> <span class=n>files</span><span class=p>:</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12></a><a href=#__codelineno-13-12><span class=linenos data-linenos="12 "></span></a>            <span class=n>version</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_file_version</span><span class=p>(</span><span class=n>file_path</span><span class=p>)</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13></a><a href=#__codelineno-13-13><span class=linenos data-linenos="13 "></span></a>            <span class=n>transaction</span><span class=o>.</span><span class=n>add_file</span><span class=p>(</span><span class=n>file_path</span><span class=p>,</span> <span class=n>version</span><span class=p>)</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14></a><a href=#__codelineno-13-14><span class=linenos data-linenos="14 "></span></a>            
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15></a><a href=#__codelineno-13-15><span class=linenos data-linenos="15 "></span></a>        <span class=k>return</span> <span class=n>transaction</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16></a><a href=#__codelineno-13-16><span class=linenos data-linenos="16 "></span></a>        
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17></a><a href=#__codelineno-13-17><span class=linenos data-linenos="17 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>validate_and_commit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>transaction</span><span class=p>:</span> <span class=n>Transaction</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CommitResult</span><span class=p>:</span>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18></a><a href=#__codelineno-13-18><span class=linenos data-linenos="18 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate transaction and commit if valid&quot;&quot;&quot;</span>
</span><span id=__span-13-19><a id=__codelineno-13-19 name=__codelineno-13-19></a><a href=#__codelineno-13-19><span class=linenos data-linenos="19 "></span></a>        <span class=n>conflicts</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-13-20><a id=__codelineno-13-20 name=__codelineno-13-20></a><a href=#__codelineno-13-20><span class=linenos data-linenos="20 "></span></a>        
</span><span id=__span-13-21><a id=__codelineno-13-21 name=__codelineno-13-21></a><a href=#__codelineno-13-21><span class=linenos data-linenos="21 "></span></a>        <span class=k>for</span> <span class=n>file_path</span><span class=p>,</span> <span class=n>original_version</span> <span class=ow>in</span> <span class=n>transaction</span><span class=o>.</span><span class=n>files</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-13-22><a id=__codelineno-13-22 name=__codelineno-13-22></a><a href=#__codelineno-13-22><span class=linenos data-linenos="22 "></span></a>            <span class=n>current_version</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_file_version</span><span class=p>(</span><span class=n>file_path</span><span class=p>)</span>
</span><span id=__span-13-23><a id=__codelineno-13-23 name=__codelineno-13-23></a><a href=#__codelineno-13-23><span class=linenos data-linenos="23 "></span></a>            
</span><span id=__span-13-24><a id=__codelineno-13-24 name=__codelineno-13-24></a><a href=#__codelineno-13-24><span class=linenos data-linenos="24 "></span></a>            <span class=k>if</span> <span class=n>current_version</span> <span class=o>!=</span> <span class=n>original_version</span><span class=p>:</span>
</span><span id=__span-13-25><a id=__codelineno-13-25 name=__codelineno-13-25></a><a href=#__codelineno-13-25><span class=linenos data-linenos="25 "></span></a>                <span class=c1># Version conflict - check if we can merge</span>
</span><span id=__span-13-26><a id=__codelineno-13-26 name=__codelineno-13-26></a><a href=#__codelineno-13-26><span class=linenos data-linenos="26 "></span></a>                <span class=k>if</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>can_merge_changes</span><span class=p>(</span>
</span><span id=__span-13-27><a id=__codelineno-13-27 name=__codelineno-13-27></a><a href=#__codelineno-13-27><span class=linenos data-linenos="27 "></span></a>                    <span class=n>transaction</span><span class=o>.</span><span class=n>changes</span><span class=p>[</span><span class=n>file_path</span><span class=p>],</span>
</span><span id=__span-13-28><a id=__codelineno-13-28 name=__codelineno-13-28></a><a href=#__codelineno-13-28><span class=linenos data-linenos="28 "></span></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>get_changes_since</span><span class=p>(</span><span class=n>file_path</span><span class=p>,</span> <span class=n>original_version</span><span class=p>)</span>
</span><span id=__span-13-29><a id=__codelineno-13-29 name=__codelineno-13-29></a><a href=#__codelineno-13-29><span class=linenos data-linenos="29 "></span></a>                <span class=p>):</span>
</span><span id=__span-13-30><a id=__codelineno-13-30 name=__codelineno-13-30></a><a href=#__codelineno-13-30><span class=linenos data-linenos="30 "></span></a>                    <span class=c1># Auto-merge possible</span>
</span><span id=__span-13-31><a id=__codelineno-13-31 name=__codelineno-13-31></a><a href=#__codelineno-13-31><span class=linenos data-linenos="31 "></span></a>                    <span class=n>merged</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>merge_changes</span><span class=p>(</span>
</span><span id=__span-13-32><a id=__codelineno-13-32 name=__codelineno-13-32></a><a href=#__codelineno-13-32><span class=linenos data-linenos="32 "></span></a>                        <span class=n>transaction</span><span class=o>.</span><span class=n>changes</span><span class=p>[</span><span class=n>file_path</span><span class=p>],</span>
</span><span id=__span-13-33><a id=__codelineno-13-33 name=__codelineno-13-33></a><a href=#__codelineno-13-33><span class=linenos data-linenos="33 "></span></a>                        <span class=bp>self</span><span class=o>.</span><span class=n>get_changes_since</span><span class=p>(</span><span class=n>file_path</span><span class=p>,</span> <span class=n>original_version</span><span class=p>)</span>
</span><span id=__span-13-34><a id=__codelineno-13-34 name=__codelineno-13-34></a><a href=#__codelineno-13-34><span class=linenos data-linenos="34 "></span></a>                    <span class=p>)</span>
</span><span id=__span-13-35><a id=__codelineno-13-35 name=__codelineno-13-35></a><a href=#__codelineno-13-35><span class=linenos data-linenos="35 "></span></a>                    <span class=n>transaction</span><span class=o>.</span><span class=n>changes</span><span class=p>[</span><span class=n>file_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>merged</span>
</span><span id=__span-13-36><a id=__codelineno-13-36 name=__codelineno-13-36></a><a href=#__codelineno-13-36><span class=linenos data-linenos="36 "></span></a>                <span class=k>else</span><span class=p>:</span>
</span><span id=__span-13-37><a id=__codelineno-13-37 name=__codelineno-13-37></a><a href=#__codelineno-13-37><span class=linenos data-linenos="37 "></span></a>                    <span class=n>conflicts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>FileConflict</span><span class=p>(</span>
</span><span id=__span-13-38><a id=__codelineno-13-38 name=__codelineno-13-38></a><a href=#__codelineno-13-38><span class=linenos data-linenos="38 "></span></a>                        <span class=n>file_path</span><span class=o>=</span><span class=n>file_path</span><span class=p>,</span>
</span><span id=__span-13-39><a id=__codelineno-13-39 name=__codelineno-13-39></a><a href=#__codelineno-13-39><span class=linenos data-linenos="39 "></span></a>                        <span class=n>cycle_id</span><span class=o>=</span><span class=n>transaction</span><span class=o>.</span><span class=n>cycle_id</span><span class=p>,</span>
</span><span id=__span-13-40><a id=__codelineno-13-40 name=__codelineno-13-40></a><a href=#__codelineno-13-40><span class=linenos data-linenos="40 "></span></a>                        <span class=n>original_version</span><span class=o>=</span><span class=n>original_version</span><span class=p>,</span>
</span><span id=__span-13-41><a id=__codelineno-13-41 name=__codelineno-13-41></a><a href=#__codelineno-13-41><span class=linenos data-linenos="41 "></span></a>                        <span class=n>current_version</span><span class=o>=</span><span class=n>current_version</span>
</span><span id=__span-13-42><a id=__codelineno-13-42 name=__codelineno-13-42></a><a href=#__codelineno-13-42><span class=linenos data-linenos="42 "></span></a>                    <span class=p>))</span>
</span><span id=__span-13-43><a id=__codelineno-13-43 name=__codelineno-13-43></a><a href=#__codelineno-13-43><span class=linenos data-linenos="43 "></span></a>                    
</span><span id=__span-13-44><a id=__codelineno-13-44 name=__codelineno-13-44></a><a href=#__codelineno-13-44><span class=linenos data-linenos="44 "></span></a>        <span class=k>if</span> <span class=n>conflicts</span><span class=p>:</span>
</span><span id=__span-13-45><a id=__codelineno-13-45 name=__codelineno-13-45></a><a href=#__codelineno-13-45><span class=linenos data-linenos="45 "></span></a>            <span class=k>return</span> <span class=n>CommitResult</span><span class=p>(</span><span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>conflicts</span><span class=o>=</span><span class=n>conflicts</span><span class=p>)</span>
</span><span id=__span-13-46><a id=__codelineno-13-46 name=__codelineno-13-46></a><a href=#__codelineno-13-46><span class=linenos data-linenos="46 "></span></a>            
</span><span id=__span-13-47><a id=__codelineno-13-47 name=__codelineno-13-47></a><a href=#__codelineno-13-47><span class=linenos data-linenos="47 "></span></a>        <span class=c1># Commit changes</span>
</span><span id=__span-13-48><a id=__codelineno-13-48 name=__codelineno-13-48></a><a href=#__codelineno-13-48><span class=linenos data-linenos="48 "></span></a>        <span class=k>for</span> <span class=n>file_path</span><span class=p>,</span> <span class=n>changes</span> <span class=ow>in</span> <span class=n>transaction</span><span class=o>.</span><span class=n>changes</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-13-49><a id=__codelineno-13-49 name=__codelineno-13-49></a><a href=#__codelineno-13-49><span class=linenos data-linenos="49 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>apply_changes</span><span class=p>(</span><span class=n>file_path</span><span class=p>,</span> <span class=n>changes</span><span class=p>)</span>
</span><span id=__span-13-50><a id=__codelineno-13-50 name=__codelineno-13-50></a><a href=#__codelineno-13-50><span class=linenos data-linenos="50 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>file_versions</span><span class=p>[</span><span class=n>file_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>FileVersion</span><span class=p>(</span>
</span><span id=__span-13-51><a id=__codelineno-13-51 name=__codelineno-13-51></a><a href=#__codelineno-13-51><span class=linenos data-linenos="51 "></span></a>                <span class=n>version</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>file_versions</span><span class=p>[</span><span class=n>file_path</span><span class=p>]</span><span class=o>.</span><span class=n>version</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span><span id=__span-13-52><a id=__codelineno-13-52 name=__codelineno-13-52></a><a href=#__codelineno-13-52><span class=linenos data-linenos="52 "></span></a>                <span class=n>modified_by</span><span class=o>=</span><span class=n>transaction</span><span class=o>.</span><span class=n>cycle_id</span><span class=p>,</span>
</span><span id=__span-13-53><a id=__codelineno-13-53 name=__codelineno-13-53></a><a href=#__codelineno-13-53><span class=linenos data-linenos="53 "></span></a>                <span class=n>timestamp</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span><span id=__span-13-54><a id=__codelineno-13-54 name=__codelineno-13-54></a><a href=#__codelineno-13-54><span class=linenos data-linenos="54 "></span></a>            <span class=p>)</span>
</span><span id=__span-13-55><a id=__codelineno-13-55 name=__codelineno-13-55></a><a href=#__codelineno-13-55><span class=linenos data-linenos="55 "></span></a>            
</span><span id=__span-13-56><a id=__codelineno-13-56 name=__codelineno-13-56></a><a href=#__codelineno-13-56><span class=linenos data-linenos="56 "></span></a>        <span class=k>return</span> <span class=n>CommitResult</span><span class=p>(</span><span class=n>success</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></code></pre></div><h4 id=day-5-advanced-scheduling>Day 5: Advanced Scheduling<a class=headerlink href=#day-5-advanced-scheduling title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1></a><a href=#__codelineno-14-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/advanced_scheduler.py</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2></a><a href=#__codelineno-14-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>AdvancedParallelScheduler</span><span class=p>:</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3></a><a href=#__codelineno-14-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>max_parallel</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>):</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4></a><a href=#__codelineno-14-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>max_parallel</span> <span class=o>=</span> <span class=n>max_parallel</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5></a><a href=#__codelineno-14-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>ml_predictor</span> <span class=o>=</span> <span class=n>MLConflictPredictor</span><span class=p>()</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6></a><a href=#__codelineno-14-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>resource_predictor</span> <span class=o>=</span> <span class=n>ResourcePredictor</span><span class=p>()</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7></a><a href=#__codelineno-14-7><span class=linenos data-linenos=" 7 "></span></a>        
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8></a><a href=#__codelineno-14-8><span class=linenos data-linenos=" 8 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>optimize_schedule</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>stories</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Story</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Schedule</span><span class=p>:</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9></a><a href=#__codelineno-14-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Create optimal schedule minimizing conflicts and maximizing throughput&quot;&quot;&quot;</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10></a><a href=#__codelineno-14-10><span class=linenos data-linenos="10 "></span></a>        <span class=c1># Rank by conflict risk</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11></a><a href=#__codelineno-14-11><span class=linenos data-linenos="11 "></span></a>        <span class=n>ranked_stories</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>ml_predictor</span><span class=o>.</span><span class=n>rank_by_conflict_risk</span><span class=p>(</span><span class=n>stories</span><span class=p>)</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12></a><a href=#__codelineno-14-12><span class=linenos data-linenos="12 "></span></a>        
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13></a><a href=#__codelineno-14-13><span class=linenos data-linenos="13 "></span></a>        <span class=c1># Create time slots</span>
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14></a><a href=#__codelineno-14-14><span class=linenos data-linenos="14 "></span></a>        <span class=n>schedule</span> <span class=o>=</span> <span class=n>Schedule</span><span class=p>()</span>
</span><span id=__span-14-15><a id=__codelineno-14-15 name=__codelineno-14-15></a><a href=#__codelineno-14-15><span class=linenos data-linenos="15 "></span></a>        <span class=n>current_slot</span> <span class=o>=</span> <span class=mi>0</span>
</span><span id=__span-14-16><a id=__codelineno-14-16 name=__codelineno-14-16></a><a href=#__codelineno-14-16><span class=linenos data-linenos="16 "></span></a>        
</span><span id=__span-14-17><a id=__codelineno-14-17 name=__codelineno-14-17></a><a href=#__codelineno-14-17><span class=linenos data-linenos="17 "></span></a>        <span class=k>while</span> <span class=n>ranked_stories</span><span class=p>:</span>
</span><span id=__span-14-18><a id=__codelineno-14-18 name=__codelineno-14-18></a><a href=#__codelineno-14-18><span class=linenos data-linenos="18 "></span></a>            <span class=n>slot_stories</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-14-19><a id=__codelineno-14-19 name=__codelineno-14-19></a><a href=#__codelineno-14-19><span class=linenos data-linenos="19 "></span></a>            <span class=n>slot_resources</span> <span class=o>=</span> <span class=n>ResourceRequirements</span><span class=p>()</span>
</span><span id=__span-14-20><a id=__codelineno-14-20 name=__codelineno-14-20></a><a href=#__codelineno-14-20><span class=linenos data-linenos="20 "></span></a>            
</span><span id=__span-14-21><a id=__codelineno-14-21 name=__codelineno-14-21></a><a href=#__codelineno-14-21><span class=linenos data-linenos="21 "></span></a>            <span class=c1># Fill current time slot</span>
</span><span id=__span-14-22><a id=__codelineno-14-22 name=__codelineno-14-22></a><a href=#__codelineno-14-22><span class=linenos data-linenos="22 "></span></a>            <span class=k>for</span> <span class=n>story</span><span class=p>,</span> <span class=n>risk</span> <span class=ow>in</span> <span class=nb>list</span><span class=p>(</span><span class=n>ranked_stories</span><span class=p>):</span>
</span><span id=__span-14-23><a id=__codelineno-14-23 name=__codelineno-14-23></a><a href=#__codelineno-14-23><span class=linenos data-linenos="23 "></span></a>                <span class=c1># Check if we can add this story to current slot</span>
</span><span id=__span-14-24><a id=__codelineno-14-24 name=__codelineno-14-24></a><a href=#__codelineno-14-24><span class=linenos data-linenos="24 "></span></a>                <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>slot_stories</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_parallel</span><span class=p>:</span>
</span><span id=__span-14-25><a id=__codelineno-14-25 name=__codelineno-14-25></a><a href=#__codelineno-14-25><span class=linenos data-linenos="25 "></span></a>                    <span class=k>break</span>
</span><span id=__span-14-26><a id=__codelineno-14-26 name=__codelineno-14-26></a><a href=#__codelineno-14-26><span class=linenos data-linenos="26 "></span></a>                    
</span><span id=__span-14-27><a id=__codelineno-14-27 name=__codelineno-14-27></a><a href=#__codelineno-14-27><span class=linenos data-linenos="27 "></span></a>                <span class=c1># Predict resource needs</span>
</span><span id=__span-14-28><a id=__codelineno-14-28 name=__codelineno-14-28></a><a href=#__codelineno-14-28><span class=linenos data-linenos="28 "></span></a>                <span class=n>story_resources</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>resource_predictor</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>story</span><span class=p>)</span>
</span><span id=__span-14-29><a id=__codelineno-14-29 name=__codelineno-14-29></a><a href=#__codelineno-14-29><span class=linenos data-linenos="29 "></span></a>                
</span><span id=__span-14-30><a id=__codelineno-14-30 name=__codelineno-14-30></a><a href=#__codelineno-14-30><span class=linenos data-linenos="30 "></span></a>                <span class=c1># Check resource availability</span>
</span><span id=__span-14-31><a id=__codelineno-14-31 name=__codelineno-14-31></a><a href=#__codelineno-14-31><span class=linenos data-linenos="31 "></span></a>                <span class=k>if</span> <span class=n>slot_resources</span><span class=o>.</span><span class=n>can_accommodate</span><span class=p>(</span><span class=n>story_resources</span><span class=p>):</span>
</span><span id=__span-14-32><a id=__codelineno-14-32 name=__codelineno-14-32></a><a href=#__codelineno-14-32><span class=linenos data-linenos="32 "></span></a>                    <span class=c1># Check conflict risk with stories in slot</span>
</span><span id=__span-14-33><a id=__codelineno-14-33 name=__codelineno-14-33></a><a href=#__codelineno-14-33><span class=linenos data-linenos="33 "></span></a>                    <span class=n>max_risk</span> <span class=o>=</span> <span class=mf>0.0</span>
</span><span id=__span-14-34><a id=__codelineno-14-34 name=__codelineno-14-34></a><a href=#__codelineno-14-34><span class=linenos data-linenos="34 "></span></a>                    <span class=k>for</span> <span class=n>scheduled_story</span> <span class=ow>in</span> <span class=n>slot_stories</span><span class=p>:</span>
</span><span id=__span-14-35><a id=__codelineno-14-35 name=__codelineno-14-35></a><a href=#__codelineno-14-35><span class=linenos data-linenos="35 "></span></a>                        <span class=n>conflict_risk</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ml_predictor</span><span class=o>.</span><span class=n>predict_conflict_probability</span><span class=p>(</span>
</span><span id=__span-14-36><a id=__codelineno-14-36 name=__codelineno-14-36></a><a href=#__codelineno-14-36><span class=linenos data-linenos="36 "></span></a>                            <span class=n>story</span><span class=p>,</span> <span class=n>scheduled_story</span>
</span><span id=__span-14-37><a id=__codelineno-14-37 name=__codelineno-14-37></a><a href=#__codelineno-14-37><span class=linenos data-linenos="37 "></span></a>                        <span class=p>)</span>
</span><span id=__span-14-38><a id=__codelineno-14-38 name=__codelineno-14-38></a><a href=#__codelineno-14-38><span class=linenos data-linenos="38 "></span></a>                        <span class=n>max_risk</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>max_risk</span><span class=p>,</span> <span class=n>conflict_risk</span><span class=p>)</span>
</span><span id=__span-14-39><a id=__codelineno-14-39 name=__codelineno-14-39></a><a href=#__codelineno-14-39><span class=linenos data-linenos="39 "></span></a>                        
</span><span id=__span-14-40><a id=__codelineno-14-40 name=__codelineno-14-40></a><a href=#__codelineno-14-40><span class=linenos data-linenos="40 "></span></a>                    <span class=k>if</span> <span class=n>max_risk</span> <span class=o>&lt;</span> <span class=mf>0.3</span><span class=p>:</span>  <span class=c1># Acceptable risk threshold</span>
</span><span id=__span-14-41><a id=__codelineno-14-41 name=__codelineno-14-41></a><a href=#__codelineno-14-41><span class=linenos data-linenos="41 "></span></a>                        <span class=n>slot_stories</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>story</span><span class=p>)</span>
</span><span id=__span-14-42><a id=__codelineno-14-42 name=__codelineno-14-42></a><a href=#__codelineno-14-42><span class=linenos data-linenos="42 "></span></a>                        <span class=n>slot_resources</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>story_resources</span><span class=p>)</span>
</span><span id=__span-14-43><a id=__codelineno-14-43 name=__codelineno-14-43></a><a href=#__codelineno-14-43><span class=linenos data-linenos="43 "></span></a>                        <span class=n>ranked_stories</span><span class=o>.</span><span class=n>remove</span><span class=p>((</span><span class=n>story</span><span class=p>,</span> <span class=n>risk</span><span class=p>))</span>
</span><span id=__span-14-44><a id=__codelineno-14-44 name=__codelineno-14-44></a><a href=#__codelineno-14-44><span class=linenos data-linenos="44 "></span></a>                        
</span><span id=__span-14-45><a id=__codelineno-14-45 name=__codelineno-14-45></a><a href=#__codelineno-14-45><span class=linenos data-linenos="45 "></span></a>            <span class=c1># Add slot to schedule</span>
</span><span id=__span-14-46><a id=__codelineno-14-46 name=__codelineno-14-46></a><a href=#__codelineno-14-46><span class=linenos data-linenos="46 "></span></a>            <span class=k>if</span> <span class=n>slot_stories</span><span class=p>:</span>
</span><span id=__span-14-47><a id=__codelineno-14-47 name=__codelineno-14-47></a><a href=#__codelineno-14-47><span class=linenos data-linenos="47 "></span></a>                <span class=n>schedule</span><span class=o>.</span><span class=n>add_slot</span><span class=p>(</span><span class=n>current_slot</span><span class=p>,</span> <span class=n>slot_stories</span><span class=p>)</span>
</span><span id=__span-14-48><a id=__codelineno-14-48 name=__codelineno-14-48></a><a href=#__codelineno-14-48><span class=linenos data-linenos="48 "></span></a>                <span class=n>current_slot</span> <span class=o>+=</span> <span class=mi>1</span>
</span><span id=__span-14-49><a id=__codelineno-14-49 name=__codelineno-14-49></a><a href=#__codelineno-14-49><span class=linenos data-linenos="49 "></span></a>            <span class=k>else</span><span class=p>:</span>
</span><span id=__span-14-50><a id=__codelineno-14-50 name=__codelineno-14-50></a><a href=#__codelineno-14-50><span class=linenos data-linenos="50 "></span></a>                <span class=c1># Couldn&#39;t schedule any more stories</span>
</span><span id=__span-14-51><a id=__codelineno-14-51 name=__codelineno-14-51></a><a href=#__codelineno-14-51><span class=linenos data-linenos="51 "></span></a>                <span class=k>break</span>
</span><span id=__span-14-52><a id=__codelineno-14-52 name=__codelineno-14-52></a><a href=#__codelineno-14-52><span class=linenos data-linenos="52 "></span></a>                
</span><span id=__span-14-53><a id=__codelineno-14-53 name=__codelineno-14-53></a><a href=#__codelineno-14-53><span class=linenos data-linenos="53 "></span></a>        <span class=k>return</span> <span class=n>schedule</span>
</span></code></pre></div><h3 id=week-6-context-integration-and-optimization>Week 6: Context Integration and Optimization<a class=headerlink href=#week-6-context-integration-and-optimization title="Permanent link">&para;</a></h3><h4 id=day-1-2-parallel-context-manager>Day 1-2: Parallel Context Manager<a class=headerlink href=#day-1-2-parallel-context-manager title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1></a><a href=#__codelineno-15-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/parallel_context_manager.py</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2></a><a href=#__codelineno-15-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>ParallelContextManager</span><span class=p>:</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3></a><a href=#__codelineno-15-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>base_context_manager</span><span class=p>:</span> <span class=n>ContextManager</span><span class=p>):</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4></a><a href=#__codelineno-15-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>base_manager</span> <span class=o>=</span> <span class=n>base_context_manager</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5></a><a href=#__codelineno-15-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>cycle_contexts</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>IsolatedContext</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6></a><a href=#__codelineno-15-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>shared_knowledge</span> <span class=o>=</span> <span class=n>SharedKnowledgeBase</span><span class=p>()</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7></a><a href=#__codelineno-15-7><span class=linenos data-linenos=" 7 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>token_allocator</span> <span class=o>=</span> <span class=n>ParallelTokenAllocator</span><span class=p>()</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8></a><a href=#__codelineno-15-8><span class=linenos data-linenos=" 8 "></span></a>        
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9></a><a href=#__codelineno-15-9><span class=linenos data-linenos=" 9 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>create_cycle_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>story</span><span class=p>:</span> <span class=n>Story</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>IsolatedContext</span><span class=p>:</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10></a><a href=#__codelineno-15-10><span class=linenos data-linenos="10 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Create isolated context for a cycle&quot;&quot;&quot;</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11></a><a href=#__codelineno-15-11><span class=linenos data-linenos="11 "></span></a>        <span class=c1># Calculate token budget</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12></a><a href=#__codelineno-15-12><span class=linenos data-linenos="12 "></span></a>        <span class=n>active_cycles</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>cycle_contexts</span><span class=p>)</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13></a><a href=#__codelineno-15-13><span class=linenos data-linenos="13 "></span></a>        <span class=n>token_budget</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>token_allocator</span><span class=o>.</span><span class=n>allocate_for_cycle</span><span class=p>(</span>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14></a><a href=#__codelineno-15-14><span class=linenos data-linenos="14 "></span></a>            <span class=n>cycle_id</span><span class=p>,</span> <span class=n>active_cycles</span> <span class=o>+</span> <span class=mi>1</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15></a><a href=#__codelineno-15-15><span class=linenos data-linenos="15 "></span></a>        <span class=p>)</span>
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16></a><a href=#__codelineno-15-16><span class=linenos data-linenos="16 "></span></a>        
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17></a><a href=#__codelineno-15-17><span class=linenos data-linenos="17 "></span></a>        <span class=c1># Create isolated context</span>
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18></a><a href=#__codelineno-15-18><span class=linenos data-linenos="18 "></span></a>        <span class=n>context</span> <span class=o>=</span> <span class=n>IsolatedContext</span><span class=p>(</span>
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19></a><a href=#__codelineno-15-19><span class=linenos data-linenos="19 "></span></a>            <span class=n>cycle_id</span><span class=o>=</span><span class=n>cycle_id</span><span class=p>,</span>
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20></a><a href=#__codelineno-15-20><span class=linenos data-linenos="20 "></span></a>            <span class=n>story_id</span><span class=o>=</span><span class=n>story</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21></a><a href=#__codelineno-15-21><span class=linenos data-linenos="21 "></span></a>            <span class=n>token_budget</span><span class=o>=</span><span class=n>token_budget</span><span class=p>,</span>
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22></a><a href=#__codelineno-15-22><span class=linenos data-linenos="22 "></span></a>            <span class=n>shared_knowledge</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>shared_knowledge</span><span class=o>.</span><span class=n>get_readonly_view</span><span class=p>()</span>
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23></a><a href=#__codelineno-15-23><span class=linenos data-linenos="23 "></span></a>        <span class=p>)</span>
</span><span id=__span-15-24><a id=__codelineno-15-24 name=__codelineno-15-24></a><a href=#__codelineno-15-24><span class=linenos data-linenos="24 "></span></a>        
</span><span id=__span-15-25><a id=__codelineno-15-25 name=__codelineno-15-25></a><a href=#__codelineno-15-25><span class=linenos data-linenos="25 "></span></a>        <span class=c1># Add story-specific context</span>
</span><span id=__span-15-26><a id=__codelineno-15-26 name=__codelineno-15-26></a><a href=#__codelineno-15-26><span class=linenos data-linenos="26 "></span></a>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>add_story_context</span><span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=n>story</span><span class=p>)</span>
</span><span id=__span-15-27><a id=__codelineno-15-27 name=__codelineno-15-27></a><a href=#__codelineno-15-27><span class=linenos data-linenos="27 "></span></a>        
</span><span id=__span-15-28><a id=__codelineno-15-28 name=__codelineno-15-28></a><a href=#__codelineno-15-28><span class=linenos data-linenos="28 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>cycle_contexts</span><span class=p>[</span><span class=n>cycle_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>context</span>
</span><span id=__span-15-29><a id=__codelineno-15-29 name=__codelineno-15-29></a><a href=#__codelineno-15-29><span class=linenos data-linenos="29 "></span></a>        <span class=k>return</span> <span class=n>context</span>
</span><span id=__span-15-30><a id=__codelineno-15-30 name=__codelineno-15-30></a><a href=#__codelineno-15-30><span class=linenos data-linenos="30 "></span></a>        
</span><span id=__span-15-31><a id=__codelineno-15-31 name=__codelineno-15-31></a><a href=#__codelineno-15-31><span class=linenos data-linenos="31 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>optimize_parallel_contexts</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-15-32><a id=__codelineno-15-32 name=__codelineno-15-32></a><a href=#__codelineno-15-32><span class=linenos data-linenos="32 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Optimize context distribution across cycles&quot;&quot;&quot;</span>
</span><span id=__span-15-33><a id=__codelineno-15-33 name=__codelineno-15-33></a><a href=#__codelineno-15-33><span class=linenos data-linenos="33 "></span></a>        <span class=n>total_token_usage</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span>
</span><span id=__span-15-34><a id=__codelineno-15-34 name=__codelineno-15-34></a><a href=#__codelineno-15-34><span class=linenos data-linenos="34 "></span></a>            <span class=n>ctx</span><span class=o>.</span><span class=n>get_token_usage</span><span class=p>()</span> <span class=k>for</span> <span class=n>ctx</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cycle_contexts</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
</span><span id=__span-15-35><a id=__codelineno-15-35 name=__codelineno-15-35></a><a href=#__codelineno-15-35><span class=linenos data-linenos="35 "></span></a>        <span class=p>)</span>
</span><span id=__span-15-36><a id=__codelineno-15-36 name=__codelineno-15-36></a><a href=#__codelineno-15-36><span class=linenos data-linenos="36 "></span></a>        
</span><span id=__span-15-37><a id=__codelineno-15-37 name=__codelineno-15-37></a><a href=#__codelineno-15-37><span class=linenos data-linenos="37 "></span></a>        <span class=k>if</span> <span class=n>total_token_usage</span> <span class=o>&gt;</span> <span class=n>TOKEN_LIMIT</span> <span class=o>*</span> <span class=mf>0.9</span><span class=p>:</span>
</span><span id=__span-15-38><a id=__codelineno-15-38 name=__codelineno-15-38></a><a href=#__codelineno-15-38><span class=linenos data-linenos="38 "></span></a>            <span class=c1># Need to optimize</span>
</span><span id=__span-15-39><a id=__codelineno-15-39 name=__codelineno-15-39></a><a href=#__codelineno-15-39><span class=linenos data-linenos="39 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>compress_contexts</span><span class=p>()</span>
</span><span id=__span-15-40><a id=__codelineno-15-40 name=__codelineno-15-40></a><a href=#__codelineno-15-40><span class=linenos data-linenos="40 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>redistribute_tokens</span><span class=p>()</span>
</span><span id=__span-15-41><a id=__codelineno-15-41 name=__codelineno-15-41></a><a href=#__codelineno-15-41><span class=linenos data-linenos="41 "></span></a>            
</span><span id=__span-15-42><a id=__codelineno-15-42 name=__codelineno-15-42></a><a href=#__codelineno-15-42><span class=linenos data-linenos="42 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>merge_cycle_knowledge</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-15-43><a id=__codelineno-15-43 name=__codelineno-15-43></a><a href=#__codelineno-15-43><span class=linenos data-linenos="43 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Merge cycle&#39;s learned knowledge back to shared&quot;&quot;&quot;</span>
</span><span id=__span-15-44><a id=__codelineno-15-44 name=__codelineno-15-44></a><a href=#__codelineno-15-44><span class=linenos data-linenos="44 "></span></a>        <span class=n>context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>cycle_contexts</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>cycle_id</span><span class=p>)</span>
</span><span id=__span-15-45><a id=__codelineno-15-45 name=__codelineno-15-45></a><a href=#__codelineno-15-45><span class=linenos data-linenos="45 "></span></a>        <span class=k>if</span> <span class=n>context</span><span class=p>:</span>
</span><span id=__span-15-46><a id=__codelineno-15-46 name=__codelineno-15-46></a><a href=#__codelineno-15-46><span class=linenos data-linenos="46 "></span></a>            <span class=n>knowledge_updates</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get_knowledge_updates</span><span class=p>()</span>
</span><span id=__span-15-47><a id=__codelineno-15-47 name=__codelineno-15-47></a><a href=#__codelineno-15-47><span class=linenos data-linenos="47 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>shared_knowledge</span><span class=o>.</span><span class=n>merge_updates</span><span class=p>(</span><span class=n>knowledge_updates</span><span class=p>)</span>
</span><span id=__span-15-48><a id=__codelineno-15-48 name=__codelineno-15-48></a><a href=#__codelineno-15-48><span class=linenos data-linenos="48 "></span></a>            
</span><span id=__span-15-49><a id=__codelineno-15-49 name=__codelineno-15-49></a><a href=#__codelineno-15-49><span class=linenos data-linenos="49 "></span></a><span class=k>class</span> <span class=nc>ParallelTokenAllocator</span><span class=p>:</span>
</span><span id=__span-15-50><a id=__codelineno-15-50 name=__codelineno-15-50></a><a href=#__codelineno-15-50><span class=linenos data-linenos="50 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>total_budget</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>200000</span><span class=p>):</span>
</span><span id=__span-15-51><a id=__codelineno-15-51 name=__codelineno-15-51></a><a href=#__codelineno-15-51><span class=linenos data-linenos="51 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>total_budget</span> <span class=o>=</span> <span class=n>total_budget</span>
</span><span id=__span-15-52><a id=__codelineno-15-52 name=__codelineno-15-52></a><a href=#__codelineno-15-52><span class=linenos data-linenos="52 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>reserved_budget</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>total_budget</span> <span class=o>*</span> <span class=mf>0.1</span><span class=p>)</span>  <span class=c1># 10% reserve</span>
</span><span id=__span-15-53><a id=__codelineno-15-53 name=__codelineno-15-53></a><a href=#__codelineno-15-53><span class=linenos data-linenos="53 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>available_budget</span> <span class=o>=</span> <span class=n>total_budget</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>reserved_budget</span>
</span><span id=__span-15-54><a id=__codelineno-15-54 name=__codelineno-15-54></a><a href=#__codelineno-15-54><span class=linenos data-linenos="54 "></span></a>        
</span><span id=__span-15-55><a id=__codelineno-15-55 name=__codelineno-15-55></a><a href=#__codelineno-15-55><span class=linenos data-linenos="55 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>allocate_for_cycle</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cycle_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>active_cycles</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span><span id=__span-15-56><a id=__codelineno-15-56 name=__codelineno-15-56></a><a href=#__codelineno-15-56><span class=linenos data-linenos="56 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Allocate tokens for a new cycle&quot;&quot;&quot;</span>
</span><span id=__span-15-57><a id=__codelineno-15-57 name=__codelineno-15-57></a><a href=#__codelineno-15-57><span class=linenos data-linenos="57 "></span></a>        <span class=c1># Base allocation</span>
</span><span id=__span-15-58><a id=__codelineno-15-58 name=__codelineno-15-58></a><a href=#__codelineno-15-58><span class=linenos data-linenos="58 "></span></a>        <span class=n>base_allocation</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>available_budget</span> <span class=o>//</span> <span class=p>(</span><span class=n>active_cycles</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
</span><span id=__span-15-59><a id=__codelineno-15-59 name=__codelineno-15-59></a><a href=#__codelineno-15-59><span class=linenos data-linenos="59 "></span></a>        
</span><span id=__span-15-60><a id=__codelineno-15-60 name=__codelineno-15-60></a><a href=#__codelineno-15-60><span class=linenos data-linenos="60 "></span></a>        <span class=c1># Adjust based on cycle phase</span>
</span><span id=__span-15-61><a id=__codelineno-15-61 name=__codelineno-15-61></a><a href=#__codelineno-15-61><span class=linenos data-linenos="61 "></span></a>        <span class=n>phase_multipliers</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-15-62><a id=__codelineno-15-62 name=__codelineno-15-62></a><a href=#__codelineno-15-62><span class=linenos data-linenos="62 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>DESIGN</span><span class=p>:</span> <span class=mf>1.2</span><span class=p>,</span>      <span class=c1># More context needed</span>
</span><span id=__span-15-63><a id=__codelineno-15-63 name=__codelineno-15-63></a><a href=#__codelineno-15-63><span class=linenos data-linenos="63 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>TEST_RED</span><span class=p>:</span> <span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-15-64><a id=__codelineno-15-64 name=__codelineno-15-64></a><a href=#__codelineno-15-64><span class=linenos data-linenos="64 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>CODE_GREEN</span><span class=p>:</span> <span class=mf>1.1</span><span class=p>,</span>
</span><span id=__span-15-65><a id=__codelineno-15-65 name=__codelineno-15-65></a><a href=#__codelineno-15-65><span class=linenos data-linenos="65 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>REFACTOR</span><span class=p>:</span> <span class=mf>0.9</span><span class=p>,</span>
</span><span id=__span-15-66><a id=__codelineno-15-66 name=__codelineno-15-66></a><a href=#__codelineno-15-66><span class=linenos data-linenos="66 "></span></a>            <span class=n>TDDState</span><span class=o>.</span><span class=n>COMMIT</span><span class=p>:</span> <span class=mf>0.8</span>
</span><span id=__span-15-67><a id=__codelineno-15-67 name=__codelineno-15-67></a><a href=#__codelineno-15-67><span class=linenos data-linenos="67 "></span></a>        <span class=p>}</span>
</span><span id=__span-15-68><a id=__codelineno-15-68 name=__codelineno-15-68></a><a href=#__codelineno-15-68><span class=linenos data-linenos="68 "></span></a>        
</span><span id=__span-15-69><a id=__codelineno-15-69 name=__codelineno-15-69></a><a href=#__codelineno-15-69><span class=linenos data-linenos="69 "></span></a>        <span class=c1># Get cycle phase (default to DESIGN for new cycles)</span>
</span><span id=__span-15-70><a id=__codelineno-15-70 name=__codelineno-15-70></a><a href=#__codelineno-15-70><span class=linenos data-linenos="70 "></span></a>        <span class=n>phase</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_cycle_phase</span><span class=p>(</span><span class=n>cycle_id</span><span class=p>)</span>
</span><span id=__span-15-71><a id=__codelineno-15-71 name=__codelineno-15-71></a><a href=#__codelineno-15-71><span class=linenos data-linenos="71 "></span></a>        <span class=n>multiplier</span> <span class=o>=</span> <span class=n>phase_multipliers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>phase</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>)</span>
</span><span id=__span-15-72><a id=__codelineno-15-72 name=__codelineno-15-72></a><a href=#__codelineno-15-72><span class=linenos data-linenos="72 "></span></a>        
</span><span id=__span-15-73><a id=__codelineno-15-73 name=__codelineno-15-73></a><a href=#__codelineno-15-73><span class=linenos data-linenos="73 "></span></a>        <span class=k>return</span> <span class=nb>int</span><span class=p>(</span><span class=n>base_allocation</span> <span class=o>*</span> <span class=n>multiplier</span><span class=p>)</span>
</span></code></pre></div><h4 id=day-3-4-performance-optimization>Day 3-4: Performance Optimization<a class=headerlink href=#day-3-4-performance-optimization title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1></a><a href=#__codelineno-16-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/performance_optimizer.py</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2></a><a href=#__codelineno-16-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>ParallelPerformanceOptimizer</span><span class=p>:</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3></a><a href=#__codelineno-16-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4></a><a href=#__codelineno-16-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>metrics_collector</span> <span class=o>=</span> <span class=n>MetricsCollector</span><span class=p>()</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5></a><a href=#__codelineno-16-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>bottleneck_analyzer</span> <span class=o>=</span> <span class=n>BottleneckAnalyzer</span><span class=p>()</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6></a><a href=#__codelineno-16-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>optimization_strategies</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7></a><a href=#__codelineno-16-7><span class=linenos data-linenos=" 7 "></span></a>            <span class=n>Bottleneck</span><span class=o>.</span><span class=n>AGENT_POOL</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>optimize_agent_pool</span><span class=p>,</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8></a><a href=#__codelineno-16-8><span class=linenos data-linenos=" 8 "></span></a>            <span class=n>Bottleneck</span><span class=o>.</span><span class=n>FILE_LOCKS</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>optimize_file_locks</span><span class=p>,</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9></a><a href=#__codelineno-16-9><span class=linenos data-linenos=" 9 "></span></a>            <span class=n>Bottleneck</span><span class=o>.</span><span class=n>CONTEXT_PREP</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>optimize_context_prep</span><span class=p>,</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10></a><a href=#__codelineno-16-10><span class=linenos data-linenos="10 "></span></a>            <span class=n>Bottleneck</span><span class=o>.</span><span class=n>TEST_EXECUTION</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>optimize_test_execution</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11></a><a href=#__codelineno-16-11><span class=linenos data-linenos="11 "></span></a>        <span class=p>}</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12></a><a href=#__codelineno-16-12><span class=linenos data-linenos="12 "></span></a>        
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13></a><a href=#__codelineno-16-13><span class=linenos data-linenos="13 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>analyze_and_optimize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>OptimizationResult</span><span class=p>:</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14></a><a href=#__codelineno-16-14><span class=linenos data-linenos="14 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Analyze performance and apply optimizations&quot;&quot;&quot;</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15></a><a href=#__codelineno-16-15><span class=linenos data-linenos="15 "></span></a>        <span class=n>metrics</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>metrics_collector</span><span class=o>.</span><span class=n>collect_current_metrics</span><span class=p>()</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16></a><a href=#__codelineno-16-16><span class=linenos data-linenos="16 "></span></a>        <span class=n>bottlenecks</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>bottleneck_analyzer</span><span class=o>.</span><span class=n>identify_bottlenecks</span><span class=p>(</span><span class=n>metrics</span><span class=p>)</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17></a><a href=#__codelineno-16-17><span class=linenos data-linenos="17 "></span></a>        
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18></a><a href=#__codelineno-16-18><span class=linenos data-linenos="18 "></span></a>        <span class=n>optimizations_applied</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19></a><a href=#__codelineno-16-19><span class=linenos data-linenos="19 "></span></a>        <span class=k>for</span> <span class=n>bottleneck</span> <span class=ow>in</span> <span class=n>bottlenecks</span><span class=p>:</span>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20></a><a href=#__codelineno-16-20><span class=linenos data-linenos="20 "></span></a>            <span class=n>strategy</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>optimization_strategies</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>bottleneck</span><span class=o>.</span><span class=n>type</span><span class=p>)</span>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21></a><a href=#__codelineno-16-21><span class=linenos data-linenos="21 "></span></a>            <span class=k>if</span> <span class=n>strategy</span><span class=p>:</span>
</span><span id=__span-16-22><a id=__codelineno-16-22 name=__codelineno-16-22></a><a href=#__codelineno-16-22><span class=linenos data-linenos="22 "></span></a>                <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>strategy</span><span class=p>(</span><span class=n>bottleneck</span><span class=p>)</span>
</span><span id=__span-16-23><a id=__codelineno-16-23 name=__codelineno-16-23></a><a href=#__codelineno-16-23><span class=linenos data-linenos="23 "></span></a>                <span class=n>optimizations_applied</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span><span id=__span-16-24><a id=__codelineno-16-24 name=__codelineno-16-24></a><a href=#__codelineno-16-24><span class=linenos data-linenos="24 "></span></a>                
</span><span id=__span-16-25><a id=__codelineno-16-25 name=__codelineno-16-25></a><a href=#__codelineno-16-25><span class=linenos data-linenos="25 "></span></a>        <span class=k>return</span> <span class=n>OptimizationResult</span><span class=p>(</span>
</span><span id=__span-16-26><a id=__codelineno-16-26 name=__codelineno-16-26></a><a href=#__codelineno-16-26><span class=linenos data-linenos="26 "></span></a>            <span class=n>bottlenecks_found</span><span class=o>=</span><span class=n>bottlenecks</span><span class=p>,</span>
</span><span id=__span-16-27><a id=__codelineno-16-27 name=__codelineno-16-27></a><a href=#__codelineno-16-27><span class=linenos data-linenos="27 "></span></a>            <span class=n>optimizations_applied</span><span class=o>=</span><span class=n>optimizations_applied</span><span class=p>,</span>
</span><span id=__span-16-28><a id=__codelineno-16-28 name=__codelineno-16-28></a><a href=#__codelineno-16-28><span class=linenos data-linenos="28 "></span></a>            <span class=n>performance_improvement</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>calculate_improvement</span><span class=p>(</span><span class=n>metrics</span><span class=p>)</span>
</span><span id=__span-16-29><a id=__codelineno-16-29 name=__codelineno-16-29></a><a href=#__codelineno-16-29><span class=linenos data-linenos="29 "></span></a>        <span class=p>)</span>
</span><span id=__span-16-30><a id=__codelineno-16-30 name=__codelineno-16-30></a><a href=#__codelineno-16-30><span class=linenos data-linenos="30 "></span></a>        
</span><span id=__span-16-31><a id=__codelineno-16-31 name=__codelineno-16-31></a><a href=#__codelineno-16-31><span class=linenos data-linenos="31 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>optimize_agent_pool</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>bottleneck</span><span class=p>:</span> <span class=n>Bottleneck</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>OptimizationAction</span><span class=p>:</span>
</span><span id=__span-16-32><a id=__codelineno-16-32 name=__codelineno-16-32></a><a href=#__codelineno-16-32><span class=linenos data-linenos="32 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Optimize agent pool configuration&quot;&quot;&quot;</span>
</span><span id=__span-16-33><a id=__codelineno-16-33 name=__codelineno-16-33></a><a href=#__codelineno-16-33><span class=linenos data-linenos="33 "></span></a>        <span class=n>pool_type</span> <span class=o>=</span> <span class=n>bottleneck</span><span class=o>.</span><span class=n>resource</span>
</span><span id=__span-16-34><a id=__codelineno-16-34 name=__codelineno-16-34></a><a href=#__codelineno-16-34><span class=linenos data-linenos="34 "></span></a>        <span class=n>current_size</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_pool_size</span><span class=p>(</span><span class=n>pool_type</span><span class=p>)</span>
</span><span id=__span-16-35><a id=__codelineno-16-35 name=__codelineno-16-35></a><a href=#__codelineno-16-35><span class=linenos data-linenos="35 "></span></a>        <span class=n>wait_times</span> <span class=o>=</span> <span class=n>bottleneck</span><span class=o>.</span><span class=n>metrics</span><span class=p>[</span><span class=s1>&#39;average_wait_time&#39;</span><span class=p>]</span>
</span><span id=__span-16-36><a id=__codelineno-16-36 name=__codelineno-16-36></a><a href=#__codelineno-16-36><span class=linenos data-linenos="36 "></span></a>        
</span><span id=__span-16-37><a id=__codelineno-16-37 name=__codelineno-16-37></a><a href=#__codelineno-16-37><span class=linenos data-linenos="37 "></span></a>        <span class=k>if</span> <span class=n>wait_times</span> <span class=o>&gt;</span> <span class=mf>10.0</span><span class=p>:</span>  <span class=c1># 10 second threshold</span>
</span><span id=__span-16-38><a id=__codelineno-16-38 name=__codelineno-16-38></a><a href=#__codelineno-16-38><span class=linenos data-linenos="38 "></span></a>            <span class=c1># Increase pool size</span>
</span><span id=__span-16-39><a id=__codelineno-16-39 name=__codelineno-16-39></a><a href=#__codelineno-16-39><span class=linenos data-linenos="39 "></span></a>            <span class=n>new_size</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>current_size</span> <span class=o>+</span> <span class=mi>2</span><span class=p>,</span> <span class=n>MAX_POOL_SIZE</span><span class=p>)</span>
</span><span id=__span-16-40><a id=__codelineno-16-40 name=__codelineno-16-40></a><a href=#__codelineno-16-40><span class=linenos data-linenos="40 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>resize_pool</span><span class=p>(</span><span class=n>pool_type</span><span class=p>,</span> <span class=n>new_size</span><span class=p>)</span>
</span><span id=__span-16-41><a id=__codelineno-16-41 name=__codelineno-16-41></a><a href=#__codelineno-16-41><span class=linenos data-linenos="41 "></span></a>            
</span><span id=__span-16-42><a id=__codelineno-16-42 name=__codelineno-16-42></a><a href=#__codelineno-16-42><span class=linenos data-linenos="42 "></span></a>            <span class=k>return</span> <span class=n>OptimizationAction</span><span class=p>(</span>
</span><span id=__span-16-43><a id=__codelineno-16-43 name=__codelineno-16-43></a><a href=#__codelineno-16-43><span class=linenos data-linenos="43 "></span></a>                <span class=nb>type</span><span class=o>=</span><span class=s2>&quot;resize_pool&quot;</span><span class=p>,</span>
</span><span id=__span-16-44><a id=__codelineno-16-44 name=__codelineno-16-44></a><a href=#__codelineno-16-44><span class=linenos data-linenos="44 "></span></a>                <span class=n>details</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;Increased </span><span class=si>{</span><span class=n>pool_type</span><span class=si>}</span><span class=s2> pool from </span><span class=si>{</span><span class=n>current_size</span><span class=si>}</span><span class=s2> to </span><span class=si>{</span><span class=n>new_size</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-16-45><a id=__codelineno-16-45 name=__codelineno-16-45></a><a href=#__codelineno-16-45><span class=linenos data-linenos="45 "></span></a>            <span class=p>)</span>
</span></code></pre></div><h4 id=day-5-phase-3-integration>Day 5: Phase 3 Integration<a class=headerlink href=#day-5-phase-3-integration title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1></a><a href=#__codelineno-17-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/phase3_orchestrator.py</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2></a><a href=#__codelineno-17-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>Phase3ParallelOrchestrator</span><span class=p>(</span><span class=n>Phase2ParallelOrchestrator</span><span class=p>):</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3></a><a href=#__codelineno-17-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4></a><a href=#__codelineno-17-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5></a><a href=#__codelineno-17-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>max_parallel</span> <span class=o>=</span> <span class=mi>5</span>  <span class=c1># Increase to 5</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6></a><a href=#__codelineno-17-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>ml_predictor</span> <span class=o>=</span> <span class=n>MLConflictPredictor</span><span class=p>()</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7></a><a href=#__codelineno-17-7><span class=linenos data-linenos=" 7 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>occ_controller</span> <span class=o>=</span> <span class=n>OptimisticConcurrencyController</span><span class=p>()</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8></a><a href=#__codelineno-17-8><span class=linenos data-linenos=" 8 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>parallel_context</span> <span class=o>=</span> <span class=n>ParallelContextManager</span><span class=p>()</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9></a><a href=#__codelineno-17-9><span class=linenos data-linenos=" 9 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>performance_optimizer</span> <span class=o>=</span> <span class=n>ParallelPerformanceOptimizer</span><span class=p>()</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10></a><a href=#__codelineno-17-10><span class=linenos data-linenos="10 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>advanced_scheduler</span> <span class=o>=</span> <span class=n>AdvancedParallelScheduler</span><span class=p>()</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11></a><a href=#__codelineno-17-11><span class=linenos data-linenos="11 "></span></a>        
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12></a><a href=#__codelineno-17-12><span class=linenos data-linenos="12 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>execute_stories_intelligent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>stories</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Story</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>ExecutionResult</span><span class=p>:</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13></a><a href=#__codelineno-17-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Execute stories with ML-based optimization&quot;&quot;&quot;</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14></a><a href=#__codelineno-17-14><span class=linenos data-linenos="14 "></span></a>        <span class=c1># Create optimal schedule</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15></a><a href=#__codelineno-17-15><span class=linenos data-linenos="15 "></span></a>        <span class=n>schedule</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>advanced_scheduler</span><span class=o>.</span><span class=n>optimize_schedule</span><span class=p>(</span><span class=n>stories</span><span class=p>)</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16></a><a href=#__codelineno-17-16><span class=linenos data-linenos="16 "></span></a>        
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17></a><a href=#__codelineno-17-17><span class=linenos data-linenos="17 "></span></a>        <span class=n>results</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-17-18><a id=__codelineno-17-18 name=__codelineno-17-18></a><a href=#__codelineno-17-18><span class=linenos data-linenos="18 "></span></a>        <span class=k>for</span> <span class=n>time_slot</span> <span class=ow>in</span> <span class=n>schedule</span><span class=o>.</span><span class=n>slots</span><span class=p>:</span>
</span><span id=__span-17-19><a id=__codelineno-17-19 name=__codelineno-17-19></a><a href=#__codelineno-17-19><span class=linenos data-linenos="19 "></span></a>            <span class=c1># Execute slot stories in parallel</span>
</span><span id=__span-17-20><a id=__codelineno-17-20 name=__codelineno-17-20></a><a href=#__codelineno-17-20><span class=linenos data-linenos="20 "></span></a>            <span class=n>slot_tasks</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-17-21><a id=__codelineno-17-21 name=__codelineno-17-21></a><a href=#__codelineno-17-21><span class=linenos data-linenos="21 "></span></a>            
</span><span id=__span-17-22><a id=__codelineno-17-22 name=__codelineno-17-22></a><a href=#__codelineno-17-22><span class=linenos data-linenos="22 "></span></a>            <span class=k>for</span> <span class=n>story</span> <span class=ow>in</span> <span class=n>time_slot</span><span class=o>.</span><span class=n>stories</span><span class=p>:</span>
</span><span id=__span-17-23><a id=__codelineno-17-23 name=__codelineno-17-23></a><a href=#__codelineno-17-23><span class=linenos data-linenos="23 "></span></a>                <span class=c1># Create optimistic transaction</span>
</span><span id=__span-17-24><a id=__codelineno-17-24 name=__codelineno-17-24></a><a href=#__codelineno-17-24><span class=linenos data-linenos="24 "></span></a>                <span class=n>transaction</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>occ_controller</span><span class=o>.</span><span class=n>start_transaction</span><span class=p>(</span>
</span><span id=__span-17-25><a id=__codelineno-17-25 name=__codelineno-17-25></a><a href=#__codelineno-17-25><span class=linenos data-linenos="25 "></span></a>                    <span class=n>story</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> 
</span><span id=__span-17-26><a id=__codelineno-17-26 name=__codelineno-17-26></a><a href=#__codelineno-17-26><span class=linenos data-linenos="26 "></span></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>analyze_affected_files</span><span class=p>(</span><span class=n>story</span><span class=p>)</span>
</span><span id=__span-17-27><a id=__codelineno-17-27 name=__codelineno-17-27></a><a href=#__codelineno-17-27><span class=linenos data-linenos="27 "></span></a>                <span class=p>)</span>
</span><span id=__span-17-28><a id=__codelineno-17-28 name=__codelineno-17-28></a><a href=#__codelineno-17-28><span class=linenos data-linenos="28 "></span></a>                
</span><span id=__span-17-29><a id=__codelineno-17-29 name=__codelineno-17-29></a><a href=#__codelineno-17-29><span class=linenos data-linenos="29 "></span></a>                <span class=c1># Create isolated context</span>
</span><span id=__span-17-30><a id=__codelineno-17-30 name=__codelineno-17-30></a><a href=#__codelineno-17-30><span class=linenos data-linenos="30 "></span></a>                <span class=n>context</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>parallel_context</span><span class=o>.</span><span class=n>create_cycle_context</span><span class=p>(</span>
</span><span id=__span-17-31><a id=__codelineno-17-31 name=__codelineno-17-31></a><a href=#__codelineno-17-31><span class=linenos data-linenos="31 "></span></a>                    <span class=n>story</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>story</span>
</span><span id=__span-17-32><a id=__codelineno-17-32 name=__codelineno-17-32></a><a href=#__codelineno-17-32><span class=linenos data-linenos="32 "></span></a>                <span class=p>)</span>
</span><span id=__span-17-33><a id=__codelineno-17-33 name=__codelineno-17-33></a><a href=#__codelineno-17-33><span class=linenos data-linenos="33 "></span></a>                
</span><span id=__span-17-34><a id=__codelineno-17-34 name=__codelineno-17-34></a><a href=#__codelineno-17-34><span class=linenos data-linenos="34 "></span></a>                <span class=c1># Execute with optimistic concurrency</span>
</span><span id=__span-17-35><a id=__codelineno-17-35 name=__codelineno-17-35></a><a href=#__codelineno-17-35><span class=linenos data-linenos="35 "></span></a>                <span class=n>task</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span>
</span><span id=__span-17-36><a id=__codelineno-17-36 name=__codelineno-17-36></a><a href=#__codelineno-17-36><span class=linenos data-linenos="36 "></span></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>execute_story_optimistic</span><span class=p>(</span><span class=n>story</span><span class=p>,</span> <span class=n>transaction</span><span class=p>,</span> <span class=n>context</span><span class=p>)</span>
</span><span id=__span-17-37><a id=__codelineno-17-37 name=__codelineno-17-37></a><a href=#__codelineno-17-37><span class=linenos data-linenos="37 "></span></a>                <span class=p>)</span>
</span><span id=__span-17-38><a id=__codelineno-17-38 name=__codelineno-17-38></a><a href=#__codelineno-17-38><span class=linenos data-linenos="38 "></span></a>                <span class=n>slot_tasks</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>task</span><span class=p>)</span>
</span><span id=__span-17-39><a id=__codelineno-17-39 name=__codelineno-17-39></a><a href=#__codelineno-17-39><span class=linenos data-linenos="39 "></span></a>                
</span><span id=__span-17-40><a id=__codelineno-17-40 name=__codelineno-17-40></a><a href=#__codelineno-17-40><span class=linenos data-linenos="40 "></span></a>            <span class=c1># Wait for slot completion</span>
</span><span id=__span-17-41><a id=__codelineno-17-41 name=__codelineno-17-41></a><a href=#__codelineno-17-41><span class=linenos data-linenos="41 "></span></a>            <span class=n>slot_results</span> <span class=o>=</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>gather</span><span class=p>(</span><span class=o>*</span><span class=n>slot_tasks</span><span class=p>)</span>
</span><span id=__span-17-42><a id=__codelineno-17-42 name=__codelineno-17-42></a><a href=#__codelineno-17-42><span class=linenos data-linenos="42 "></span></a>            <span class=n>results</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>slot_results</span><span class=p>)</span>
</span><span id=__span-17-43><a id=__codelineno-17-43 name=__codelineno-17-43></a><a href=#__codelineno-17-43><span class=linenos data-linenos="43 "></span></a>            
</span><span id=__span-17-44><a id=__codelineno-17-44 name=__codelineno-17-44></a><a href=#__codelineno-17-44><span class=linenos data-linenos="44 "></span></a>            <span class=c1># Optimize after each slot</span>
</span><span id=__span-17-45><a id=__codelineno-17-45 name=__codelineno-17-45></a><a href=#__codelineno-17-45><span class=linenos data-linenos="45 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>performance_optimizer</span><span class=o>.</span><span class=n>analyze_and_optimize</span><span class=p>()</span>
</span><span id=__span-17-46><a id=__codelineno-17-46 name=__codelineno-17-46></a><a href=#__codelineno-17-46><span class=linenos data-linenos="46 "></span></a>            
</span><span id=__span-17-47><a id=__codelineno-17-47 name=__codelineno-17-47></a><a href=#__codelineno-17-47><span class=linenos data-linenos="47 "></span></a>        <span class=k>return</span> <span class=n>ExecutionResult</span><span class=p>(</span><span class=n>stories</span><span class=o>=</span><span class=n>results</span><span class=p>)</span>
</span></code></pre></div><h3 id=deliverables_2>Deliverables<a class=headerlink href=#deliverables_2 title="Permanent link">&para;</a></h3><ol><li>ML-based conflict prediction system</li><li>Optimistic concurrency control</li><li>5+ parallel cycles support</li><li>Parallel-aware context management</li><li>Performance optimization system</li></ol><h2 id=phase-4-production-optimization-weeks-7-8>Phase 4: Production Optimization (Weeks 7-8)<a class=headerlink href=#phase-4-production-optimization-weeks-7-8 title="Permanent link">&para;</a></h2><h3 id=goals_3>Goals<a class=headerlink href=#goals_3 title="Permanent link">&para;</a></h3><ul><li>Fine-tune for production performance</li><li>Add comprehensive monitoring</li><li>Enable cross-project coordination</li><li>Implement self-tuning capabilities</li></ul><h3 id=week-7-production-hardening>Week 7: Production Hardening<a class=headerlink href=#week-7-production-hardening title="Permanent link">&para;</a></h3><h4 id=day-1-2-advanced-monitoring>Day 1-2: Advanced Monitoring<a class=headerlink href=#day-1-2-advanced-monitoring title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1></a><a href=#__codelineno-18-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/production_monitor.py</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2></a><a href=#__codelineno-18-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>ProductionMonitor</span><span class=p>:</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3></a><a href=#__codelineno-18-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4></a><a href=#__codelineno-18-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>metrics_store</span> <span class=o>=</span> <span class=n>TimeSeriesMetricsStore</span><span class=p>()</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5></a><a href=#__codelineno-18-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>alert_manager</span> <span class=o>=</span> <span class=n>AlertManager</span><span class=p>()</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6></a><a href=#__codelineno-18-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>dashboard</span> <span class=o>=</span> <span class=n>RealTimeDashboard</span><span class=p>()</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7></a><a href=#__codelineno-18-7><span class=linenos data-linenos=" 7 "></span></a>        
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8></a><a href=#__codelineno-18-8><span class=linenos data-linenos=" 8 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>collect_comprehensive_metrics</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9></a><a href=#__codelineno-18-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect all production metrics&quot;&quot;&quot;</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10></a><a href=#__codelineno-18-10><span class=linenos data-linenos="10 "></span></a>        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11></a><a href=#__codelineno-18-11><span class=linenos data-linenos="11 "></span></a>            <span class=n>metrics</span> <span class=o>=</span> <span class=n>ParallelProductionMetrics</span><span class=p>(</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12></a><a href=#__codelineno-18-12><span class=linenos data-linenos="12 "></span></a>                <span class=n>timestamp</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(),</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13></a><a href=#__codelineno-18-13><span class=linenos data-linenos="13 "></span></a>                
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14></a><a href=#__codelineno-18-14><span class=linenos data-linenos="14 "></span></a>                <span class=c1># Throughput metrics</span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15></a><a href=#__codelineno-18-15><span class=linenos data-linenos="15 "></span></a>                <span class=n>cycles_per_hour</span><span class=o>=</span><span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>calculate_throughput</span><span class=p>(),</span>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16></a><a href=#__codelineno-18-16><span class=linenos data-linenos="16 "></span></a>                <span class=n>stories_completed</span><span class=o>=</span><span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>count_completed_stories</span><span class=p>(),</span>
</span><span id=__span-18-17><a id=__codelineno-18-17 name=__codelineno-18-17></a><a href=#__codelineno-18-17><span class=linenos data-linenos="17 "></span></a>                <span class=n>average_cycle_time</span><span class=o>=</span><span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>calculate_avg_cycle_time</span><span class=p>(),</span>
</span><span id=__span-18-18><a id=__codelineno-18-18 name=__codelineno-18-18></a><a href=#__codelineno-18-18><span class=linenos data-linenos="18 "></span></a>                
</span><span id=__span-18-19><a id=__codelineno-18-19 name=__codelineno-18-19></a><a href=#__codelineno-18-19><span class=linenos data-linenos="19 "></span></a>                <span class=c1># Resource metrics</span>
</span><span id=__span-18-20><a id=__codelineno-18-20 name=__codelineno-18-20></a><a href=#__codelineno-18-20><span class=linenos data-linenos="20 "></span></a>                <span class=n>cpu_usage</span><span class=o>=</span><span class=n>psutil</span><span class=o>.</span><span class=n>cpu_percent</span><span class=p>(),</span>
</span><span id=__span-18-21><a id=__codelineno-18-21 name=__codelineno-18-21></a><a href=#__codelineno-18-21><span class=linenos data-linenos="21 "></span></a>                <span class=n>memory_usage</span><span class=o>=</span><span class=n>psutil</span><span class=o>.</span><span class=n>virtual_memory</span><span class=p>()</span><span class=o>.</span><span class=n>percent</span><span class=p>,</span>
</span><span id=__span-18-22><a id=__codelineno-18-22 name=__codelineno-18-22></a><a href=#__codelineno-18-22><span class=linenos data-linenos="22 "></span></a>                <span class=n>agent_utilization</span><span class=o>=</span><span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>calculate_agent_utilization</span><span class=p>(),</span>
</span><span id=__span-18-23><a id=__codelineno-18-23 name=__codelineno-18-23></a><a href=#__codelineno-18-23><span class=linenos data-linenos="23 "></span></a>                
</span><span id=__span-18-24><a id=__codelineno-18-24 name=__codelineno-18-24></a><a href=#__codelineno-18-24><span class=linenos data-linenos="24 "></span></a>                <span class=c1># Quality metrics</span>
</span><span id=__span-18-25><a id=__codelineno-18-25 name=__codelineno-18-25></a><a href=#__codelineno-18-25><span class=linenos data-linenos="25 "></span></a>                <span class=n>test_pass_rate</span><span class=o>=</span><span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>calculate_test_pass_rate</span><span class=p>(),</span>
</span><span id=__span-18-26><a id=__codelineno-18-26 name=__codelineno-18-26></a><a href=#__codelineno-18-26><span class=linenos data-linenos="26 "></span></a>                <span class=n>conflict_rate</span><span class=o>=</span><span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>calculate_conflict_rate</span><span class=p>(),</span>
</span><span id=__span-18-27><a id=__codelineno-18-27 name=__codelineno-18-27></a><a href=#__codelineno-18-27><span class=linenos data-linenos="27 "></span></a>                <span class=n>auto_merge_success_rate</span><span class=o>=</span><span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>calculate_merge_rate</span><span class=p>(),</span>
</span><span id=__span-18-28><a id=__codelineno-18-28 name=__codelineno-18-28></a><a href=#__codelineno-18-28><span class=linenos data-linenos="28 "></span></a>                
</span><span id=__span-18-29><a id=__codelineno-18-29 name=__codelineno-18-29></a><a href=#__codelineno-18-29><span class=linenos data-linenos="29 "></span></a>                <span class=c1># Cost metrics</span>
</span><span id=__span-18-30><a id=__codelineno-18-30 name=__codelineno-18-30></a><a href=#__codelineno-18-30><span class=linenos data-linenos="30 "></span></a>                <span class=n>token_usage</span><span class=o>=</span><span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>calculate_token_usage</span><span class=p>(),</span>
</span><span id=__span-18-31><a id=__codelineno-18-31 name=__codelineno-18-31></a><a href=#__codelineno-18-31><span class=linenos data-linenos="31 "></span></a>                <span class=n>compute_cost</span><span class=o>=</span><span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>estimate_compute_cost</span><span class=p>()</span>
</span><span id=__span-18-32><a id=__codelineno-18-32 name=__codelineno-18-32></a><a href=#__codelineno-18-32><span class=linenos data-linenos="32 "></span></a>            <span class=p>)</span>
</span><span id=__span-18-33><a id=__codelineno-18-33 name=__codelineno-18-33></a><a href=#__codelineno-18-33><span class=linenos data-linenos="33 "></span></a>            
</span><span id=__span-18-34><a id=__codelineno-18-34 name=__codelineno-18-34></a><a href=#__codelineno-18-34><span class=linenos data-linenos="34 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>metrics_store</span><span class=o>.</span><span class=n>store</span><span class=p>(</span><span class=n>metrics</span><span class=p>)</span>
</span><span id=__span-18-35><a id=__codelineno-18-35 name=__codelineno-18-35></a><a href=#__codelineno-18-35><span class=linenos data-linenos="35 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>check_alerts</span><span class=p>(</span><span class=n>metrics</span><span class=p>)</span>
</span><span id=__span-18-36><a id=__codelineno-18-36 name=__codelineno-18-36></a><a href=#__codelineno-18-36><span class=linenos data-linenos="36 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>update_dashboard</span><span class=p>(</span><span class=n>metrics</span><span class=p>)</span>
</span><span id=__span-18-37><a id=__codelineno-18-37 name=__codelineno-18-37></a><a href=#__codelineno-18-37><span class=linenos data-linenos="37 "></span></a>            
</span><span id=__span-18-38><a id=__codelineno-18-38 name=__codelineno-18-38></a><a href=#__codelineno-18-38><span class=linenos data-linenos="38 "></span></a>            <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>60</span><span class=p>)</span>  <span class=c1># Collect every minute</span>
</span></code></pre></div><h4 id=day-3-4-cross-project-coordination>Day 3-4: Cross-Project Coordination<a class=headerlink href=#day-3-4-cross-project-coordination title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1></a><a href=#__codelineno-19-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/cross_project_coordinator.py</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2></a><a href=#__codelineno-19-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>CrossProjectCoordinator</span><span class=p>:</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3></a><a href=#__codelineno-19-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4></a><a href=#__codelineno-19-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>project_coordinators</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>ParallelCoordinator</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5></a><a href=#__codelineno-19-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>global_resource_manager</span> <span class=o>=</span> <span class=n>GlobalResourceManager</span><span class=p>()</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6></a><a href=#__codelineno-19-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>project_priorities</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7></a><a href=#__codelineno-19-7><span class=linenos data-linenos=" 7 "></span></a>        
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8></a><a href=#__codelineno-19-8><span class=linenos data-linenos=" 8 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>register_project</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>priority</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9></a><a href=#__codelineno-19-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Register project for cross-project coordination&quot;&quot;&quot;</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10></a><a href=#__codelineno-19-10><span class=linenos data-linenos="10 "></span></a>        <span class=n>coordinator</span> <span class=o>=</span> <span class=n>ParallelCoordinator</span><span class=p>(</span>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11></a><a href=#__codelineno-19-11><span class=linenos data-linenos="11 "></span></a>            <span class=n>max_parallel</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>calculate_project_allocation</span><span class=p>(</span><span class=n>priority</span><span class=p>)</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12></a><a href=#__codelineno-19-12><span class=linenos data-linenos="12 "></span></a>        <span class=p>)</span>
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13></a><a href=#__codelineno-19-13><span class=linenos data-linenos="13 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>project_coordinators</span><span class=p>[</span><span class=n>project_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>coordinator</span>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14></a><a href=#__codelineno-19-14><span class=linenos data-linenos="14 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>project_priorities</span><span class=p>[</span><span class=n>project_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>priority</span>
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15></a><a href=#__codelineno-19-15><span class=linenos data-linenos="15 "></span></a>        
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16></a><a href=#__codelineno-19-16><span class=linenos data-linenos="16 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>allocate_global_resources</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-19-17><a id=__codelineno-19-17 name=__codelineno-19-17></a><a href=#__codelineno-19-17><span class=linenos data-linenos="17 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Allocate resources across all projects&quot;&quot;&quot;</span>
</span><span id=__span-19-18><a id=__codelineno-19-18 name=__codelineno-19-18></a><a href=#__codelineno-19-18><span class=linenos data-linenos="18 "></span></a>        <span class=n>total_demand</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>calculate_total_demand</span><span class=p>()</span>
</span><span id=__span-19-19><a id=__codelineno-19-19 name=__codelineno-19-19></a><a href=#__codelineno-19-19><span class=linenos data-linenos="19 "></span></a>        <span class=n>available_resources</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>global_resource_manager</span><span class=o>.</span><span class=n>get_available</span><span class=p>()</span>
</span><span id=__span-19-20><a id=__codelineno-19-20 name=__codelineno-19-20></a><a href=#__codelineno-19-20><span class=linenos data-linenos="20 "></span></a>        
</span><span id=__span-19-21><a id=__codelineno-19-21 name=__codelineno-19-21></a><a href=#__codelineno-19-21><span class=linenos data-linenos="21 "></span></a>        <span class=c1># Allocate based on priority</span>
</span><span id=__span-19-22><a id=__codelineno-19-22 name=__codelineno-19-22></a><a href=#__codelineno-19-22><span class=linenos data-linenos="22 "></span></a>        <span class=n>allocations</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-19-23><a id=__codelineno-19-23 name=__codelineno-19-23></a><a href=#__codelineno-19-23><span class=linenos data-linenos="23 "></span></a>        <span class=k>for</span> <span class=n>project_id</span><span class=p>,</span> <span class=n>priority</span> <span class=ow>in</span> <span class=nb>sorted</span><span class=p>(</span>
</span><span id=__span-19-24><a id=__codelineno-19-24 name=__codelineno-19-24></a><a href=#__codelineno-19-24><span class=linenos data-linenos="24 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>project_priorities</span><span class=o>.</span><span class=n>items</span><span class=p>(),</span> 
</span><span id=__span-19-25><a id=__codelineno-19-25 name=__codelineno-19-25></a><a href=#__codelineno-19-25><span class=linenos data-linenos="25 "></span></a>            <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> 
</span><span id=__span-19-26><a id=__codelineno-19-26 name=__codelineno-19-26></a><a href=#__codelineno-19-26><span class=linenos data-linenos="26 "></span></a>            <span class=n>reverse</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-19-27><a id=__codelineno-19-27 name=__codelineno-19-27></a><a href=#__codelineno-19-27><span class=linenos data-linenos="27 "></span></a>        <span class=p>):</span>
</span><span id=__span-19-28><a id=__codelineno-19-28 name=__codelineno-19-28></a><a href=#__codelineno-19-28><span class=linenos data-linenos="28 "></span></a>            <span class=n>project_demand</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_project_demand</span><span class=p>(</span><span class=n>project_id</span><span class=p>)</span>
</span><span id=__span-19-29><a id=__codelineno-19-29 name=__codelineno-19-29></a><a href=#__codelineno-19-29><span class=linenos data-linenos="29 "></span></a>            <span class=n>project_allocation</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>calculate_fair_share</span><span class=p>(</span>
</span><span id=__span-19-30><a id=__codelineno-19-30 name=__codelineno-19-30></a><a href=#__codelineno-19-30><span class=linenos data-linenos="30 "></span></a>                <span class=n>project_demand</span><span class=p>,</span> 
</span><span id=__span-19-31><a id=__codelineno-19-31 name=__codelineno-19-31></a><a href=#__codelineno-19-31><span class=linenos data-linenos="31 "></span></a>                <span class=n>priority</span><span class=p>,</span> 
</span><span id=__span-19-32><a id=__codelineno-19-32 name=__codelineno-19-32></a><a href=#__codelineno-19-32><span class=linenos data-linenos="32 "></span></a>                <span class=n>available_resources</span><span class=p>,</span> 
</span><span id=__span-19-33><a id=__codelineno-19-33 name=__codelineno-19-33></a><a href=#__codelineno-19-33><span class=linenos data-linenos="33 "></span></a>                <span class=n>total_demand</span>
</span><span id=__span-19-34><a id=__codelineno-19-34 name=__codelineno-19-34></a><a href=#__codelineno-19-34><span class=linenos data-linenos="34 "></span></a>            <span class=p>)</span>
</span><span id=__span-19-35><a id=__codelineno-19-35 name=__codelineno-19-35></a><a href=#__codelineno-19-35><span class=linenos data-linenos="35 "></span></a>            <span class=n>allocations</span><span class=p>[</span><span class=n>project_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>project_allocation</span>
</span><span id=__span-19-36><a id=__codelineno-19-36 name=__codelineno-19-36></a><a href=#__codelineno-19-36><span class=linenos data-linenos="36 "></span></a>            
</span><span id=__span-19-37><a id=__codelineno-19-37 name=__codelineno-19-37></a><a href=#__codelineno-19-37><span class=linenos data-linenos="37 "></span></a>        <span class=c1># Apply allocations</span>
</span><span id=__span-19-38><a id=__codelineno-19-38 name=__codelineno-19-38></a><a href=#__codelineno-19-38><span class=linenos data-linenos="38 "></span></a>        <span class=k>for</span> <span class=n>project_id</span><span class=p>,</span> <span class=n>allocation</span> <span class=ow>in</span> <span class=n>allocations</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-19-39><a id=__codelineno-19-39 name=__codelineno-19-39></a><a href=#__codelineno-19-39><span class=linenos data-linenos="39 "></span></a>            <span class=n>coordinator</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_coordinators</span><span class=p>[</span><span class=n>project_id</span><span class=p>]</span>
</span><span id=__span-19-40><a id=__codelineno-19-40 name=__codelineno-19-40></a><a href=#__codelineno-19-40><span class=linenos data-linenos="40 "></span></a>            <span class=k>await</span> <span class=n>coordinator</span><span class=o>.</span><span class=n>update_resource_limits</span><span class=p>(</span><span class=n>allocation</span><span class=p>)</span>
</span></code></pre></div><h4 id=day-5-self-tuning-system>Day 5: Self-Tuning System<a class=headerlink href=#day-5-self-tuning-system title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1></a><a href=#__codelineno-20-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/self_tuning_system.py</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2></a><a href=#__codelineno-20-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>SelfTuningSystem</span><span class=p>:</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3></a><a href=#__codelineno-20-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4></a><a href=#__codelineno-20-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>performance_history</span> <span class=o>=</span> <span class=n>PerformanceHistory</span><span class=p>()</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5></a><a href=#__codelineno-20-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>tuning_parameters</span> <span class=o>=</span> <span class=n>TuningParameters</span><span class=p>()</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6></a><a href=#__codelineno-20-6><span class=linenos data-linenos=" 6 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>ml_tuner</span> <span class=o>=</span> <span class=n>MLBasedTuner</span><span class=p>()</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7></a><a href=#__codelineno-20-7><span class=linenos data-linenos=" 7 "></span></a>        
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8></a><a href=#__codelineno-20-8><span class=linenos data-linenos=" 8 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>auto_tune</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>TuningResult</span><span class=p>:</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9></a><a href=#__codelineno-20-9><span class=linenos data-linenos=" 9 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Automatically tune system parameters&quot;&quot;&quot;</span>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10></a><a href=#__codelineno-20-10><span class=linenos data-linenos="10 "></span></a>        <span class=c1># Collect recent performance data</span>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11></a><a href=#__codelineno-20-11><span class=linenos data-linenos="11 "></span></a>        <span class=n>recent_metrics</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>performance_history</span><span class=o>.</span><span class=n>get_recent</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>24</span><span class=p>)</span>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12></a><a href=#__codelineno-20-12><span class=linenos data-linenos="12 "></span></a>        
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13></a><a href=#__codelineno-20-13><span class=linenos data-linenos="13 "></span></a>        <span class=c1># Identify optimization opportunities</span>
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14></a><a href=#__codelineno-20-14><span class=linenos data-linenos="14 "></span></a>        <span class=n>opportunities</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>identify_opportunities</span><span class=p>(</span><span class=n>recent_metrics</span><span class=p>)</span>
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15></a><a href=#__codelineno-20-15><span class=linenos data-linenos="15 "></span></a>        
</span><span id=__span-20-16><a id=__codelineno-20-16 name=__codelineno-20-16></a><a href=#__codelineno-20-16><span class=linenos data-linenos="16 "></span></a>        <span class=c1># Apply ML-based tuning</span>
</span><span id=__span-20-17><a id=__codelineno-20-17 name=__codelineno-20-17></a><a href=#__codelineno-20-17><span class=linenos data-linenos="17 "></span></a>        <span class=k>for</span> <span class=n>opportunity</span> <span class=ow>in</span> <span class=n>opportunities</span><span class=p>:</span>
</span><span id=__span-20-18><a id=__codelineno-20-18 name=__codelineno-20-18></a><a href=#__codelineno-20-18><span class=linenos data-linenos="18 "></span></a>            <span class=k>if</span> <span class=n>opportunity</span><span class=o>.</span><span class=n>confidence</span> <span class=o>&gt;</span> <span class=mf>0.8</span><span class=p>:</span>
</span><span id=__span-20-19><a id=__codelineno-20-19 name=__codelineno-20-19></a><a href=#__codelineno-20-19><span class=linenos data-linenos="19 "></span></a>                <span class=n>new_value</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>ml_tuner</span><span class=o>.</span><span class=n>suggest_value</span><span class=p>(</span>
</span><span id=__span-20-20><a id=__codelineno-20-20 name=__codelineno-20-20></a><a href=#__codelineno-20-20><span class=linenos data-linenos="20 "></span></a>                    <span class=n>parameter</span><span class=o>=</span><span class=n>opportunity</span><span class=o>.</span><span class=n>parameter</span><span class=p>,</span>
</span><span id=__span-20-21><a id=__codelineno-20-21 name=__codelineno-20-21></a><a href=#__codelineno-20-21><span class=linenos data-linenos="21 "></span></a>                    <span class=n>current_value</span><span class=o>=</span><span class=n>opportunity</span><span class=o>.</span><span class=n>current_value</span><span class=p>,</span>
</span><span id=__span-20-22><a id=__codelineno-20-22 name=__codelineno-20-22></a><a href=#__codelineno-20-22><span class=linenos data-linenos="22 "></span></a>                    <span class=n>metrics</span><span class=o>=</span><span class=n>recent_metrics</span>
</span><span id=__span-20-23><a id=__codelineno-20-23 name=__codelineno-20-23></a><a href=#__codelineno-20-23><span class=linenos data-linenos="23 "></span></a>                <span class=p>)</span>
</span><span id=__span-20-24><a id=__codelineno-20-24 name=__codelineno-20-24></a><a href=#__codelineno-20-24><span class=linenos data-linenos="24 "></span></a>                
</span><span id=__span-20-25><a id=__codelineno-20-25 name=__codelineno-20-25></a><a href=#__codelineno-20-25><span class=linenos data-linenos="25 "></span></a>                <span class=c1># Apply with gradual rollout</span>
</span><span id=__span-20-26><a id=__codelineno-20-26 name=__codelineno-20-26></a><a href=#__codelineno-20-26><span class=linenos data-linenos="26 "></span></a>                <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>apply_tuning</span><span class=p>(</span>
</span><span id=__span-20-27><a id=__codelineno-20-27 name=__codelineno-20-27></a><a href=#__codelineno-20-27><span class=linenos data-linenos="27 "></span></a>                    <span class=n>parameter</span><span class=o>=</span><span class=n>opportunity</span><span class=o>.</span><span class=n>parameter</span><span class=p>,</span>
</span><span id=__span-20-28><a id=__codelineno-20-28 name=__codelineno-20-28></a><a href=#__codelineno-20-28><span class=linenos data-linenos="28 "></span></a>                    <span class=n>new_value</span><span class=o>=</span><span class=n>new_value</span><span class=p>,</span>
</span><span id=__span-20-29><a id=__codelineno-20-29 name=__codelineno-20-29></a><a href=#__codelineno-20-29><span class=linenos data-linenos="29 "></span></a>                    <span class=n>rollout_percentage</span><span class=o>=</span><span class=mi>20</span>  <span class=c1># Start with 20%</span>
</span><span id=__span-20-30><a id=__codelineno-20-30 name=__codelineno-20-30></a><a href=#__codelineno-20-30><span class=linenos data-linenos="30 "></span></a>                <span class=p>)</span>
</span><span id=__span-20-31><a id=__codelineno-20-31 name=__codelineno-20-31></a><a href=#__codelineno-20-31><span class=linenos data-linenos="31 "></span></a>                
</span><span id=__span-20-32><a id=__codelineno-20-32 name=__codelineno-20-32></a><a href=#__codelineno-20-32><span class=linenos data-linenos="32 "></span></a>        <span class=k>return</span> <span class=n>TuningResult</span><span class=p>(</span>
</span><span id=__span-20-33><a id=__codelineno-20-33 name=__codelineno-20-33></a><a href=#__codelineno-20-33><span class=linenos data-linenos="33 "></span></a>            <span class=n>parameters_tuned</span><span class=o>=</span><span class=nb>len</span><span class=p>(</span><span class=n>opportunities</span><span class=p>),</span>
</span><span id=__span-20-34><a id=__codelineno-20-34 name=__codelineno-20-34></a><a href=#__codelineno-20-34><span class=linenos data-linenos="34 "></span></a>            <span class=n>expected_improvement</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>calculate_expected_improvement</span><span class=p>(</span><span class=n>opportunities</span><span class=p>)</span>
</span><span id=__span-20-35><a id=__codelineno-20-35 name=__codelineno-20-35></a><a href=#__codelineno-20-35><span class=linenos data-linenos="35 "></span></a>        <span class=p>)</span>
</span><span id=__span-20-36><a id=__codelineno-20-36 name=__codelineno-20-36></a><a href=#__codelineno-20-36><span class=linenos data-linenos="36 "></span></a>        
</span><span id=__span-20-37><a id=__codelineno-20-37 name=__codelineno-20-37></a><a href=#__codelineno-20-37><span class=linenos data-linenos="37 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>apply_tuning</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parameter</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>new_value</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=n>rollout_percentage</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span><span id=__span-20-38><a id=__codelineno-20-38 name=__codelineno-20-38></a><a href=#__codelineno-20-38><span class=linenos data-linenos="38 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Apply tuning with gradual rollout&quot;&quot;&quot;</span>
</span><span id=__span-20-39><a id=__codelineno-20-39 name=__codelineno-20-39></a><a href=#__codelineno-20-39><span class=linenos data-linenos="39 "></span></a>        <span class=k>if</span> <span class=n>parameter</span> <span class=o>==</span> <span class=s2>&quot;max_parallel_cycles&quot;</span><span class=p>:</span>
</span><span id=__span-20-40><a id=__codelineno-20-40 name=__codelineno-20-40></a><a href=#__codelineno-20-40><span class=linenos data-linenos="40 "></span></a>            <span class=c1># Gradually increase parallelism</span>
</span><span id=__span-20-41><a id=__codelineno-20-41 name=__codelineno-20-41></a><a href=#__codelineno-20-41><span class=linenos data-linenos="41 "></span></a>            <span class=n>current</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>tuning_parameters</span><span class=o>.</span><span class=n>max_parallel_cycles</span>
</span><span id=__span-20-42><a id=__codelineno-20-42 name=__codelineno-20-42></a><a href=#__codelineno-20-42><span class=linenos data-linenos="42 "></span></a>            <span class=n>target</span> <span class=o>=</span> <span class=n>new_value</span>
</span><span id=__span-20-43><a id=__codelineno-20-43 name=__codelineno-20-43></a><a href=#__codelineno-20-43><span class=linenos data-linenos="43 "></span></a>            <span class=n>step</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=nb>int</span><span class=p>((</span><span class=n>target</span> <span class=o>-</span> <span class=n>current</span><span class=p>)</span> <span class=o>*</span> <span class=n>rollout_percentage</span> <span class=o>/</span> <span class=mi>100</span><span class=p>))</span>
</span><span id=__span-20-44><a id=__codelineno-20-44 name=__codelineno-20-44></a><a href=#__codelineno-20-44><span class=linenos data-linenos="44 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>tuning_parameters</span><span class=o>.</span><span class=n>max_parallel_cycles</span> <span class=o>=</span> <span class=n>current</span> <span class=o>+</span> <span class=n>step</span>
</span><span id=__span-20-45><a id=__codelineno-20-45 name=__codelineno-20-45></a><a href=#__codelineno-20-45><span class=linenos data-linenos="45 "></span></a>            
</span><span id=__span-20-46><a id=__codelineno-20-46 name=__codelineno-20-46></a><a href=#__codelineno-20-46><span class=linenos data-linenos="46 "></span></a>        <span class=k>elif</span> <span class=n>parameter</span> <span class=o>==</span> <span class=s2>&quot;conflict_threshold&quot;</span><span class=p>:</span>
</span><span id=__span-20-47><a id=__codelineno-20-47 name=__codelineno-20-47></a><a href=#__codelineno-20-47><span class=linenos data-linenos="47 "></span></a>            <span class=c1># Adjust conflict threshold</span>
</span><span id=__span-20-48><a id=__codelineno-20-48 name=__codelineno-20-48></a><a href=#__codelineno-20-48><span class=linenos data-linenos="48 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>tuning_parameters</span><span class=o>.</span><span class=n>conflict_threshold</span> <span class=o>=</span> <span class=n>new_value</span>
</span><span id=__span-20-49><a id=__codelineno-20-49 name=__codelineno-20-49></a><a href=#__codelineno-20-49><span class=linenos data-linenos="49 "></span></a>            
</span><span id=__span-20-50><a id=__codelineno-20-50 name=__codelineno-20-50></a><a href=#__codelineno-20-50><span class=linenos data-linenos="50 "></span></a>        <span class=c1># Monitor impact</span>
</span><span id=__span-20-51><a id=__codelineno-20-51 name=__codelineno-20-51></a><a href=#__codelineno-20-51><span class=linenos data-linenos="51 "></span></a>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>monitor_tuning_impact</span><span class=p>(</span><span class=n>parameter</span><span class=p>,</span> <span class=n>new_value</span><span class=p>)</span>
</span></code></pre></div><h3 id=week-8-final-integration-and-testing>Week 8: Final Integration and Testing<a class=headerlink href=#week-8-final-integration-and-testing title="Permanent link">&para;</a></h3><h4 id=day-1-2-production-test-suite>Day 1-2: Production Test Suite<a class=headerlink href=#day-1-2-production-test-suite title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1></a><a href=#__codelineno-21-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># tests/production/test_parallel_production.py</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2></a><a href=#__codelineno-21-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>TestProductionParallel</span><span class=p>:</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3></a><a href=#__codelineno-21-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>test_sustained_load</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4></a><a href=#__codelineno-21-4><span class=linenos data-linenos=" 4 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Test system under sustained production load&quot;&quot;&quot;</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5></a><a href=#__codelineno-21-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=n>orchestrator</span> <span class=o>=</span> <span class=n>ProductionParallelOrchestrator</span><span class=p>()</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6></a><a href=#__codelineno-21-6><span class=linenos data-linenos=" 6 "></span></a>        
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7></a><a href=#__codelineno-21-7><span class=linenos data-linenos=" 7 "></span></a>        <span class=c1># Generate realistic workload</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8></a><a href=#__codelineno-21-8><span class=linenos data-linenos=" 8 "></span></a>        <span class=n>stories</span> <span class=o>=</span> <span class=n>generate_production_workload</span><span class=p>(</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9></a><a href=#__codelineno-21-9><span class=linenos data-linenos=" 9 "></span></a>            <span class=n>num_stories</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10></a><a href=#__codelineno-21-10><span class=linenos data-linenos="10 "></span></a>            <span class=n>complexity_distribution</span><span class=o>=</span><span class=s2>&quot;normal&quot;</span><span class=p>,</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11></a><a href=#__codelineno-21-11><span class=linenos data-linenos="11 "></span></a>            <span class=n>conflict_rate</span><span class=o>=</span><span class=mf>0.1</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12></a><a href=#__codelineno-21-12><span class=linenos data-linenos="12 "></span></a>        <span class=p>)</span>
</span><span id=__span-21-13><a id=__codelineno-21-13 name=__codelineno-21-13></a><a href=#__codelineno-21-13><span class=linenos data-linenos="13 "></span></a>        
</span><span id=__span-21-14><a id=__codelineno-21-14 name=__codelineno-21-14></a><a href=#__codelineno-21-14><span class=linenos data-linenos="14 "></span></a>        <span class=c1># Run for extended period</span>
</span><span id=__span-21-15><a id=__codelineno-21-15 name=__codelineno-21-15></a><a href=#__codelineno-21-15><span class=linenos data-linenos="15 "></span></a>        <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span><span id=__span-21-16><a id=__codelineno-21-16 name=__codelineno-21-16></a><a href=#__codelineno-21-16><span class=linenos data-linenos="16 "></span></a>        <span class=n>results</span> <span class=o>=</span> <span class=k>await</span> <span class=n>orchestrator</span><span class=o>.</span><span class=n>execute_production_workload</span><span class=p>(</span>
</span><span id=__span-21-17><a id=__codelineno-21-17 name=__codelineno-21-17></a><a href=#__codelineno-21-17><span class=linenos data-linenos="17 "></span></a>            <span class=n>stories</span><span class=p>,</span>
</span><span id=__span-21-18><a id=__codelineno-21-18 name=__codelineno-21-18></a><a href=#__codelineno-21-18><span class=linenos data-linenos="18 "></span></a>            <span class=n>duration_hours</span><span class=o>=</span><span class=mi>2</span>
</span><span id=__span-21-19><a id=__codelineno-21-19 name=__codelineno-21-19></a><a href=#__codelineno-21-19><span class=linenos data-linenos="19 "></span></a>        <span class=p>)</span>
</span><span id=__span-21-20><a id=__codelineno-21-20 name=__codelineno-21-20></a><a href=#__codelineno-21-20><span class=linenos data-linenos="20 "></span></a>        
</span><span id=__span-21-21><a id=__codelineno-21-21 name=__codelineno-21-21></a><a href=#__codelineno-21-21><span class=linenos data-linenos="21 "></span></a>        <span class=c1># Verify performance</span>
</span><span id=__span-21-22><a id=__codelineno-21-22 name=__codelineno-21-22></a><a href=#__codelineno-21-22><span class=linenos data-linenos="22 "></span></a>        <span class=k>assert</span> <span class=n>results</span><span class=o>.</span><span class=n>average_throughput</span> <span class=o>&gt;</span> <span class=mi>10</span>  <span class=c1># stories/hour</span>
</span><span id=__span-21-23><a id=__codelineno-21-23 name=__codelineno-21-23></a><a href=#__codelineno-21-23><span class=linenos data-linenos="23 "></span></a>        <span class=k>assert</span> <span class=n>results</span><span class=o>.</span><span class=n>conflict_resolution_rate</span> <span class=o>&gt;</span> <span class=mf>0.8</span>
</span><span id=__span-21-24><a id=__codelineno-21-24 name=__codelineno-21-24></a><a href=#__codelineno-21-24><span class=linenos data-linenos="24 "></span></a>        <span class=k>assert</span> <span class=n>results</span><span class=o>.</span><span class=n>test_pass_rate</span> <span class=o>&gt;</span> <span class=mf>0.95</span>
</span><span id=__span-21-25><a id=__codelineno-21-25 name=__codelineno-21-25></a><a href=#__codelineno-21-25><span class=linenos data-linenos="25 "></span></a>        <span class=k>assert</span> <span class=n>results</span><span class=o>.</span><span class=n>resource_efficiency</span> <span class=o>&gt;</span> <span class=mf>0.7</span>
</span><span id=__span-21-26><a id=__codelineno-21-26 name=__codelineno-21-26></a><a href=#__codelineno-21-26><span class=linenos data-linenos="26 "></span></a>        
</span><span id=__span-21-27><a id=__codelineno-21-27 name=__codelineno-21-27></a><a href=#__codelineno-21-27><span class=linenos data-linenos="27 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>test_failure_recovery</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-21-28><a id=__codelineno-21-28 name=__codelineno-21-28></a><a href=#__codelineno-21-28><span class=linenos data-linenos="28 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Test system recovery from various failures&quot;&quot;&quot;</span>
</span><span id=__span-21-29><a id=__codelineno-21-29 name=__codelineno-21-29></a><a href=#__codelineno-21-29><span class=linenos data-linenos="29 "></span></a>        <span class=n>orchestrator</span> <span class=o>=</span> <span class=n>ProductionParallelOrchestrator</span><span class=p>()</span>
</span><span id=__span-21-30><a id=__codelineno-21-30 name=__codelineno-21-30></a><a href=#__codelineno-21-30><span class=linenos data-linenos="30 "></span></a>        
</span><span id=__span-21-31><a id=__codelineno-21-31 name=__codelineno-21-31></a><a href=#__codelineno-21-31><span class=linenos data-linenos="31 "></span></a>        <span class=c1># Test agent failure recovery</span>
</span><span id=__span-21-32><a id=__codelineno-21-32 name=__codelineno-21-32></a><a href=#__codelineno-21-32><span class=linenos data-linenos="32 "></span></a>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>simulate_agent_failure</span><span class=p>(</span><span class=n>orchestrator</span><span class=p>,</span> <span class=n>AgentType</span><span class=o>.</span><span class=n>CODE</span><span class=p>)</span>
</span><span id=__span-21-33><a id=__codelineno-21-33 name=__codelineno-21-33></a><a href=#__codelineno-21-33><span class=linenos data-linenos="33 "></span></a>        <span class=k>assert</span> <span class=k>await</span> <span class=n>orchestrator</span><span class=o>.</span><span class=n>is_healthy</span><span class=p>()</span>
</span><span id=__span-21-34><a id=__codelineno-21-34 name=__codelineno-21-34></a><a href=#__codelineno-21-34><span class=linenos data-linenos="34 "></span></a>        
</span><span id=__span-21-35><a id=__codelineno-21-35 name=__codelineno-21-35></a><a href=#__codelineno-21-35><span class=linenos data-linenos="35 "></span></a>        <span class=c1># Test conflict storm recovery</span>
</span><span id=__span-21-36><a id=__codelineno-21-36 name=__codelineno-21-36></a><a href=#__codelineno-21-36><span class=linenos data-linenos="36 "></span></a>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>simulate_conflict_storm</span><span class=p>(</span><span class=n>orchestrator</span><span class=p>)</span>
</span><span id=__span-21-37><a id=__codelineno-21-37 name=__codelineno-21-37></a><a href=#__codelineno-21-37><span class=linenos data-linenos="37 "></span></a>        <span class=k>assert</span> <span class=k>await</span> <span class=n>orchestrator</span><span class=o>.</span><span class=n>is_healthy</span><span class=p>()</span>
</span></code></pre></div><h4 id=day-3-4-documentation-and-training>Day 3-4: Documentation and Training<a class=headerlink href=#day-3-4-documentation-and-training title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1></a><a href=#__codelineno-22-1><span class=linenos data-linenos="1 "></span></a><span class=c1># Create comprehensive documentation</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2></a><a href=#__codelineno-22-2><span class=linenos data-linenos="2 "></span></a><span class=c1># - Architecture documentation</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3></a><a href=#__codelineno-22-3><span class=linenos data-linenos="3 "></span></a><span class=c1># - Operations runbook  </span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4></a><a href=#__codelineno-22-4><span class=linenos data-linenos="4 "></span></a><span class=c1># - Troubleshooting guide</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5></a><a href=#__codelineno-22-5><span class=linenos data-linenos="5 "></span></a><span class=c1># - Performance tuning guide</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6></a><a href=#__codelineno-22-6><span class=linenos data-linenos="6 "></span></a><span class=c1># - API reference</span>
</span></code></pre></div><h4 id=day-5-production-rollout-plan>Day 5: Production Rollout Plan<a class=headerlink href=#day-5-production-rollout-plan title="Permanent link">&para;</a></h4><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1></a><a href=#__codelineno-23-1><span class=linenos data-linenos=" 1 "></span></a><span class=c1># lib/parallel/rollout_manager.py</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2></a><a href=#__codelineno-23-2><span class=linenos data-linenos=" 2 "></span></a><span class=k>class</span> <span class=nc>ProductionRolloutManager</span><span class=p>:</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3></a><a href=#__codelineno-23-3><span class=linenos data-linenos=" 3 "></span></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4></a><a href=#__codelineno-23-4><span class=linenos data-linenos=" 4 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>feature_flags</span> <span class=o>=</span> <span class=n>FeatureFlagManager</span><span class=p>()</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5></a><a href=#__codelineno-23-5><span class=linenos data-linenos=" 5 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>rollout_stages</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6></a><a href=#__codelineno-23-6><span class=linenos data-linenos=" 6 "></span></a>            <span class=n>RolloutStage</span><span class=p>(</span><span class=s2>&quot;canary&quot;</span><span class=p>,</span> <span class=n>percentage</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>duration_hours</span><span class=o>=</span><span class=mi>24</span><span class=p>),</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7></a><a href=#__codelineno-23-7><span class=linenos data-linenos=" 7 "></span></a>            <span class=n>RolloutStage</span><span class=p>(</span><span class=s2>&quot;early_adopters&quot;</span><span class=p>,</span> <span class=n>percentage</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>duration_hours</span><span class=o>=</span><span class=mi>48</span><span class=p>),</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8></a><a href=#__codelineno-23-8><span class=linenos data-linenos=" 8 "></span></a>            <span class=n>RolloutStage</span><span class=p>(</span><span class=s2>&quot;broad&quot;</span><span class=p>,</span> <span class=n>percentage</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>duration_hours</span><span class=o>=</span><span class=mi>72</span><span class=p>),</span>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9></a><a href=#__codelineno-23-9><span class=linenos data-linenos=" 9 "></span></a>            <span class=n>RolloutStage</span><span class=p>(</span><span class=s2>&quot;general&quot;</span><span class=p>,</span> <span class=n>percentage</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>duration_hours</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10></a><a href=#__codelineno-23-10><span class=linenos data-linenos="10 "></span></a>        <span class=p>]</span>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11></a><a href=#__codelineno-23-11><span class=linenos data-linenos="11 "></span></a>        
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12></a><a href=#__codelineno-23-12><span class=linenos data-linenos="12 "></span></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>execute_rollout</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>RolloutResult</span><span class=p>:</span>
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13></a><a href=#__codelineno-23-13><span class=linenos data-linenos="13 "></span></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Execute phased production rollout&quot;&quot;&quot;</span>
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14></a><a href=#__codelineno-23-14><span class=linenos data-linenos="14 "></span></a>        <span class=k>for</span> <span class=n>stage</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>rollout_stages</span><span class=p>:</span>
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15></a><a href=#__codelineno-23-15><span class=linenos data-linenos="15 "></span></a>            <span class=c1># Enable for percentage of users</span>
</span><span id=__span-23-16><a id=__codelineno-23-16 name=__codelineno-23-16></a><a href=#__codelineno-23-16><span class=linenos data-linenos="16 "></span></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>feature_flags</span><span class=o>.</span><span class=n>enable_for_percentage</span><span class=p>(</span>
</span><span id=__span-23-17><a id=__codelineno-23-17 name=__codelineno-23-17></a><a href=#__codelineno-23-17><span class=linenos data-linenos="17 "></span></a>                <span class=s2>&quot;parallel_tdd_execution&quot;</span><span class=p>,</span>
</span><span id=__span-23-18><a id=__codelineno-23-18 name=__codelineno-23-18></a><a href=#__codelineno-23-18><span class=linenos data-linenos="18 "></span></a>                <span class=n>stage</span><span class=o>.</span><span class=n>percentage</span>
</span><span id=__span-23-19><a id=__codelineno-23-19 name=__codelineno-23-19></a><a href=#__codelineno-23-19><span class=linenos data-linenos="19 "></span></a>            <span class=p>)</span>
</span><span id=__span-23-20><a id=__codelineno-23-20 name=__codelineno-23-20></a><a href=#__codelineno-23-20><span class=linenos data-linenos="20 "></span></a>            
</span><span id=__span-23-21><a id=__codelineno-23-21 name=__codelineno-23-21></a><a href=#__codelineno-23-21><span class=linenos data-linenos="21 "></span></a>            <span class=c1># Monitor metrics</span>
</span><span id=__span-23-22><a id=__codelineno-23-22 name=__codelineno-23-22></a><a href=#__codelineno-23-22><span class=linenos data-linenos="22 "></span></a>            <span class=n>metrics</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>monitor_stage</span><span class=p>(</span><span class=n>stage</span><span class=p>)</span>
</span><span id=__span-23-23><a id=__codelineno-23-23 name=__codelineno-23-23></a><a href=#__codelineno-23-23><span class=linenos data-linenos="23 "></span></a>            
</span><span id=__span-23-24><a id=__codelineno-23-24 name=__codelineno-23-24></a><a href=#__codelineno-23-24><span class=linenos data-linenos="24 "></span></a>            <span class=c1># Check success criteria</span>
</span><span id=__span-23-25><a id=__codelineno-23-25 name=__codelineno-23-25></a><a href=#__codelineno-23-25><span class=linenos data-linenos="25 "></span></a>            <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>meets_criteria</span><span class=p>(</span><span class=n>metrics</span><span class=p>):</span>
</span><span id=__span-23-26><a id=__codelineno-23-26 name=__codelineno-23-26></a><a href=#__codelineno-23-26><span class=linenos data-linenos="26 "></span></a>                <span class=c1># Rollback</span>
</span><span id=__span-23-27><a id=__codelineno-23-27 name=__codelineno-23-27></a><a href=#__codelineno-23-27><span class=linenos data-linenos="27 "></span></a>                <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>rollback</span><span class=p>(</span><span class=n>stage</span><span class=p>)</span>
</span><span id=__span-23-28><a id=__codelineno-23-28 name=__codelineno-23-28></a><a href=#__codelineno-23-28><span class=linenos data-linenos="28 "></span></a>                <span class=k>return</span> <span class=n>RolloutResult</span><span class=p>(</span>
</span><span id=__span-23-29><a id=__codelineno-23-29 name=__codelineno-23-29></a><a href=#__codelineno-23-29><span class=linenos data-linenos="29 "></span></a>                    <span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-23-30><a id=__codelineno-23-30 name=__codelineno-23-30></a><a href=#__codelineno-23-30><span class=linenos data-linenos="30 "></span></a>                    <span class=n>stopped_at_stage</span><span class=o>=</span><span class=n>stage</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-23-31><a id=__codelineno-23-31 name=__codelineno-23-31></a><a href=#__codelineno-23-31><span class=linenos data-linenos="31 "></span></a>                    <span class=n>reason</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>get_failure_reason</span><span class=p>(</span><span class=n>metrics</span><span class=p>)</span>
</span><span id=__span-23-32><a id=__codelineno-23-32 name=__codelineno-23-32></a><a href=#__codelineno-23-32><span class=linenos data-linenos="32 "></span></a>                <span class=p>)</span>
</span><span id=__span-23-33><a id=__codelineno-23-33 name=__codelineno-23-33></a><a href=#__codelineno-23-33><span class=linenos data-linenos="33 "></span></a>                
</span><span id=__span-23-34><a id=__codelineno-23-34 name=__codelineno-23-34></a><a href=#__codelineno-23-34><span class=linenos data-linenos="34 "></span></a>            <span class=c1># Wait before next stage</span>
</span><span id=__span-23-35><a id=__codelineno-23-35 name=__codelineno-23-35></a><a href=#__codelineno-23-35><span class=linenos data-linenos="35 "></span></a>            <span class=k>if</span> <span class=n>stage</span><span class=o>.</span><span class=n>duration_hours</span><span class=p>:</span>
</span><span id=__span-23-36><a id=__codelineno-23-36 name=__codelineno-23-36></a><a href=#__codelineno-23-36><span class=linenos data-linenos="36 "></span></a>                <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>stage</span><span class=o>.</span><span class=n>duration_hours</span> <span class=o>*</span> <span class=mi>3600</span><span class=p>)</span>
</span><span id=__span-23-37><a id=__codelineno-23-37 name=__codelineno-23-37></a><a href=#__codelineno-23-37><span class=linenos data-linenos="37 "></span></a>                
</span><span id=__span-23-38><a id=__codelineno-23-38 name=__codelineno-23-38></a><a href=#__codelineno-23-38><span class=linenos data-linenos="38 "></span></a>        <span class=k>return</span> <span class=n>RolloutResult</span><span class=p>(</span><span class=n>success</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></code></pre></div><h3 id=deliverables_3>Deliverables<a class=headerlink href=#deliverables_3 title="Permanent link">&para;</a></h3><ol><li>Production-ready monitoring system</li><li>Cross-project coordination capability</li><li>Self-tuning optimization system</li><li>Comprehensive test suite</li><li>Production rollout plan</li></ol><h2 id=risk-mitigation-matrix>Risk Mitigation Matrix<a class=headerlink href=#risk-mitigation-matrix title="Permanent link">&para;</a></h2><table><thead><tr><th>Risk</th><th>Likelihood</th><th>Impact</th><th>Mitigation Strategy</th></tr></thead><tbody><tr><td>Data corruption</td><td>Low</td><td>High</td><td>Transactional storage, automatic backups</td></tr><tr><td>Deadlocks</td><td>Medium</td><td>High</td><td>Timeout detection, ordered locking</td></tr><tr><td>Performance degradation</td><td>Medium</td><td>Medium</td><td>Continuous monitoring, auto-scaling</td></tr><tr><td>Conflict storms</td><td>Low</td><td>High</td><td>Circuit breakers, fallback to sequential</td></tr><tr><td>Resource exhaustion</td><td>Medium</td><td>Medium</td><td>Resource limits, quotas</td></tr></tbody></table><h2 id=success-metrics>Success Metrics<a class=headerlink href=#success-metrics title="Permanent link">&para;</a></h2><h3 id=phase-1-basic-parallel>Phase 1 (Basic Parallel)<a class=headerlink href=#phase-1-basic-parallel title="Permanent link">&para;</a></h3><ul><li>‚úì 2 concurrent cycles working</li><li>‚úì &lt;5% conflict rate</li><li>‚úì 1.5x throughput improvement</li><li>‚úì Zero data corruption</li></ul><h3 id=phase-2-intelligent-scheduling>Phase 2 (Intelligent Scheduling)<a class=headerlink href=#phase-2-intelligent-scheduling title="Permanent link">&para;</a></h3><ul><li>‚úì 3 concurrent cycles</li><li>‚úì Dependency awareness working</li><li>‚úì 50% conflicts auto-resolved</li><li>‚úì 2x throughput improvement</li></ul><h3 id=phase-3-advanced-parallelism>Phase 3 (Advanced Parallelism)<a class=headerlink href=#phase-3-advanced-parallelism title="Permanent link">&para;</a></h3><ul><li>‚úì 5+ concurrent cycles</li><li>‚úì ML predictions &gt;80% accurate</li><li>‚úì 80% conflicts auto-resolved</li><li>‚úì 3x throughput improvement</li></ul><h3 id=phase-4-production-optimization>Phase 4 (Production Optimization)<a class=headerlink href=#phase-4-production-optimization title="Permanent link">&para;</a></h3><ul><li>‚úì Self-tuning active</li><li>‚úì &lt;2% manual intervention</li><li>‚úì &gt;90% resource efficiency</li><li>‚úì 3.5x sustained throughput</li></ul><h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">&para;</a></h2><p>This implementation strategy provides a clear path from basic parallel execution to a sophisticated, self-tuning system. The phased approach minimizes risk while delivering value incrementally. Each phase builds on the previous, ensuring a solid foundation for production-scale parallel TDD execution.</p><aside class=md-source-file><span class=md-source-file__fact><span class=md-icon title="Last update"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="June 18, 2025 00:22:32 UTC">June 18, 2025 00:22:32</span></span><span class=md-source-file__fact><span class=md-icon title=Created><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="June 18, 2025 00:22:32 UTC">June 18, 2025 00:22:32</span></span></aside><form class=md-feedback name=feedback hidden><fieldset><legend class=md-feedback__title> Was this page helpful? </legend><div class=md-feedback__inner><div class=md-feedback__list><button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg></button><button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg></button></div><div class=md-feedback__note><div data-md-value=1 hidden> Thanks for your feedback! </div><div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by <a href="https://github.com/jmontp/agent-workflow/issues/new/?title=[Feedback]+Parallel%20TDD%20Implementation%20Strategy+-+/architecture/parallel-tdd-implementation-strategy/" target=_blank rel=noopener>telling us what you found confusing</a>. </div></div></div></fieldset></form></article></div><script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type=button class="md-top md-icon" data-md-component=top hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a href=../parallel-tdd-technical-specification/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Parallel TDD Implementation"><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15.41 16.58 10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg></div><div class=md-footer__title><span class=md-footer__direction> Previous </span><div class=md-ellipsis> Parallel TDD Implementation </div></div></a><a href=../parallel-tdd-comprehensive-implementation-plan/ class="md-footer__link md-footer__link--next" aria-label="Next: Parallel TDD Comprehensive Plan"><div class=md-footer__title><span class=md-footer__direction> Next </span><div class=md-ellipsis> Parallel TDD Comprehensive Plan </div></div><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></div></a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright></div><div class=md-social><a href=https://github.com/jmontp/agent-workflow target=_blank rel=noopener title="GitHub Repository" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></a><a href=https://jmontp.github.io/agent-workflow/ target=_blank rel=noopener title="Documentation Site" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg></a><a href=https://discord.gg/your-discord-server target=_blank rel=noopener title="Discord Community" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8"/></svg></a><a href=https://github.com/sponsors/jmontp target=_blank rel=noopener title=Sponsor class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12 21.35-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53z"/></svg></a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><div class=md-progress data-md-component=progress role=progressbar></div><div class=md-consent data-md-component=consent id=__consent hidden><div class=md-consent__overlay></div><aside class=md-consent__inner><form class="md-consent__form md-grid md-typeset" name=consent><h4>Cookie consent</h4><p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p><input class=md-toggle type=checkbox id=__settings><div class=md-consent__settings><ul class=task-list><li class=task-list-item><label class=task-list-control><input type=checkbox name=analytics checked><span class=task-list-indicator></span> Google Analytics </label></li><li class=task-list-item><label class=task-list-control><input type=checkbox name=github checked><span class=task-list-indicator></span> GitHub </label></li></ul></div><div class=md-consent__controls><button class="md-button md-button--primary">Accept</button><button type=reset class="md-button md-button--primary">Reject</button><label class=md-button for=__settings>Manage settings</label></div></form></aside></div><script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script><script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": {"API": "api", "Architecture": "architecture", "CSS": "css", "Discord": "discord", "HTML5": "html", "JavaScript": "js", "Python": "python", "Scrum": "scrum", "TDD": "tdd"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script><script src=../../assets/javascripts/bundle.13a4f30d.min.js></script><script src=https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mtml-chtml.js></script><script src=../../js/mermaid-zoom.js></script><script src=../../js/universal-search.js></script><script src=../../js/enhanced-navigation.js></script><script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body></html>