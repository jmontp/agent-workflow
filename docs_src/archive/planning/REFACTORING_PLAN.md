### **Project Plan: `agent-workflow` Refactoring and Simplification**

#### **High-Level Goal**

To refactor the `agent-workflow` project into a single, modern, and maintainable Python package. This will involve consolidating the dual architecture, streamlining the codebase, and improving the developer experience, while preserving all core functionality.

#### **Execution Strategy**

The plan is divided into four phases. Each phase contains a set of epics, and each epic has stories that can be executed in parallel by different agents, as long as they don't touch the same files.

---

### **Phase 1: Architectural Unification**

**Goal**: Consolidate the `lib` and `agent_workflow` directories into a single, modern Python package.

*   **Epic 1.1: Migrate Core Data Models and State Machines**
    *   **Detailed Plan**: See [EPIC_1.1_PLAN.md](EPIC_1.1_PLAN.md)

*   **Epic 1.2: Migrate Core Logic**
    *   **Detailed Plan**: See [EPIC_1.2_PLAN.md](EPIC_1.2_PLAN.md)

*   **Epic 1.3: Migrate Agents and Security**
    *   **Detailed Plan**: See [EPIC_1.3_PLAN.md](EPIC_1.3_PLAN.md)

*   **Epic 1.4: Migrate Context Management and Integrations**
    *   **Detailed Plan**: See [EPIC_1.4_PLAN.md](EPIC_1.4_PLAN.md)

*   **Epic 1.5: Finalize Migration and Cleanup**
    *   **Detailed Plan**: See [EPIC_1.5_PLAN.md](EPIC_1.5_PLAN.md)

---

### **Phase 2: Codebase and Documentation Consolidation**

**Goal**: Reduce file count and simplify the project structure.

*   **Epic 2.1: Consolidate Test Suite**
    *   **Detailed Plan**: See [EPIC_2.1_PLAN.md](EPIC_2.1_PLAN.md)

*   **Epic 2.2: Refine Documentation (As per your plan)**
    *   **Detailed Plan**: See [EPIC_2.2_PLAN.md](EPIC_2.2_PLAN.md)

---

### **Phase 3: Tooling and Configuration Streamlining**

**Goal**: Improve the developer experience by integrating tools and simplifying configuration.

*   **Epic 3.1: Enhance the CLI**
    *   **Detailed Plan**: See [EPIC_3.1_PLAN.md](EPIC_3.1_PLAN.md)

*   **Epic 3.2: Unify Configuration**
    *   **Detailed Plan**: See [EPIC_3.2_PLAN.md](EPIC_3.2_PLAN.md)

*   **Epic 3.3: Update Web Visualizer**
    *   **Detailed Plan**: See [EPIC_3.3_PLAN.md](EPIC_3.3_PLAN.md)

---

### **Phase 4: Final Review and Validation**

**Goal**: Ensure the refactored project is stable, well-documented, and easy to maintain.

*   **Epic 4.1: Full System Validation**
    *   **Detailed Plan**: See [EPIC_4.1_PLAN.md](EPIC_4.1_PLAN.md)

*   **Epic 4.2: Update Final Documentation**
    *   **Detailed Plan**: See [EPIC_4.2_PLAN.md](EPIC_4.2_PLAN.md)
