
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Human-In-The-Loop orchestration framework for AI-assisted software development">
      
      
        <meta name="author" content="AI Agent Workflow Team">
      
      
        <link rel="canonical" href="https://jmontp.github.io/agent-workflow/architecture/overview/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../context-management-system/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>System Overview - AI Agent TDD-Scrum Workflow</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#architecture-overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AI Agent TDD-Scrum Workflow" class="md-header__button md-logo" aria-label="AI Agent TDD-Scrum Workflow" data-md-component="logo">
      
  <img src="../../assets/images/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AI Agent TDD-Scrum Workflow
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              System Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/jmontp/agent-workflow" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    jmontp/agent-workflow
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/" class="md-tabs__link">
          
  
  
    
  
  ‚ö° Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user-guide/" class="md-tabs__link">
          
  
  
    
  
  üìä User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../concepts/" class="md-tabs__link">
          
  
  
    
  
  üéØ Core Concepts

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  üî• Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../advanced/" class="md-tabs__link">
          
  
  
    
  
  ‚ö° Advanced Topics

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/" class="md-tabs__link">
          
  
  
    
  
  üìä Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../deployment/" class="md-tabs__link">
          
  
  
    
  
  üî• Deployment

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AI Agent TDD-Scrum Workflow" class="md-nav__button md-logo" aria-label="AI Agent TDD-Scrum Workflow" data-md-component="logo">
      
  <img src="../../assets/images/favicon.png" alt="logo">

    </a>
    AI Agent TDD-Scrum Workflow
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jmontp/agent-workflow" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    jmontp/agent-workflow
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../getting-started/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ‚ö° Getting Started
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../user-guide/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    üìä User Guide
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../concepts/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    üéØ Core Concepts
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    üî• Architecture
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            üî• Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    System Overview
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    System Overview
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-architecture-layers" class="md-nav__link">
    <span class="md-ellipsis">
      System Architecture Layers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System Architecture Layers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-multi-project-orchestration-layer" class="md-nav__link">
    <span class="md-ellipsis">
      1. Multi-Project Orchestration Layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-context-management-layer" class="md-nav__link">
    <span class="md-ellipsis">
      2. Context Management Layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-project-coordination-layer" class="md-nav__link">
    <span class="md-ellipsis">
      3. Project Coordination Layer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dual-state-machine-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Dual State Machine Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dual State Machine Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-workflow-state-machine-primary" class="md-nav__link">
    <span class="md-ellipsis">
      1. Workflow State Machine (Primary)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-tdd-state-machine-secondary" class="md-nav__link">
    <span class="md-ellipsis">
      2. TDD State Machine (Secondary)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ephemeral-agent-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      Ephemeral Agent Pattern
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ephemeral Agent Pattern">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#on-demand-orchestration" class="md-nav__link">
    <span class="md-ellipsis">
      On-Demand Orchestration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      Agent Lifecycle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tdd-state-machine-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      TDD State Machine Lifecycle
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TDD State Machine Lifecycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-design-phase" class="md-nav__link">
    <span class="md-ellipsis">
      1. DESIGN Phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-test_red-phase" class="md-nav__link">
    <span class="md-ellipsis">
      2. TEST_RED Phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-code_green-phase" class="md-nav__link">
    <span class="md-ellipsis">
      3. CODE_GREEN Phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-refactor-phase" class="md-nav__link">
    <span class="md-ellipsis">
      4. REFACTOR Phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-commit-phase" class="md-nav__link">
    <span class="md-ellipsis">
      5. COMMIT Phase
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-machine-interactions" class="md-nav__link">
    <span class="md-ellipsis">
      State Machine Interactions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State Machine Interactions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primary-secondary-activation" class="md-nav__link">
    <span class="md-ellipsis">
      Primary ‚Üí Secondary Activation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-story-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel Story Execution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-architectural-principles" class="md-nav__link">
    <span class="md-ellipsis">
      Key Architectural Principles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Architectural Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-separation-of-concerns" class="md-nav__link">
    <span class="md-ellipsis">
      1. Separation of Concerns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-human-in-the-loop-integration" class="md-nav__link">
    <span class="md-ellipsis">
      2. Human-In-The-Loop Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-parallel-processing" class="md-nav__link">
    <span class="md-ellipsis">
      3. Parallel Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-state-isolation-and-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      4. State Isolation and Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-and-tool-access" class="md-nav__link">
    <span class="md-ellipsis">
      Security and Tool Access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security and Tool Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-security-profiles" class="md-nav__link">
    <span class="md-ellipsis">
      Agent Security Profiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-boundaries" class="md-nav__link">
    <span class="md-ellipsis">
      Security Boundaries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-flow-and-persistence" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow and Persistence
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Flow and Persistence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#persistent-data-orch-state" class="md-nav__link">
    <span class="md-ellipsis">
      Persistent Data (.orch-state/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime-state" class="md-nav__link">
    <span class="md-ellipsis">
      Runtime State
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../context-management-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../context-api-specification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context API Specification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../context-algorithms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parallel-tdd-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parallel TDD Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parallel-tdd-technical-specification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parallel TDD Implementation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parallel-conflict-algorithms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parallel Conflict Resolution
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../advanced/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    ‚ö° Advanced Topics
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../development/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    üìä Development
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../deployment/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    üî• Deployment
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/jmontp/agent-workflow/edit/master/docs/architecture/overview.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/jmontp/agent-workflow/raw/master/docs/architecture/overview.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="architecture-overview">Architecture Overview<a class="headerlink" href="#architecture-overview" title="Permanent link">&para;</a></h1>
<p>The AI Agent TDD-Scrum Workflow system implements a sophisticated multi-layered architecture that coordinates Test-Driven Development (TDD) cycles within a broader Scrum workflow management framework. The system supports both single-project workflows and advanced multi-project orchestration with intelligent resource allocation, context management, and cross-project intelligence.</p>
<h2 id="system-architecture-layers">System Architecture Layers<a class="headerlink" href="#system-architecture-layers" title="Permanent link">&para;</a></h2>
<h3 id="1-multi-project-orchestration-layer">1. Multi-Project Orchestration Layer<a class="headerlink" href="#1-multi-project-orchestration-layer" title="Permanent link">&para;</a></h3>
<p>The top-level orchestration system manages multiple projects simultaneously:</p>
<pre class="mermaid"><code>graph TB
    subgraph "üåê Multi-Project Orchestration"
        MPO[Multi-Project Orchestrator]
        GOS[Global Orchestrator]
        RES[Resource Scheduler]
        SEC[Security System]
        MON[Monitoring System]
        INT[Intelligence System]
    end

    subgraph "üìä Context Management"
        CM[Context Manager]
        TC[Token Calculator]
        AM[Agent Memory]
        CC[Context Cache]
    end

    subgraph "üéØ Project A"
        PA_WSM[Workflow State Machine A]
        PA_TDD[TDD State Machines A]
        PA_AGENTS[Agent Pool A]
    end

    subgraph "üéØ Project B" 
        PB_WSM[Workflow State Machine B]
        PB_TDD[TDD State Machines B]
        PB_AGENTS[Agent Pool B]
    end

    MPO --&gt; GOS
    MPO --&gt; RES
    MPO --&gt; SEC
    MPO --&gt; MON
    MPO --&gt; INT

    GOS --&gt; PA_WSM
    GOS --&gt; PB_WSM

    CM --&gt; PA_AGENTS
    CM --&gt; PB_AGENTS

    PA_WSM --&gt; PA_TDD
    PB_WSM --&gt; PB_TDD

    RES --&gt; PA_AGENTS
    RES --&gt; PB_AGENTS

    style MPO fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px
    style CM fill:#4dabf7,stroke:#1971c2,stroke-width:3px</code></pre>
<h3 id="2-context-management-layer">2. Context Management Layer<a class="headerlink" href="#2-context-management-layer" title="Permanent link">&para;</a></h3>
<p>Intelligent context sharing and memory management across agents:</p>
<ul>
<li><strong>Context Manager</strong>: Optimizes agent communication and context sharing</li>
<li><strong>Token Calculator</strong>: Manages context size and token usage optimization</li>
<li><strong>Agent Memory</strong>: Persistent memory across agent interactions</li>
<li><strong>Context Cache</strong>: Efficient caching of frequently used context data</li>
</ul>
<h3 id="3-project-coordination-layer">3. Project Coordination Layer<a class="headerlink" href="#3-project-coordination-layer" title="Permanent link">&para;</a></h3>
<p>Individual project management with dual state machines:</p>
<ul>
<li><strong>Workflow State Machine</strong>: High-level Scrum process coordination</li>
<li><strong>TDD State Machines</strong>: Parallel story-level TDD cycle management</li>
<li><strong>Agent Pools</strong>: Project-specific ephemeral agent management</li>
</ul>
<h2 id="dual-state-machine-architecture">Dual State Machine Architecture<a class="headerlink" href="#dual-state-machine-architecture" title="Permanent link">&para;</a></h2>
<p>The system operates two parallel state machines that work in coordination:</p>
<h3 id="1-workflow-state-machine-primary">1. Workflow State Machine (Primary)<a class="headerlink" href="#1-workflow-state-machine-primary" title="Permanent link">&para;</a></h3>
<p>Manages the high-level Scrum development lifecycle:
- <strong>IDLE</strong> ‚Üí <strong>BACKLOG_READY</strong> ‚Üí <strong>SPRINT_PLANNED</strong> ‚Üí <strong>SPRINT_ACTIVE</strong> ‚Üí <strong>SPRINT_REVIEW</strong>
- Handles epic creation, sprint planning, and project coordination
- Enforces proper development sequences and human approval gates
- Persists project management data across sprint cycles</p>
<h3 id="2-tdd-state-machine-secondary">2. TDD State Machine (Secondary)<a class="headerlink" href="#2-tdd-state-machine-secondary" title="Permanent link">&para;</a></h3>
<p>Manages individual story implementation through proper TDD cycles:
- <strong>DESIGN</strong> ‚Üí <strong>TEST_RED</strong> ‚Üí <strong>CODE_GREEN</strong> ‚Üí <strong>REFACTOR</strong> ‚Üí <strong>COMMIT</strong>
- Activated when the primary state machine enters SPRINT_ACTIVE
- Runs in parallel for each story in the active sprint
- Ensures proper RED-GREEN-REFACTOR TDD methodology</p>
<h2 id="architecture-diagram">Architecture Diagram<a class="headerlink" href="#architecture-diagram" title="Permanent link">&para;</a></h2>
<pre class="mermaid"><code>graph TB
    subgraph "üë§ Solo Engineer"
        User[User]
    end

    subgraph DISCORD ["üéÆ Discord Interface"]
        Discord["/epic /sprint /tdd&lt;br/&gt;Slash Commands"]
        State[Interactive State&lt;br/&gt;Visualization]
    end

    subgraph WORKFLOW ["ü§ñ Dual State Machine System"]
        subgraph "üéõÔ∏è Primary Control Layer"
            WSM[Workflow State Machine&lt;br/&gt;IDLE - BACKLOG - SPRINT]
            HITL[Approval Gates&lt;br/&gt;Strategic Decisions]
            PM[Persistent Storage&lt;br/&gt;Epics - Stories - Tasks]
        end

        subgraph "üé≠ Ephemeral Orchestration"
            Orch[üé≠ Orchestrator Agent&lt;br/&gt;Scrum Master&lt;br/&gt;spun up on demand]
            Coord[üéØ Multi-Task Coordinator&lt;br/&gt;Parallel Story Execution]
        end

        subgraph "üîÑ TDD Execution Layer"
            subgraph "Story A TDD Cycle"
                TDD_A[TDD State Machine A&lt;br/&gt;DESIGN - TEST - CODE - REFACTOR]
                Design_A[üé® Design Agent A]
                QA_A[üß™ Test Agent A]
                Code_A[üíª Code Agent A]
            end

            subgraph "Story B TDD Cycle"
                TDD_B[TDD State Machine B&lt;br/&gt;DESIGN - TEST - CODE - REFACTOR]
                Design_B[üé® Design Agent B]
                QA_B[üß™ Test Agent B]
                Code_B[üíª Code Agent B]
            end

            Data[üìä Analytics Agent&lt;br/&gt;Cross-Story Metrics]
        end
    end

    subgraph PROJECT ["üíæ Your Project"]
        Tests[üß™ Test Suite&lt;br/&gt;RED - GREEN - REFACTOR]
        Repo[üìÅ Git Repository&lt;br/&gt;Code &amp; Documentation]
        State_Dir[üìÇ .orch-state/&lt;br/&gt;Sprint &amp; TDD State]
    end

    User --&gt;|"Commands"| Discord
    Discord &lt;--&gt;|"Validates"| WSM
    Discord --&gt;|"Updates"| State
    State --&gt;|"Progress"| User

    WSM --&gt;|"Spins up"| Orch
    Orch --&gt;|"Coordinates"| Coord
    WSM &lt;--&gt;|"Enforces"| HITL
    WSM &lt;--&gt;|"Reads/Writes"| PM

    Coord --&gt;|"Assigns Stories"| TDD_A
    Coord --&gt;|"Assigns Stories"| TDD_B

    TDD_A --&gt;|"1 Design"| Design_A
    TDD_A --&gt;|"2 Test"| QA_A
    TDD_A --&gt;|"3 Code"| Code_A

    TDD_B --&gt;|"1 Design"| Design_B
    TDD_B --&gt;|"2 Test"| QA_B
    TDD_B --&gt;|"3 Code"| Code_B

    Design_A --&gt;|"Specs"| Tests
    QA_A --&gt;|"Tests"| Tests
    Code_A --&gt;|"Implementation"| Tests

    Design_B --&gt;|"Specs"| Tests
    QA_B --&gt;|"Tests"| Tests
    Code_B --&gt;|"Implementation"| Tests

    Data --&gt;|"Metrics"| State_Dir
    TDD_A --&gt;|"Story State"| State_Dir
    TDD_B --&gt;|"Story State"| State_Dir

    Tests --&gt;|"Validates"| Repo
    Code_A --&gt;|"Commits"| Repo
    Code_B --&gt;|"Commits"| Repo

    HITL &lt;--&gt;|"Approvals"| Discord

    style User fill:#e1f5fe,stroke:#0277bd,stroke-width:3px
    style DISCORD fill:#f8f4ff,stroke:#7b1fa2,stroke-width:3px
    style WORKFLOW fill:#f0f8f0,stroke:#388e3c,stroke-width:3px
    style PROJECT fill:#fff8e1,stroke:#f57c00,stroke-width:3px
    style WSM fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px
    style TDD_A fill:#4dabf7,stroke:#1971c2,stroke-width:3px
    style TDD_B fill:#4dabf7,stroke:#1971c2,stroke-width:3px
    style Coord fill:#ffd43b,stroke:#fab005,stroke-width:3px</code></pre>
<h2 id="ephemeral-agent-pattern">Ephemeral Agent Pattern<a class="headerlink" href="#ephemeral-agent-pattern" title="Permanent link">&para;</a></h2>
<h3 id="on-demand-orchestration">On-Demand Orchestration<a class="headerlink" href="#on-demand-orchestration" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Orchestrator Agent</strong>: Spun up when entering SPRINT_ACTIVE state</li>
<li><strong>Multi-Task Coordination</strong>: Manages parallel TDD cycles for multiple stories</li>
<li><strong>Resource Optimization</strong>: Agents created and destroyed based on workload</li>
<li><strong>State Isolation</strong>: Each TDD cycle operates independently with shared coordination</li>
</ul>
<h3 id="agent-lifecycle">Agent Lifecycle<a class="headerlink" href="#agent-lifecycle" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Workflow State Transition</strong>: Primary state machine triggers agent creation</li>
<li><strong>Story Assignment</strong>: Coordinator assigns stories to TDD state machines</li>
<li><strong>Parallel Execution</strong>: Multiple TDD cycles run simultaneously</li>
<li><strong>Coordination</strong>: Shared analytics and progress reporting</li>
<li><strong>Cleanup</strong>: Agents destroyed when stories complete or sprint ends</li>
</ol>
<h2 id="tdd-state-machine-lifecycle">TDD State Machine Lifecycle<a class="headerlink" href="#tdd-state-machine-lifecycle" title="Permanent link">&para;</a></h2>
<p>Each story follows a strict TDD methodology enforced by the secondary state machine:</p>
<h3 id="1-design-phase">1. DESIGN Phase<a class="headerlink" href="#1-design-phase" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Design Agent</strong> creates technical specifications</li>
<li>Defines interfaces, data structures, and architecture</li>
<li>Outputs design documents and acceptance criteria</li>
<li><strong>Transition</strong>: Automatic to TEST_RED when design approved</li>
</ul>
<h3 id="2-test_red-phase">2. TEST_RED Phase<a class="headerlink" href="#2-test_red-phase" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>QA Agent</strong> writes failing tests based on design specs</li>
<li>Implements unit tests, integration tests, and acceptance tests</li>
<li>Ensures tests fail appropriately (RED state)</li>
<li><strong>Transition</strong>: Automatic to CODE_GREEN when tests written and failing</li>
</ul>
<h3 id="3-code_green-phase">3. CODE_GREEN Phase<a class="headerlink" href="#3-code_green-phase" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Code Agent</strong> implements minimal code to make tests pass</li>
<li>Focuses on making tests green without over-engineering</li>
<li>Validates implementation against test suite</li>
<li><strong>Transition</strong>: Automatic to REFACTOR when all tests pass</li>
</ul>
<h3 id="4-refactor-phase">4. REFACTOR Phase<a class="headerlink" href="#4-refactor-phase" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Code Agent</strong> improves code quality while maintaining green tests</li>
<li>Applies design patterns, removes duplication, improves readability</li>
<li>Ensures tests remain green throughout refactoring</li>
<li><strong>Transition</strong>: Manual approval or automatic after quality gates</li>
</ul>
<h3 id="5-commit-phase">5. COMMIT Phase<a class="headerlink" href="#5-commit-phase" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Code Agent</strong> commits changes to version control</li>
<li>Updates documentation and changelog</li>
<li>Triggers CI/CD pipeline for validation</li>
<li><strong>Transition</strong>: Story marked complete, returns to coordinator</li>
</ul>
<h2 id="state-machine-interactions">State Machine Interactions<a class="headerlink" href="#state-machine-interactions" title="Permanent link">&para;</a></h2>
<h3 id="primary-secondary-activation">Primary ‚Üí Secondary Activation<a class="headerlink" href="#primary-secondary-activation" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant WSM as Workflow State Machine
    participant Coord as Multi-Task Coordinator
    participant TDD as TDD State Machine
    participant Agents as TDD Agents

    WSM-&gt;&gt;Coord: SPRINT_ACTIVE triggered
    Coord-&gt;&gt;TDD: Create TDD instance for Story A
    Coord-&gt;&gt;TDD: Create TDD instance for Story B
    TDD-&gt;&gt;Agents: Spawn Design/QA/Code agents
    Agents-&gt;&gt;TDD: Report progress
    TDD-&gt;&gt;Coord: Story completion status
    Coord-&gt;&gt;WSM: Sprint progress update</code></pre>
<h3 id="parallel-story-execution">Parallel Story Execution<a class="headerlink" href="#parallel-story-execution" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>gantt
    title Parallel TDD Cycles in Active Sprint
    dateFormat X
    axisFormat %d

    section Story A TDD
    Design A     :done, design_a, 0, 1
    Test RED A   :done, red_a, after design_a, 2
    Code GREEN A :active, green_a, after red_a, 3
    Refactor A   :refactor_a, after green_a, 1
    Commit A     :commit_a, after refactor_a, 1

    section Story B TDD
    Design B     :done, design_b, 0, 1
    Test RED B   :done, red_b, after design_b, 2
    Code GREEN B :done, green_b, after red_b, 3
    Refactor B   :active, refactor_b, after green_b, 1
    Commit B     :commit_b, after refactor_b, 1

    section Coordination
    Analytics    :analytics, 2, 6
    Progress     :progress, 1, 7</code></pre>
<h2 id="key-architectural-principles">Key Architectural Principles<a class="headerlink" href="#key-architectural-principles" title="Permanent link">&para;</a></h2>
<h3 id="1-separation-of-concerns">1. Separation of Concerns<a class="headerlink" href="#1-separation-of-concerns" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Workflow Management</strong>: High-level project coordination and human interaction</li>
<li><strong>TDD Implementation</strong>: Technical development methodology enforcement</li>
<li><strong>State Persistence</strong>: Project data versioned with code, runtime state isolated</li>
</ul>
<h3 id="2-human-in-the-loop-integration">2. Human-In-The-Loop Integration<a class="headerlink" href="#2-human-in-the-loop-integration" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Strategic Approval</strong>: Workflow state machine requires human approval for major decisions</li>
<li><strong>TDD Oversight</strong>: Optional human intervention at any TDD phase</li>
<li><strong>Error Escalation</strong>: Automatic escalation to humans after failed automation attempts</li>
</ul>
<h3 id="3-parallel-processing">3. Parallel Processing<a class="headerlink" href="#3-parallel-processing" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Multi-Story Execution</strong>: Independent TDD cycles for parallel development</li>
<li><strong>Resource Optimization</strong>: Agents created/destroyed based on workload</li>
<li><strong>Shared Analytics</strong>: Cross-story metrics and progress reporting</li>
</ul>
<h3 id="4-state-isolation-and-recovery">4. State Isolation and Recovery<a class="headerlink" href="#4-state-isolation-and-recovery" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Independent Cycles</strong>: TDD state machines operate independently</li>
<li><strong>Failure Isolation</strong>: Failed story doesn't impact other parallel stories</li>
<li><strong>State Recovery</strong>: System can resume from any state after interruption</li>
</ul>
<h2 id="security-and-tool-access">Security and Tool Access<a class="headerlink" href="#security-and-tool-access" title="Permanent link">&para;</a></h2>
<h3 id="agent-security-profiles">Agent Security Profiles<a class="headerlink" href="#agent-security-profiles" title="Permanent link">&para;</a></h3>
<p>Each agent type has restricted tool access based on their role in the TDD cycle:</p>
<ul>
<li><strong>Orchestrator Agent</strong>: Full system access for coordination</li>
<li><strong>Design Agent</strong>: Read-only access for architecture and documentation</li>
<li><strong>QA Agent</strong>: Test execution and quality analysis tools only</li>
<li><strong>Code Agent</strong>: Code editing, compilation, and version control</li>
<li><strong>Analytics Agent</strong>: Data analysis and reporting tools only</li>
</ul>
<h3 id="security-boundaries">Security Boundaries<a class="headerlink" href="#security-boundaries" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Process Isolation</strong>: Each TDD cycle runs in isolated environment</li>
<li><strong>Tool Restrictions</strong>: Agents cannot access tools outside their domain</li>
<li><strong>Audit Trail</strong>: All agent actions logged for security and debugging</li>
<li><strong>Human Oversight</strong>: Security-critical operations require human approval</li>
</ul>
<h2 id="data-flow-and-persistence">Data Flow and Persistence<a class="headerlink" href="#data-flow-and-persistence" title="Permanent link">&para;</a></h2>
<h3 id="persistent-data-orch-state">Persistent Data (.orch-state/)<a class="headerlink" href="#persistent-data-orch-state" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Sprint Plans</strong>: Active and historical sprint configurations</li>
<li><strong>Story Status</strong>: Current state of each TDD cycle</li>
<li><strong>Analytics Data</strong>: Metrics, coverage, and performance data</li>
<li><strong>Error Logs</strong>: Failed attempts and recovery information</li>
</ul>
<h3 id="runtime-state">Runtime State<a class="headerlink" href="#runtime-state" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>State Machine Status</strong>: Current states of both state machines</li>
<li><strong>Agent Registry</strong>: Active agents and their assignments</li>
<li><strong>Coordination Data</strong>: Inter-story dependencies and shared resources</li>
<li><strong>Progress Tracking</strong>: Real-time status for Discord interface</li>
</ul>
<p>This dual state machine architecture provides a robust foundation for AI-assisted development that maintains proper TDD methodology while enabling parallel processing and human oversight of the overall development workflow.</p>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: üèóÔ∏è Architecture">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                üèóÔ∏è Architecture
              </div>
            </div>
          </a>
        
        
          
          <a href="../context-management-system/" class="md-footer__link md-footer__link--next" aria-label="Next: Context Management">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Context Management
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/jmontp/agent-workflow" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://jmontp.github.io/agent-workflow/" target="_blank" rel="noopener" title="Documentation Site" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96m0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../js/mermaid-zoom.js"></script>
      
    
  </body>
</html>